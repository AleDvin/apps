{
    "pages": [
        {
            "Name": "test_DBFind",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu",
            "Value": "Div(Class: content-wrapper){\r\n\tSetTitle(Test DBFind)\r\n\r\n    DBFind(Name: test_DBFind, Source: src_test).Custom(custom_text){\r\n        Span(#col_text#)\r\n    }.Custom(custom_datetime){\r\n        Span(#col_datetime#)\r\n    }.Custom(custom_varchar){\r\n        Span(#col_varchar#)\r\n    }.Custom(custom_character){\r\n        Span(#col_character#)\r\n    }.Custom(custom_number){\r\n        Span(#col_number#)\r\n    }.Custom(custom_money){\r\n        Span(#col_money#)\r\n    }.Custom(custom_double){\r\n        Span(#col_double#)\r\n    }.Custom(custom_binary){\r\n        Span(#col_binary#)\r\n    }.Order(\"id\").Limit(100)\r\n\r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            Div(Class: list-group-item){ \r\n                Table(src_test, \"id=id,col_text=custom_text,col_datetime=custom_datetime,col_varchar=custom_varchar,col_character=custom_character,col_number=custom_number,col_money=custom_money,col_double=custom_double,col_binary=custom_binary\")\r\n            }\r\n            \r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-left){\r\n                    Button(Body: LangRes(Insert 1000), Class: btn btn-primary, Contract: test_insert_10k, Page: test_DBFind)\r\n                }\r\n                Div(Class: pull-right){\r\n                    Button(Body: LangRes(DBFind), Class: btn btn-primary, Contract: test_DBFind, Page: test_DBFind)\r\n                }\r\n            }\r\n        }           \r\n    }\r\n}"
        }
    ],
    "blocks": [],
    "menus": [],
    "parameters": [],
    "languages": [],
    "contracts": [
        {
            "Name": "test_DBFind",
            "Value": "contract test_DBFind {\n    data {\n    }\n\n    conditions {\n\n        $i_limit = 100\n\n    }\n\n    action {\n        $ret = DBFind(\"test_DBFind_full\").Columns(\"col_text,col_datetime,col_varchar,col_character,col_number,col_money,col_double,col_binary\").Where(\"id > $\", 0).Order(\"id\").Limit($i_limit)\n        $len = Len($ret)\n        $i = 1\n\n        while($i <= $len){\n            $vals = $ret[$i-1]\n\n            $check = DBFind(\"test_DBFind\").Columns(\"id\").Where(\"id > $\", 0)\n            if (Len($check) > 0){\n                DBUpdate(`test_DBFind`, $i, `col_text,col_datetime,col_varchar,col_character,col_number,col_money,col_double,col_binary`,\n                        $vals[\"col_text\"], $vals[\"col_datetime\"], $vals[\"col_varchar\"], $vals[\"col_character\"], $vals[\"col_number\"], $vals[\"col_money\"], $vals[\"col_double\"], $vals[\"col_binary\"])\n            } else {\n                DBInsert(`test_DBFind`, `col_text,col_datetime,col_varchar,col_character,col_number,col_money,col_double,col_binary`,\n                        $vals[\"col_text\"], $vals[\"col_datetime\"], $vals[\"col_varchar\"], $vals[\"col_character\"], $vals[\"col_number\"], $vals[\"col_money\"], $vals[\"col_double\"], $vals[\"col_binary\"])    \n            }\n\n            $i = $i + 1\n        }\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "test_insert_10k",
            "Value": "contract test_insert_10k {\n    data {\n\n    }\n\n    conditions {\n    }\n\n    action {\n            $i = 1\n            while($i <= 1000){\n\n                $col_text = \"text\"\n                $col_datetime = \"2017-11-12 18:30\"\n                $col_varchar = \"varchar\"\n                $col_character = \"s\"\n                $col_number = $i\n                $col_money = $i*10 + 1000\n                $col_double = 0.24 + $i\n                $col_binary = \"binary\"\n\n                DBInsert(`test_DBFind_full`, `col_text,col_datetime,col_varchar,col_character,col_number,col_money,col_double,col_binary`,\n                        $col_text , $col_datetime, $col_varchar, $col_character, $col_number, $col_money, $col_double, $col_binary)\n            \n               $i = $i + 1 \n            }\n        }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "tables": [
        {
            "Name": "test_DBFind",
            "Columns": "[{\"name\":\"col_datetime\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"col_character\",\"type\":\"character\",\"conditions\":\"true\"},{\"name\":\"col_text\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"col_money\",\"type\":\"money\",\"conditions\":\"true\"},{\"name\":\"col_binary\",\"type\":\"bytea\",\"conditions\":\"true\"},{\"name\":\"col_double\",\"type\":\"double\",\"conditions\":\"true\"},{\"name\":\"col_number\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"col_varchar\",\"type\":\"varchar\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "test_DBFind_full",
            "Columns": "[{\"name\":\"col_character\",\"type\":\"character\",\"conditions\":\"true\"},{\"name\":\"col_text\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"col_money\",\"type\":\"money\",\"conditions\":\"true\"},{\"name\":\"col_binary\",\"type\":\"bytea\",\"conditions\":\"true\"},{\"name\":\"col_double\",\"type\":\"double\",\"conditions\":\"true\"},{\"name\":\"col_number\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"col_varchar\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"col_datetime\",\"type\":\"datetime\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ],
    "data": []
}