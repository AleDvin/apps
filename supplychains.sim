{
    "pages": [
        {
            "Name": "supplychains_sign",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper){\r\n    Div( row df f-valign){\r\n    \tDiv( col-md-2 mt-sm text-left)\r\n        Div( col-md-8 mt-sm text-left){ \r\n            Div(md-8 panel panel-default elastic data-sweet-alert){\r\n                Form(){\r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply).Where(\"cargo_id = #notific_val_int#\").Limit(1).Vars(\"supply\")\r\n\r\n\t\t\t\t\tInput(Name: cargo_id, \"form-control hidden m-b disabled=''\",text,text,#notific_val_int#)\r\n\r\n\t\t\t\t\tInput(Name: vOne, Class: \"form-control hidden m-b disabled=''\", Type: text, Value: 1)\r\n\t\t\t\t\tInput(Name: vTwo, Class: \"form-control hidden m-b disabled=''\", Type: text, Value: 2)\r\n                \r\n                    Div(list-group-item){\r\n\r\n                        Div( row df f-valign){\r\n                \t\t\tDiv( col-md-3 mt-xs text-center){\r\n\t\t\t\t\t\t\t\tDBFind(supplychains_cargo, src_cargo).Where(\"id = #supply_cargo_id#\").Vars(\"cargo\")\r\n                \t\t\t    SetVar(image, #cargo_qr_code#) \r\n                \t\t\t    Div(h4 text-center, If(GetVar(image)!==\"\"){ Image(#image#) })\r\n                            }\r\n                \t\t\tDiv( col-md-3 mt-xs text-right){\r\n                                P(h5){ Supplier name: }\r\n\t\t\t\t\t\t\t\tP(h5){ Cargo name: }\r\n                                If(#supply_step#>-2){\r\n\t\t\t\t\t\t\t\t\tP(h5){ Recipient name: }\r\n\t\t\t\t\t\t\t\t\tP(h5){ Date dispatch: }\r\n\t\t\t\t\t\t\t\t\tP(h5){ Date receipt: }\r\n                                }\r\n                            }\r\n                \t\t\tDiv( col-md-6 mt-xs text-left){\r\n\t\t\t\t\t\t\t\tP(h5){ #supply_supplier_name# }\r\n\t\t\t\t\t\t\t\tP(h5){ #supply_cargo_name# }\r\n\t\t\t\t\t\t\t\tP(h5){  #supply_recipient_name# }\r\n\t\t\t\t\t\t\t\tP(h5){  DateTime(#supply_date_dispatch#, DD.MM.YYYY HH:MI) }\r\n\t\t\t\t\t\t\t\tP(h5){  DateTime(#supply_date_receipt#, DD.MM.YYYY HH:MI) }\r\n\t\t\t\t\t\t\t\tP(h5){  #supply_step# / #supply_total_steps# }\r\n                            }\r\n                        }\r\n\r\n                    }                \r\n                    \r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply_id).Columns(id).Where(\"cargo_id = #notific_val_int#\").Limit(1).Vars(\"supply\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tDBFind(supplychains_steps, src_pos).Columns(\"holder_role_id, receiver_role_id, step, id, holder_signature, receiver_signature, receiver_date_signature, holder_date_signature, holder_name, holder_type, receiver_name,receiver_type\").Where(\"supply_id = #supply_id#\").Order(id)\r\n                    \r\n                    ForList(src_pos){\r\n                        Div(list-group-item) {\r\n                        \r\n\t\t\t\t\t\t\tIf(Or(#holder_role_id#>0,#holder_role_id#<0)){\r\n\t\t\t\t\t\t\t\tDBFind(roles_assign, src_hol).Where(\"role_id=#holder_role_id# and delete=0\").Limit(1).Vars(\"hol\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIf(Or(#receiver_role_id#>0,#receiver_role_id#<0)){\r\n\t\t\t\t\t\t\t\tDBFind(roles_assign, rec).Where(\"role_id=#receiver_role_id# and delete=0\").Limit(1).Vars(\"rec\")\r\n\t\t\t\t\t\t\t}\r\n\r\n                            Div( row df f-valign){\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h5, #holder_name#)\r\n\t\t\t\t\t\t\t\t\tIf(Or(#holder_signature#>0,#holder_signature#<0)){\r\n                    \t\t\t        Div(h6 text-success, Successfully signed at DateTime(#holder_date_signature#, DD.MM.YYYY HH:MI))\r\n                    \t\t\t    }\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-right){\r\n                    \t\t\t\r\n                    \t\t\t   If(Or(#hol_member_id#>0,#hol_member_id#<0)){ \r\n\t\t\t\t\t\t\t\t\t\tDBFind(member, src_member_hol).Where(\"member_id = #hol_member_id#\").Limit(1).Vars(\"hld\")\r\n                    \t\t\t        Div(h5 text-bold){\r\n\t\t\t\t\t\t\t\t\t\t\t#hld_member_name# \r\n\t\t\t\t\t\t\t\t\t\t\tImage(If(GetVar(hld_avatar)!==\"\"){ #hld_avatar# }.Else{ \"/static/img/apps/ava.png\"}, Avatar, img-thumbnail img-circle thumb-full h-30 w-30)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                    \t\t\t   }\r\n\r\n                    \t\t\t   Div(h6 text-muted, EcosysParam(supply_type,#holder_type#))\r\n                    \t\t\t   \r\n                                }\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h4 text-normal, Em(Class: fa fa-arrow-right))\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-left){\r\n                    \t\t\t\r\n                    \t\t\t    If(Or(#rec_member_id#>0,#rec_member_id#<0)){\r\n\t\t\t\t\t\t\t\t\t\tDBFind(member, src_member_rec).Where(\"member_id = #rec_member_id#\").Limit(1).Vars(\"rcv\")\r\n                    \t\t\t        Div(h5 text-bold){\r\n\t\t\t\t\t\t\t\t\t\t\tImage(If(GetVar(rcv_avatar)!==\"\"){ #rcv_avatar# }.Else{ \"/static/img/apps/ava.png\" }, Avatar, img-thumbnail img-circle thumb-full h-30 w-30)\r\n\t\t\t\t\t\t\t\t\t\t\t#rcv_member_name# }\r\n                    \t\t\t    }\r\n                    \t\t\t    \r\n                    \t\t\t    Div(h6 text-muted, EcosysParam(supply_type,#receiver_type#))\r\n                    \t\t\t    \r\n                                }\r\n                                \r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h5 , #receiver_name# )\r\n\t\t\t\t\t\t\t\t\tIf(Or(#receiver_signature#>0,#receiver_signature#<0)){\r\n                    \t\t\t        Div(h6 text-success, Successfully signed at DateTime(#receiver_date_signature#, DD.MM.YYYY HH:MI))\r\n                    \t\t\t    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n\t\t\t\t\tDBFind(supplychains_steps, src_pos).Columns(\"id, holder_role_id, receiver_role_id\").Where(\"supply_id=#supply_id# and step=#supply_step#\").Limit(1).Vars(\"steps\")\r\n\t\t\t\t\tDBFind(roles_assign, src_hol).Where(\"role_id=#steps_holder_role_id# and member_id=#key_id# and delete=0\").Limit(1).Vars(\"hold\")\r\n\t\t\t\t\tDBFind(roles_assign, src_rec).Where(\"role_id=#steps_receiver_role_id# and member_id=#key_id# and delete=0\").Limit(1).Vars(\"recv\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tDiv(panel-footer){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tSetVar(hold_member_id, 0)\r\n\t\t\t\t\t\tSetVar(recv_member_id, 0)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t#steps_id#\r\n\t\t\t\t\t\tsupply_id=#supply_id# and step=#supply_step#\r\n\t\t\t\t\t\tDiv(pull-left){\r\n\t\t\t\t\t\t\tIf(#recv_member_id#!== 0){\r\n\t\t\t\t\t\t\t\tImageInput(photo,320)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tDiv( pull-right ){\r\n\t\t\t\t\t\t\tIf(Or(#hold_member_id#>0, #hold_member_id#<0)){     \r\n\t\t\t\t\t\t\t\tDBFind(member, src_hld).Where(\"member_id = #hold_member_id#\").Limit(1).Vars(\"hld\")\r\n\t\t\t\t\t\t\t\tDiv(text-bold){ \r\n\t\t\t\t\t\t\t\t\tYour signature: Image(If(GetVar(hld_avatar)!==\"\"){ #hld_avatar#}.Else{ \"/static/img/apps/ava.png\"}, Avatar, img-thumbnail img-circle thumb-full h-30 w-30) \r\n\t\t\t\t\t\t\t\t\t#hld_member_name#\r\n\t\t\t\t\t\t\t\t\tButton(Contract: supplychains_sign, Body: Handed over, Params: \"vID=#steps_id#,vFlag=1,NotificID=#notific_id#,photo=Val(photo)\", Page: supplychains_list, Class: btn bg-gray-dark) \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tIf(Or(#recv_member_id#>0, #recv_member_id#<0)){\r\n\t\t\t\t\t\t\t\tDBFind(member, src_hld).Where(\"member_id = #recv_member_id#\").Limit(1).Vars(\"rcv\")\r\n\t\t\t\t\t\t\t\tDiv(text-bold){\r\n\t\t\t\t\t\t\t\t\tYour signature: Image(If(GetVar(rcv_avatar)!==\"\"){ #rcv_avatar#}.Else{ \"/static/img/apps/ava.png\"}, Avatar, img-thumbnail img-circle thumb-full h-30 w-30) \r\n\t\t\t\t\t\t\t\t\t#rcv_member_name# \r\n\t\t\t\t\t\t\t\t\tButton(Contract: supplychains_sign, Body: Taken over, Params: \"vID=#steps_id#,vFlag=2,NotificID=#notific_id#,photo=Val(photo)\", Page: supplychains_view, PageParams: \"cargo=#notific_val_int#\" Class: btn bg-gray-dark) \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n                }\r\n            }\r\n        }\r\n        Div( col-md-2 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "add_qr_code",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "membership_menu",
            "Value": "Div(content-wrapper ){\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left)\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n            Div(md-6 panel panel-default data-sweet-alert){\r\n\t\t\t\tForm(){\r\n\t\t\t\t\tDiv(panel-body){\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t\tLabel($qr_code$)\r\n\t\t\t\t\t\t\tImageInput(qr_code)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDiv(panel-footer){\r\n\t\t\t\t\t\tDiv( clearfix){\r\n\t\t\t\t\t\t\tDiv( pull-right){\r\n\t\t\t\t\t\t\t\tButton(Class: btn btn-primary, Contract: add_qr_code, Body: Add)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_addCargo",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper ){\r\n\tSetTitle($add_cargo$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($manufacturers$, supplychains_manufacturers)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $add_cargo$)\r\n\t}\r\n\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left )\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n            Div(md-6 panel panel-default data-sweet-alert){\r\n\t\t\t\tForm(){\r\n\t\t\t\t\tIf(#vID#>0){\r\n\t\t\t\t\t\tDBFind(supplychains_cargo, src_cargos).Where(\"id=#vID#\").Limit(1).Vars(\"row\")\r\n\t\t\t\t\t\tSetVar(v_name, #row_name#)\r\n\t\t\t\t\t\tSetVar(v_weight, #row_weight#)\r\n\t\t\t\t\t\tInput(Name: vID, Class: \"form-control  m-b hidden disabled=''\", Type: text, Value: #vID#)\r\n\t\t\t\t\t\tInput(Name: m_id, Class: \"form-control  m-b hidden disabled=''\", Type: text, Value: #m_id#)\r\n\t\t\t\t\t\tSetVar(title, \"Edit cargo\")\r\n\t\t\t\t\t\tSetVar(button_name, \"Save\")\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tSetVar(v_name, \"\")\r\n\t\t\t\t\t\tSetVar(v_weight, \"\")\r\n\t\t\t\t\t\tInput(Name: vID, Class: \"form-control  m-b hidden disabled=''\", Type: text, Value: 0)\r\n\t\t\t\t\t\tInput(Name: m_id, Class: \"form-control  m-b hidden disabled=''\", Type: text, Value: #m_id#)\r\n\t\t\t\t\t\tSetVar(title, \"Add cargo\")\r\n\t\t\t\t\t\tSetVar(button_name, \"Add\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDiv(panel-body){\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($name$)\r\n\t\t\t\t\t\t   If(#vID#>0){\r\n\t\t\t\t\t\t\t\tInput(Name: name, Class: form-control input-sm disabled='', Type: text, Value: #v_name#)\r\n\t\t\t\t\t\t   }.Else{\r\n\t\t\t\t\t\t\t\tInput(Name: name, Class: form-control input-sm, Type: text, Value: #v_name#)\r\n\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($cargo_type$)\r\n\t\t\t\t\t\t   \r\n\t\t\t\t\t\t   EcosysParam(Name: cargo_type, Source: src_cargo_type)\r\n\t\t\t\t\t\t   Select(Name: cargo_type, Source: src_cargo_type, NameColumn: name, ValueColumn: id, Value: #row_cargo_type#)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($weight$)\r\n\t\t\t\t\t\t   Input(Name: weight, Class: form-control input-sm,\"\", Type: number, Value: #v_weight#)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDiv(panel-footer){\r\n\t\t\t\t\t\tDiv( clearfix){\r\n\t\t\t\t\t\t\tDiv( pull-right){\r\n\t\t\t\t\t\t\t\tButton(Class: btn btn-primary, Contract: supplychains_addCargo, Body: #button_name#, Page: supplychains_manufacturerView, PageParams: \"m_id=#m_id#,m_name='#m_name#'\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_createStep2",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper ){\r\n\tSetTitle($create_supply_chain$)\r\n\tDiv(breadcrumb){\r\n        LinkPage(Supply Chains, supplychains_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_supply_chain$)\r\n\t}\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left )\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n            Div(md-6 panel panel-default data-sweet-alert){\r\n                Form(){\r\n\t\t\t\t\tDBFind(supplychains_manufacturers, src_manufacturer_name).Columns(\"name, id\").Where(\"id = #supplier#\").Vars(\"manufacturer\")\r\n\t\t\t\t\tDBFind(supplychains_cargo, src_cargo_list).Columns(\"name,id\").Where(\"delete = 0 and manufacturer_id = #supplier# and btn_block = 0\")\r\n\r\n                    Div(list-group-item){\r\n                        P(Class: h3 text-center text-bold, Body: Create Supply Chain)\r\n                    }\r\n                    Div(list-group-item){\r\n                        Div( row df f-valign){\r\n                            Div( col-md-4 mt-sm text-right){\r\n                                Div(h4 text-normal, \"Supplier:\")\r\n                            }\r\n                            Div( col-md-8 mt-sm text-left){\r\n                                Div(h4 text-normal){\r\n                                    #manufacturer_name#\r\n                                }\r\n                            }\r\n                        }\r\n                    }   \r\n                    Div(list-group-item){\r\n                        Div( row df f-valign){\r\n                            Div( col-md-4 mt-sm text-right){\r\n                                Div(h4 text-normal, \"Cargo:\")\r\n                            }\r\n                            Div( col-md-8 mt-xs text-left){\r\n\t\t\t\t\t\t\t\tSelect(Source: src_cargo_list, Name: cargo, NameColumn: name, ValueColumn: id, Value: 0)\r\n                            }\r\n                        }\r\n                    }\r\n                    Div(panel-footer){\r\n                        Div( clearfix){\r\n                            Div( pull-right){\r\n                                Button(Contract: supplychains_addSupply, Body: Add Supply, Params: \"manufacturer=#manufacturer_id#, cargo=Val(cargo)\", Page: supplychains_plan, PageParams: \"cargo=Val(cargo)\", Class: btn btn-primary)\r\n                            }\r\n                        }\r\n                    } \r\n                }\r\n            }\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_createStep1",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper ){\r\n    SetTitle($create_supply_chain$)\r\n\tDiv(breadcrumb){\r\n        LinkPage(Supply Chains, supplychains_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_supply_chain$)\r\n\t}\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left )\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n\t\t\tForm(){\r\n\t\t\t\tDiv(md-6 panel panel-default data-sweet-alert){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tDiv(list-group-item){\r\n\t\t\t\t\t\t\tP(Class: h3 text-center text-bold, Body: Create Supply Chain)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(list-group-item){\r\n\t\t\t\t\t\t\tDiv( row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv( col-md-4 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tDiv(h4 text-normal, \"Supplier:\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv( col-md-8 mt-xs text-left){\r\n\t\t\t\t\t\t\t\t\tDBFind(supplychains_manufacturers, src_manufacturersList).Columns(name,id).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\tSelect(Source: src_manufacturersList, Name: supplier, NameColumn: name, ValueColumn: id, Value: 0)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tDiv(panel-footer){\r\n\t\t\t\t\t\tDiv( clearfix){\r\n\t\t\t\t\t\t\tDiv( pull-right){\r\n\t\t\t\t\t\t\t\tButton(Page: supplychains_createStep2, PageParams: \"supplier=Val(supplier)\", Body: Next, Class: btn btn-primary)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_addRecipient",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper ){\r\n    SetTitle($recipient_companies$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($recipient_companies$, supplychains_recipients)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_recipient_company$)\r\n\t}\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left)\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n            Div(md-6 panel panel-default data-sweet-alert){\r\n\t\t\t\tForm(){\r\n\t\t\t\t\tIf(#vID#>0){\r\n\t\t\t\t\t\tDBFind(supplychains_recipients, src_recipients).Where(\"id=#vID#\").Limit(1).Vars(\"row\")\r\n\t\t\t\t\t\tSetVar(v_name, #row_name#)\r\n\t\t\t\t\t\tSetVar(v_coords, #row_coords#)\r\n\t\t\t\t\t\tSetVar(v_area, #row_area#)\r\n\t\t\t\t\t\tSetVar(coords_address, #row_address#)\r\n\t\t\t\t\t\tInput(Name: vID, Class: form-control  m-b hidden disabled='', Type: text, Value: #vID#)\r\n\t\t\t\t\t\tSetVar(title, \"Edit recipient companyes\")\r\n\t\t\t\t\t\tSetVar(button_name, \"Save\")\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tSetVar(v_name, \"\")\r\n\t\t\t\t\t\tSetVar(v_coords, #coord#)\r\n\t\t\t\t\t\tSetVar(v_area, \"\")\r\n\t\t\t\t\t\tSetVar(coords_address, \"\")\r\n\t\t\t\t\t\tInput(Name: vID, Class: form-control  m-b hidden disabled='', Type: text, Value: 0)\r\n\t\t\t\t\t\tSetVar(title, \"Add recipient companyes\")\r\n\t\t\t\t\t\tSetVar(button_name, \"Add\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDiv(panel-body){\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t\tLabel($name$)\r\n\t\t\t\t\t\t\tIf(#vID#>0){\r\n\t\t\t\t\t\t\t\tInput(Name: name, Class: form-control input-sm  disabled='', Type: text, Value: #v_name#)\r\n\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\tInput(Name: name, Class: form-control input-sm, Type: text, Value: #v_name#)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t\tLabel($map$)\r\n\t\t\t\t\t\t\tInput(Name: coords, Type: text)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t\tLabel($area$)\r\n\t\t\t\t\t\t\tInput(area,form-control input-sm,\"\",text, #v_area#)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t\tLabel($address$)\r\n\t\t\t\t\t\t\tInput(Name: coords_address, Class: form-control input-sm, Type: text, Value: #coords_address#)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDiv(panel-footer){\r\n\t\t\t\t\t\tDiv( clearfix){\r\n\t\t\t\t\t\t\tDiv( pull-right){\r\n\t\t\t\t\t\t\t\tButton(Class: btn btn-primary, Contract: supplychains_addRecipient,Body: #button_name#, Page: supplychains_recipients)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_addTransport",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper ){\r\n    SetTitle($create_transport_company$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($transport_companies$, supplychains_transport)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_transport_company$)\r\n\t}\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left)\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n            Div(md-6 panel panel-default data-sweet-alert){\r\n                Form(){\r\n                    \r\n                    If(#vID#>0){\r\n                        DBFind(supplychains_transport, src_transport).Where(\"id=#vID#\").Limit(1).Vars(\"row\")\r\n                        SetVar(v_name, #row_name#)\r\n                        SetVar(v_type, #row_type#)\r\n                        Input(Name: vID, Class: \"form-control  m-b hidden disabled=''\",Type: text, Value: #vID#)\r\n                        SetVar(title, \"Edit transport company\")\r\n                        SetVar(button_name, \"Save\")\r\n                    }.Else{\r\n                        SetVar(v_name, \"\")\r\n                        SetVar(v_type, \"\")\r\n                        Input(Name: vID, Class: \"form-control  m-b hidden disabled=''\",Type: text, Value: 0)\r\n                        SetVar(title, \"Add transport company\")\r\n                        SetVar(button_name, \"Add\")\r\n                    }\r\n                    Div(panel-body){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\tLabel($name$)\r\n\t\t\t\t\t\t\tIf(#vID#>0){\r\n\t\t\t\t\t\t\t\t\tInput(Name: name, Class: form-control input-sm  disabled='',Type: text, Value: #v_name#)\r\n\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\tInput(Name: name, Class: form-control input-sm, Type: text, Value: #v_name#)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\tLabel($type$)\r\n\t\t\t\t\t\tEcosysParam(Name: type_transport_company, Source: src_transport_company)\r\n\t\t\t\t\t\tSelect(Name: type_company, Source: src_transport_company, NameColumn: name, ValueColumn: id, Value: #v_type#)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n                    Div(panel-footer){\r\n                        Div( clearfix){\r\n                            Div( pull-right){\r\n                                Button(Class: btn btn-primary, Contract: supplychains_addTransport, Body: #button_name#, Page: supplychains_transport)\r\n                            }\r\n                        }\r\n                    }\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_addWarehouse",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper ){\r\n    SetTitle($create_warehouse$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($warehouses$, supplychains_warehouses)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_warehouse$)\r\n\t}\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left )\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n            Div(md-6 panel panel-default data-sweet-alert){\r\n                Form(){\r\n                    If(#vID#>0){\r\n                        DBFind(supplychains_warehouses, src_warehouses).Where(\"id=#vID#\").Limit(1).Vars(\"row\")\r\n                        SetVar(v_name, #row_name#)\r\n                        SetVar(v_coords, #row_coords#)\r\n                        SetVar(v_area, #row_area#)\r\n                        SetVar(coords_address, #row_address#)\r\n                        Input(Name: vID, Class: \"form-control  m-b hidden disabled=''\",Type: text, Value: #vID#)\r\n                        SetVar(title, \"Edit warehouse\")\r\n                        SetVar(button_name, \"Save\")\r\n                    }.Else{\r\n                        SetVar(v_name, \"\")\r\n                        SetVar(v_coords, #coord#)\r\n                        SetVar(v_area, \"\")\r\n                        SetVar(coords_address, \"\")\r\n                        Input(Name: vID, Class: \"form-control  m-b hidden disabled=''\",Type: text, Value: 0)\r\n                        SetVar(title, \"Add warehouse\")\r\n                        SetVar(button_name, \"Add\")\r\n                    }\r\n                    Div(panel-body){\r\n                        \r\n                            Div(form-group){\r\n                            Label($name$)\r\n                                If(#vID#>0){\r\n                                    Input(Name: name, Class: form-control input-sm  disabled='',Type: text, Value: #v_name#)\r\n                                }.Else{\r\n                                    Input(Name: name, Class: form-control input-sm, Type: text, Value: #v_name#)\r\n                                }\r\n                            }\r\n                            Div(form-group){\r\n                            Label($map$)\r\n                            Input(Name: coords, Type: text, Value: #v_coords#)\r\n                            }\r\n                            Div(form-group){\r\n                            Label($area$)\r\n                            Input(Name: area, Type: number)\r\n                            }\r\n                            Div(form-group){\r\n                            Label($address$)\r\n                            Input(Name: coords_address, Type: text)\r\n                            }\r\n                        }\r\n                    \r\n                    Div(panel-footer){\r\n                        Div( clearfix){\r\n                            Div( pull-right){\r\n                                Button(Class: btn btn-primary, Contract: supplychains_addWarehouses, Body:#button_name#, Page: supplychains_warehouses)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\t\t\t}\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_addManufacturer",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper ){\r\n    SetTitle($create_manufacturer$)\r\n\tDiv(breadcrumb){\r\n        LinkPage($manufacturers$, supplychains_manufacturers)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $create_manufacturer$)\r\n\t}\r\n    Div( row df f-valign){\r\n\t\tDiv( col-md-3 mt-sm text-left )\r\n\t\tDiv( col-md-6 mt-sm text-left){\r\n            Div(md-6 panel panel-default data-sweet-alert){\r\n\t\t\t\tForm(){\r\n\t\t\t\t\r\n\t\t\t\t\tIf(#vID#>0){\r\n\t\t\t\t\t\tDBFind(supplychains_manufacturers, src_recipients).Where(\"id=#vID#\").Limit(1).Vars(\"row\")\r\n\t\t\t\t\t\tSetVar(v_name, #row_name#)\r\n\t\t\t\t\t\tSetVar(v_coords, #row_coords#)\r\n\t\t\t\t\t\tSetVar(v_area, #row_area#)\r\n\t\t\t\t\t\tSetVar(coords_address, #row_address#)\r\n\t\t\t\t\t\tInput(Name: vID, Class: form-control  m-b hidden disabled='', Type: text, Value: #vID#)\r\n\t\t\t\t\t\tSetVar(title, \"Edit company manufacturer\")\r\n\t\t\t\t\t\tSetVar(button_name, \"Save\")\r\n\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\tSetVar(v_name, \"\")\r\n\t\t\t\t\t\tSetVar(v_coords, #coord#)\r\n\t\t\t\t\t\tSetVar(v_area, \"\")\r\n\t\t\t\t\t\tSetVar(coords_address, \"\")\r\n\t\t\t\t\t\tInput(Name: vID, Class: form-control  m-b hidden disabled='', Type: text, Value: 0)\r\n\t\t\t\t\t\tSetVar(title, \"Add company manufacturer\")\r\n\t\t\t\t\t\tSetVar(button_name, \"Add\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDiv(panel-body){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($name$)\r\n\t\t\t\t\t\t   If(#vID#>0){\r\n\t\t\t\t\t\t\t\tInput(name,form-control input-sm  disabled='',\"\",text, #v_name#)\r\n\t\t\t\t\t\t   }.Else{\r\n\t\t\t\t\t\t\t\tInput(name,form-control input-sm,\"\",text, #v_name#)\r\n\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($supplier_type$)\r\n\t\t\t\t\t\t   EcosysParam(Name: supplier_type, Source: src_supplier_type)\r\n\t\t\t\t\t\t   Select(Name: supplier_type, Source: src_supplier_type, NameColumn: name, ValueColumn: id, Value: #row_supplier_type#)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($map$)\r\n\t\t\t\t\t\t   Input(Name: coords, Type: text, Value: #v_coords#)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($area$)\r\n\t\t\t\t\t\t   Input(Name: area, Type: number)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDiv(form-group){\r\n\t\t\t\t\t\t   Label($address$)\r\n\t\t\t\t\t\t   Input(Name: coords_address, Type: text)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDiv(panel-footer){\r\n\t\t\t\t\t\tDiv( clearfix){\r\n\t\t\t\t\t\t\tDiv( pull-right){\r\n\t\t\t\t\t\t\t\tButton(Class: btn btn-primary, Contract: supplychains_addManufacturer, Body: #button_name#, Page: supplychains_manufacturers)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        Div( col-md-3 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_manufacturerView",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "DBFind(supplychains_manufacturers, src_manufacturers).Columns(name).Where(\"id=#m_id#\").Limit(1).Vars(\"m\")\r\nSetTitle($manufacturer_details$: #m_name#)\r\nDiv(breadcrumb){\r\n\tLinkPage($manufacturers$, supplychains_manufacturers)\r\n\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\tSpan(Class: text-muted, Body: #m_name#)\r\n}\r\n\r\nSetVar(ppp, \"(supply_id=0)\")\r\n\r\nDBFind(supplychains_supply, src_ids).Columns(\"id\").Where(\"delete=0 and status>2\")\r\n\r\nForList(src_ids){\r\n\tSetVar(ppp, \"#ppp# or (supply_id=#id#)\")\r\n}\r\n\r\nDBFind(supplychains_steps, src_steps).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#supply_id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_supplier){\r\n\tDBFind(supplychains_supply, src_supply_supplier).Columns(supplier_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#supplier_name#\r\n\t}\r\n}.Custom(custom_cargo){\r\n\tDBFind(supplychains_supply, src_supply_cargo).Columns(cargo_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#cargo_name#\r\n\t}\r\n}.Custom(custom_recipient){\r\n\tDBFind(supplychains_supply, src_supply_recipient).Columns(recipient_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#recipient_name#\r\n\t}\r\n}.Custom(custom_total_steps){\r\n\tDBFind(supplychains_supply, src_supply_steps).Columns(total_steps).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#total_steps#\r\n\t}\r\n}.Custom(custom_finishing_steps){\r\n\tDBFind(supplychains_supply, src_supply_step).Columns(step).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#step#\r\n\t}\r\n}.Custom(custom_status){\r\n\tDBFind(supplychains_supply, src_supply_status).Columns(status).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4 text-center){\r\n\t\tEcosysParam(supply_status, #status#)\r\n\t}\r\n}.Custom(custom_supply){\r\n\tDBFind(supplychains_supply, src_supply_cargo_id).Columns(cargo_id).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tSetVar(isCargoID, #cargo_id#) \r\n\tDiv(text-center h4){\r\n\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#isCargoID#\")\r\n\t}\r\n}.Where(\"holder_id=#m_id# and holder_type=1 and (#ppp#)\").Order(\"id\")\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Supply Chains)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_supply, Columns: \"$id$=custom_id,$supplier$=custom_supplier,$cargo$=custom_cargo,$recipient$=custom_recipient,$total_steps$=custom_total_steps,$fiishing_steps$=custom_finishing_steps,$status$=custom_status,$supply$=custom_supply\")\r\n        }\r\n    }\r\n}\r\n\r\n\r\nDBFind(supplychains_cargo, src_cargo).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_name){\r\n\tDiv(h4){\r\n\t\t#name#\r\n\t}\r\n}.Custom(custom_cargo_type){\r\n\tDiv(text-center h4){\r\n\t\tEcosysParam(cargo_type, #cargo_type#)\r\n\t}\r\n}.Custom(custom_weight){\r\n\tDiv(text-center h4){\r\n\t\t#weight#\r\n\t}\r\n}.Custom(custom_qr){\r\n\tSetVar(image, #qr_code#)\r\n\t\r\n\tDiv(text-center h4){\r\n\t\tIf(GetVar(image)!==\"\"){\r\n\t\t\tImage(Src: #image#, Alt: Image, Class: img-thumbnail w-50 h-50)\r\n\t\t}\r\n\t}\r\n}.Custom(custom_supply){\r\n\tDiv(text-center h4){\r\n\t\tIf(GetVar(image)!==\"\"){\r\n\t\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#cargo_id#\")\r\n\t\t}\r\n\t}.Style(width: 100;)\r\n}.Custom(edit){\r\n\tDiv(text-center h4){\t\r\n\t\tButton(Page: supplychains_addCargo, Body: Em(fa fa-edit), PageParams: \"vID=#id#,m_id=#m_id#,m_name='#m_name#'\")\r\n\t}\r\n}.Where(\"delete=0 and manufacturer_id=#m_id#\").Order(id)\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Cargos)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_cargo, Columns: \"$id$=custom_id,$name$=custom_name,$cargo_type$=cargo_type,$weight$=weight,$qr_code$=custom_qr,$supply$=custom_supply,$edit$=edit)\r\n        }\r\n    }\r\n\tDiv(panel-footer){\r\n        Div( clearfix){\r\n            Div(pull-right){\r\n                Button(Page: supplychains_addCargo, Body: Add, PageParams: \"m_id=#m_id#,m_name='#m_name#'\", Class: btn btn-primary)\r\n            }\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_recipientView",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "DBFind(supplychains_recipients, src_recipients).Columns(name).Where(\"id=#m_id#\").Limit(1).Vars(\"m\")\r\nSetTitle($recipient_company_details$: #m_name#)\r\nDiv(breadcrumb){\r\n\tLinkPage($recipient_companies$, supplychains_recipients)\r\n\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\tSpan(Class: text-muted, Body: #m_name#)\r\n}\r\nSetVar(ppp, \"(supply_id=0)\")\r\n\r\nDBFind(supplychains_supply, src_ids).Columns(\"id\").Where(\"delete=0 and status>2\")\r\n\r\nForList(src_ids){\r\n\tSetVar(ppp = \"#ppp# or (supply_id=#id#)\")\r\n}\r\n\r\nDBFind(supplychains_steps, src_steps).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#supply_id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_supplier){\r\n\tDBFind(supplychains_supply, src_supply_supplier).Columns(supplier_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#supplier_name#\r\n\t}\r\n}.Custom(custom_cargo){\r\n\tDBFind(supplychains_supply, src_supply_cargo).Columns(cargo_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#cargo_name#\r\n\t}\r\n}.Custom(custom_recipient){\r\n\tDBFind(supplychains_supply, src_supply_recipient).Columns(recipient_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#recipient_name#\r\n\t}\r\n}.Custom(custom_total_steps){\r\n\tDBFind(supplychains_supply, src_supply_steps).Columns(total_steps).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#total_steps#\r\n\t}\r\n}.Custom(custom_finishing_steps){\r\n\tDBFind(supplychains_supply, src_supply_step).Columns(step).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#step#\r\n\t}\r\n}.Custom(custom_status){\r\n\tDBFind(supplychains_supply, src_supply_status).Columns(status).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4 text-center){\r\n\t\tEcosysParam(supply_status, #status#)\r\n\t}\r\n}.Custom(custom_supply){\r\n\tDBFind(supplychains_supply, src_supply_cargo_id).Columns(cargo_id).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#cargo_id#\")\r\n\t}\r\n}.Where(\"receiver_id=#m_id# and receiver_type=4 and (#ppp#)\").Order(\"id\")\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Supply Chains)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_supply, Columns: \"$id$=custom_id,$supplier$=custom_supplier,$cargo$=custom_cargo,$recipient$=custom_recipient,$total_steps$=custom_total_steps,$fiishing_steps$=custom_finishing_steps,$status$=custom_status,$supply$=custom_supply\")\r\n        }\r\n    }\r\n}\r\n\r\n\r\nDBFind(supplychains_steps, src_steps2).Custom(custom_id){\r\n\tDBFind(supplychains_supply, src_supply_cargo_id2).Columns(cargo_id).Where(\"id=#supply_id#\").Limit(1).Vars(\"steps2\")\r\n\tSetVar(cargo_id, #steps2_cargo_id#)\r\n\tDiv(text-center h4){\r\n\t\t#steps2_cargo_id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_name){\r\n\tDBFind(supplychains_cargo, src_cargo_name2).Columns(name).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tDiv(h4){\r\n\t\t#steps2_name#\r\n\t}\r\n}.Custom(custom_cargo_type){\r\n\tDBFind(supplychains_cargo, src_cargo_type2).Columns(type).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tDiv(text-center h4){\r\n\t\tEcosysParam(cargo_type, #steps2_type#)\r\n\t}\r\n}.Custom(custom_weight){\r\n\tDBFind(supplychains_cargo, src_cargo_type2).Columns(weight).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tDiv(text-center h4){\r\n\t\t#steps2_weight#\r\n\t}\r\n}.Custom(custom_qr){\r\n\tDBFind(supplychains_cargo, src_cargo_qr2).Columns(qr_code).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tSetVar(image, #steps2_qr_code#)\r\n\t\r\n\tDiv(text-center h4){\r\n\t\tIf(GetVar(image)!==\"\"){\r\n\t\t\tImage(Src: #image#, Alt: Image, Class: img-thumbnail w-50 h-50)\r\n\t\t}\r\n\t}\r\n}.Custom(custom_supply){\r\n\tDiv(text-center h4){\r\n\t\tIf(GetVar(image)!==\"\"){\r\n\t\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#cargo_id#\")\r\n\t\t}\r\n\t}.Style(width: 100;)\r\n}.Where(\"receiver_id=#m_id# and receiver_type=4 and receiver_signature <> 0 and (#ppp#)\").Order(id)\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Cargos)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_supply, Columns: \"$id$=custom_id,$name$=custom_name,$cargo_type$=cargo_type,$weight$=weight,$qr_code$=custom_qr,$supply$=custom_supply)\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_warehouseView",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "DBFind(supplychains_warehouses, src_warehouses).Columns(name).Where(\"id=#m_id#\").Limit(1).Vars(\"m\")\r\nSetTitle($warehouse_details$: #m_name#)\r\nDiv(breadcrumb){\r\n\tLinkPage($warehouses$, supplychains_warehouses)\r\n\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\tSpan(Class: text-muted, Body: #m_name#)\r\n}\r\nSetVar(ppp, \"(supply_id=0)\")\r\n\r\nDBFind(supplychains_supply, src_ids).Columns(\"id\").Where(\"delete=0 and status>2\")\r\n\r\nForList(src_ids){\r\n\tSetVar(ppp = \"#ppp# or (supply_id=#id#)\")\r\n}\r\n\r\nDBFind(supplychains_steps, src_steps).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#supply_id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_supplier){\r\n\tDBFind(supplychains_supply, src_supply_supplier).Columns(supplier_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#supplier_name#\r\n\t}\r\n}.Custom(custom_cargo){\r\n\tDBFind(supplychains_supply, src_supply_cargo).Columns(cargo_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#cargo_name#\r\n\t}\r\n}.Custom(custom_recipient){\r\n\tDBFind(supplychains_supply, src_supply_recipient).Columns(recipient_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#recipient_name#\r\n\t}\r\n}.Custom(custom_total_steps){\r\n\tDBFind(supplychains_supply, src_supply_steps).Columns(total_steps).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#total_steps#\r\n\t}\r\n}.Custom(custom_finishing_steps){\r\n\tDBFind(supplychains_supply, src_supply_step).Columns(step).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#step#\r\n\t}\r\n}.Custom(custom_status){\r\n\tDBFind(supplychains_supply, src_supply_status).Columns(status).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4 text-center){\r\n\t\tEcosysParam(supply_status, #status#)\r\n\t}\r\n}.Custom(custom_supply){\r\n\tDBFind(supplychains_supply, src_supply_cargo_id).Columns(cargo_id).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tSetVar(isCargoID, #cargo_id#) \r\n\tDiv(text-center h4){\r\n\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#isCargoID#\")\r\n\t}\r\n}.Where(\"receiver_id=#m_id# and receiver_type=3 and (#ppp#)\").Order(\"id\")\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Supply Chains)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_supply, Columns: \"$id$=custom_id,$supplier$=custom_supplier,$cargo$=custom_cargo,$recipient$=custom_recipient,$total_steps$=custom_total_steps,$fiishing_steps$=custom_finishing_steps,$status$=custom_status,$supply$=custom_supply\")\r\n        }\r\n    }\r\n}\r\n\r\n\r\nDBFind(supplychains_steps, src_steps2).Custom(custom_id){\r\n\tDBFind(supplychains_supply, src_supply_cargo_id2).Columns(cargo_id).Where(\"id=#supply_id#\").Limit(1).Vars(\"steps2\")\r\n\tSetVar(cargo_id, #steps2_cargo_id#)\r\n\tDiv(text-center h4){\r\n\t\t#steps2_cargo_id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_name){\r\n\tDBFind(supplychains_cargo, src_cargo_name2).Columns(name).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tDiv(h4){\r\n\t\t#steps2_name#\r\n\t}\r\n}.Custom(custom_cargo_type){\r\n\tDBFind(supplychains_cargo, src_cargo_type2).Columns(type).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tDiv(text-center h4){\r\n\t\tEcosysParam(cargo_type, #steps2_type#)\r\n\t}\r\n}.Custom(custom_weight){\r\n\tDBFind(supplychains_cargo, src_cargo_type2).Columns(weight).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tDiv(text-center h4){\r\n\t\t#steps2_weight#\r\n\t}\r\n}.Custom(custom_qr){\r\n\tDBFind(supplychains_cargo, src_cargo_qr2).Columns(qr_code).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tSetVar(image, #steps2_qr_code#)\r\n\t\r\n\tDiv(text-center h4){\r\n\t\tIf(GetVar(image)!==\"\"){\r\n\t\t\tImage(Src: #image#, Alt: Image, Class: img-thumbnail w-50 h-50)\r\n\t\t}\r\n\t}\r\n}.Custom(custom_supply){\r\n\tDiv(text-center h4){\r\n\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#cargo_id#\")\r\n\t}.Style(width: 100;)\r\n}.Where(\"receiver_id=#m_id# and receiver_type=3 and receiver_signature=0 and holder_signature <> 0 and (#ppp#)\").Order(id)\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Cargos)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_supply, Columns: \"$id$=custom_id,$name$=custom_name,$cargo_type$=cargo_type,$weight$=weight,$qr_code$=custom_qr,$supply$=custom_supply)\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_transportView",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "DBFind(supplychains_transport, src_transport).Columns(name).Where(\"id=#m_id#\").Limit(1).Vars(\"m\")\r\nSetTitle($transport_company_details$: #m_name#)\r\nDiv(breadcrumb){\r\n\tLinkPage($transport_companies$, supplychains_transport)\r\n\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\tSpan(Class: text-muted, Body: #m_name#)\r\n}\r\n\r\nSetVar(ppp, \"(supply_id=0)\")\r\n\r\nDBFind(supplychains_supply, src_ids).Columns(\"id\").Where(\"delete=0 and status>2\")\r\n\r\nForList(src_ids){\r\n\tSetVar(ppp = \"#ppp# or (supply_id=#id#)\")\r\n}\r\n\r\nDBFind(supplychains_steps, src_steps).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#supply_id#\r\n\t}.Style(width: 60px;)\r\n}.Custom(custom_supplier){\r\n\tDBFind(supplychains_supply, src_supply_supplier).Columns(supplier_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#supplier_name#\r\n\t}\r\n}.Custom(custom_cargo){\r\n\tDBFind(supplychains_supply, src_supply_cargo).Columns(cargo_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#cargo_name#\r\n\t}\r\n}.Custom(custom_recipient){\r\n\tDBFind(supplychains_supply, src_supply_recipient).Columns(recipient_name).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4){\r\n\t\t#recipient_name#\r\n\t}\r\n}.Custom(custom_total_steps){\r\n\tDBFind(supplychains_supply, src_supply_steps).Columns(total_steps).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#total_steps#\r\n\t}\r\n}.Custom(custom_finishing_steps){\r\n\tDBFind(supplychains_supply, src_supply_step).Columns(step).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(text-center h4){\r\n\t\t#step#\r\n\t}\r\n}.Custom(custom_status){\r\n\tDBFind(supplychains_supply, src_supply_status).Columns(status).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tDiv(h4 text-center){\r\n\t\tEcosysParam(supply_status, #status#)\r\n\t}\r\n}.Custom(custom_supply){\r\n\tDBFind(supplychains_supply, src_supply_cargo_id).Columns(cargo_id).Where(\"id=#supply_id#\").Limit(1).Vars(\"\")\r\n\tSetVar(isCargoID, #cargo_id#) \r\n\tDiv(text-center h4){\r\n\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#isCargoID#\")\r\n\t}\r\n}.Where(\"receiver_id=#m_id# and receiver_type=2 and (#ppp#)\").Order(\"id\")\r\n\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Supply Chains)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_supply, Columns: \"$id$=custom_id,$supplier$=custom_supplier,$cargo$=custom_cargo,$recipient$=custom_recipient,$total_steps$=custom_total_steps,$fiishing_steps$=custom_finishing_steps,$status$=custom_status,$supply$=custom_supply\")\r\n        } \r\n    }\r\n}\r\n\r\nDBFind(supplychains_cargo, src_cargo).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#id#\r\n\t}.Style(width: 60px;)\r\n}.Custom(custom_name){\r\n\tDiv(h4 text-bold){\r\n\t\t#name#\r\n\t}\r\n}.Custom(custom_cargo_type){ \r\n\tDiv(text-center h4){\r\n\t\t#cargo_type#\r\n\t}\r\n}.Custom(custom_weight){\r\n\tDiv(text-center h4){\r\n\t\t#weight#\r\n\t}\r\n}.Custom(custom_qr_code){\r\n\tDBFind(supplychains_cargo, src_cargo_qr2).Columns(qr_code).Where(\"id=#cargo_id#\").Limit(1).Vars(\"steps2\")\r\n\tSetVar(image, #steps2_qr_code#)\r\n\t\r\n\tDiv(text-center h4){\r\n\t\tIf(GetVar(image)!==\"\"){\r\n\t\t\tImage(Src: #image#, Alt: Image, Class: img-thumbnail w-50 h-50)\r\n\t\t}\r\n\t}\r\n}.Custom(custom_supply){\r\n\tIf(#btn_block#==1){\r\n\t\tDiv(text-center){ \r\n\t\t\tDBFind(supplychains_supply, src_supply2).Columns(id).Where(\"cargo_id=#id# and status>2\").Limit(1).Vars(\"link\")\r\n\t\t\tSetVar(isLink = #link_id#) \r\n\t\t\tIf(#isLink#>0){\r\n\t\t\t\tButton(Page: supplychains_view, Body: View Supply, PageParams: \"cargo=#id#\")\r\n\t\t\t}.Else{\r\n\t\t\t\tDiv(text-center){ \r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply3).Columns(id).Where(\"cargo_id=#id#\").Limit(1).Vars(\"link2\")\r\n\t\t\t\t\tSetVar(isLink2, #link2_id#)\r\n\t\t\t\t\tIf(#isLink2#>0){ \r\n\t\t\t\t\t\tButton(Page: supplychains_plan, Body: Plan Supply, PageParams: \"cargo=#id#\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}.Else{\r\n\t\tButton(Contract: supplychains_addSupply, Body: &nbspAdd Supply&nbsp, Params: \"manufacturer=#m_id#,cargo=#id#\", Class: btn btn-primary, Page: PlanSupplyChain, \"manufacturer:#m_id#,cargo:#id#\").Alert(Do you want add supply?, Yes, No, Em(fa fa-question))\r\n\t}\r\n}.Custom(custom_actions){\r\n\tButton(Page: supplychains_addWarehouse, Body: Em(Class: fa fa-edit), PageParams: \"vID=#id#,m_id=#m_id#,m_name='#m_name#'\")\r\n\tIf(StateVal(is_demo)==1){ \r\n\t\tDiv(text-center){ \r\n\t\t\tButton(Contract: supplychains_delete, Em(Class: fa fa-close), Params: \"table_name='cargo',vID=#id#\", Class: btn btn-danger,Page: supplychains_manufacturers).Alert(Do you want to delete?, Yes, No)\r\n\t\t} \r\n\t}\r\n}\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(list-group-item){\r\n        P(Class: h3 text-center text-bold, Body: Cargos)\r\n    }\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_cargo, \"$id$=custom_id,$name$=custom_name,$cargo_type$=custom_cargo_type,$qr_code$=custom_qr_code,$supply$=custom_supply,$actions$=custom_actions\")\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_view",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper){\r\n    Div( row df f-valign){\r\n    \tDiv( col-md-2 mt-sm text-left)\r\n        Div( col-md-8 mt-sm text-left){ \r\n            Div(md-8 panel panel-default elastic data-sweet-alert){\r\n                Form(){\r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply).Where(\"cargo_id = #cargo#\").Limit(1).Vars(\"supply\")\r\n\r\n\t\t\t\t\tInput(Name: cargo_id, \"form-control hidden m-b disabled=''\",text,text,#cargo#)\r\n\r\n\t\t\t\t\tInput(Name: vOne, Class: \"form-control hidden m-b disabled=''\", Type: text, Value: 1)\r\n\t\t\t\t\tInput(Name: vTwo, Class: \"form-control hidden m-b disabled=''\", Type: text, Value: 2)\r\n                \r\n                    Div(list-group-item){\r\n\r\n                        Div( row df f-valign){\r\n                \t\t\tDiv( col-md-3 mt-xs text-center){\r\n\t\t\t\t\t\t\t\tDBFind(supplychains_cargo, src_cargo).Where(\"id = #supply_cargo_id#\").Vars(\"cargo\")\r\n                \t\t\t    SetVar(image, #cargo_qr_code#) \r\n                \t\t\t    Div(h4 text-center, If(GetVar(image)!==\"\"){ Image(#image#) })\r\n                            }\r\n                \t\t\tDiv( col-md-3 mt-xs text-right){\r\n                                P(h5){ Supplier name: }\r\n\t\t\t\t\t\t\t\tP(h5){ Cargo name: }\r\n                                If(#supply_step#>-2){\r\n\t\t\t\t\t\t\t\t\tP(h5){ Recipient name: }\r\n\t\t\t\t\t\t\t\t\tP(h5){ Date dispatch: }\r\n\t\t\t\t\t\t\t\t\tP(h5){ Date receipt: }\r\n                                }\r\n                            }\r\n                \t\t\tDiv( col-md-6 mt-xs text-left){\r\n\t\t\t\t\t\t\t\tP(h5){ #supply_supplier_name# }\r\n\t\t\t\t\t\t\t\tP(h5){ #supply_cargo_name# }\r\n\t\t\t\t\t\t\t\tP(h5){  #supply_recipient_name# }\r\n\t\t\t\t\t\t\t\tP(h5){  DateTime(#supply_date_dispatch#, DD.MM.YYYY HH:MI) }\r\n\t\t\t\t\t\t\t\tP(h5){  DateTime(#supply_date_receipt#, DD.MM.YYYY HH:MI) }\r\n\t\t\t\t\t\t\t\tP(h5){  #supply_step# / #supply_total_steps# }\r\n                            }\r\n                        }\r\n\r\n                    }                \r\n                    \r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply_id).Columns(id).Where(\"cargo_id = #cargo#\").Limit(1).Vars(\"supply\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tDBFind(supplychains_steps, src_pos).Columns(\"holder_role_id, receiver_role_id, step, id, holder_signature, receiver_signature, receiver_date_signature, holder_date_signature, holder_name, holder_type, receiver_name,receiver_type\").Where(\"supply_id = #supply_id#\").Order(id)\r\n                    \r\n                    ForList(src_pos){\r\n                        Div(list-group-item) {\r\n                        \r\n\t\t\t\t\t\t\tIf(Or(#holder_role_id#>0,#holder_role_id#<0)){\r\n\t\t\t\t\t\t\t\tDBFind(roles_assign, src_hol).Where(\"role_id=#holder_role_id# and delete=0\").Limit(1).Vars(\"hol\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIf(Or(#receiver_role_id#>0,#receiver_role_id#<0)){\r\n\t\t\t\t\t\t\t\tDBFind(roles_assign, rec).Where(\"role_id=#receiver_role_id# and delete=0\").Limit(1).Vars(\"rec\")\r\n\t\t\t\t\t\t\t}\r\n\r\n                            Div( row df f-valign){\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h5, #holder_name#)\r\n\t\t\t\t\t\t\t\t\tIf(Or(#holder_signature#>0,#holder_signature#<0)){\r\n                    \t\t\t        Div(h6 text-success, Successfully signed at DateTime(#holder_date_signature#, DD.MM.YYYY HH:MI))\r\n                    \t\t\t    }\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-right){\r\n                    \t\t\t\r\n                    \t\t\t   If(Or(#hol_member_id#>0,#hol_member_id#<0)){ \r\n\t\t\t\t\t\t\t\t\t\tDBFind(member, src_member_hol).Where(\"member_id = #hol_member_id#\").Limit(1).Vars(\"hld\")\r\n                    \t\t\t        Div(h5 text-bold){\r\n\t\t\t\t\t\t\t\t\t\t\t#hld_member_name# \r\n\t\t\t\t\t\t\t\t\t\t\tImage(If(GetVar(hld_avatar)!==\"\"){ #hld_avatar# }.Else{ \"/static/img/apps/ava.png\"}, Avatar, img-thumbnail img-circle thumb-full h-30 w-30)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                    \t\t\t   }\r\n\r\n                    \t\t\t   Div(h6 text-muted, EcosysParam(supply_type,#holder_type#))\r\n                    \t\t\t   \r\n                                }\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h4 text-normal, Em(Class: fa fa-arrow-right))\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-left){\r\n                    \t\t\t\r\n                    \t\t\t    If(Or(#rec_member_id#>0,#rec_member_id#<0)){\r\n\t\t\t\t\t\t\t\t\t\tDBFind(member, src_member_rec).Where(\"member_id = #rec_member_id#\").Limit(1).Vars(\"rcv\")\r\n                    \t\t\t        Div(h5 text-bold){\r\n\t\t\t\t\t\t\t\t\t\t\tImage(If(GetVar(rcv_avatar)!==\"\"){ #rcv_avatar# }.Else{ \"/static/img/apps/ava.png\" }, Avatar, img-thumbnail img-circle thumb-full h-30 w-30)\r\n\t\t\t\t\t\t\t\t\t\t\t#rcv_member_name# }\r\n                    \t\t\t    }\r\n                    \t\t\t    \r\n                    \t\t\t    Div(h6 text-muted, EcosysParam(supply_type,#receiver_type#))\r\n                    \t\t\t    \r\n                                }\r\n                                \r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h5 , #receiver_name# )\r\n\t\t\t\t\t\t\t\t\tIf(Or(#receiver_signature#>0,#receiver_signature#<0)){\r\n                    \t\t\t        Div(h6 text-success, Successfully signed at DateTime(#receiver_date_signature#, DD.MM.YYYY HH:MI))\r\n                    \t\t\t    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        Div( col-md-2 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_plan",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "Div(content-wrapper){\r\n\tSetTitle($supplychain_plan$)\r\n    Div(breadcrumb){\r\n        LinkPage(Supply Chains, supplychains_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n        Span(Class: text-muted, Body: $supplychain_plan$)\r\n    }\r\n    Div( row df f-valign){\r\n    \tDiv( col-md-2 mt-sm text-left)\r\n        Div( col-md-8 mt-sm text-left){ \r\n            Div(md-8 panel panel-default elastic data-sweet-alert){\r\n                Form(){\r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply).Where(\"cargo_id = #cargo#\").Limit(1).Vars(\"supply\")\r\n\r\n\t\t\t\t\tInput(Name: cargo_id, \"form-control hidden m-b disabled=''\",text,text,#cargo#)\r\n\r\n\t\t\t\t\tInput(Name: vOne, Class: \"form-control hidden m-b disabled=''\", Type: text, Value: 1)\r\n\t\t\t\t\tInput(Name: vTwo, Class: \"form-control hidden m-b disabled=''\", Type: text, Value: 2)\r\n                \r\n                    Div(list-group-item){\r\n\r\n                        Div( row df f-valign){\r\n                \t\t\tDiv( col-md-3 mt-xs text-center){\r\n\t\t\t\t\t\t\t\tDBFind(supplychains_cargo, src_cargo).Where(\"id = #supply_cargo_id#\").Vars(\"cargo\")\r\n                \t\t\t    SetVar(image, #cargo_qr_code#) \r\n                \t\t\t    Div(h4 text-center, If(GetVar(image)!==\"\"){ Image(#image#) })\r\n                            }\r\n                \t\t\tDiv( col-md-3 mt-xs text-right){\r\n                                P(h5){ Supplier name: }\r\n\t\t\t\t\t\t\t\tP(h5){ Cargo name: }\r\n                                If(#supply_step#>-2){\r\n\t\t\t\t\t\t\t\t\tP(h5){ Recipient name: }\r\n\t\t\t\t\t\t\t\t\tP(h5){ Date dispatch: }\r\n\t\t\t\t\t\t\t\t\tP(h5){ Date receipt: }\r\n                                }\r\n                            }\r\n                \t\t\tDiv( col-md-6 mt-xs text-left){\r\n\t\t\t\t\t\t\t\tP(h5){ #supply_supplier_name# }\r\n\t\t\t\t\t\t\t\tP(h5){ #supply_cargo_name# }\r\n                                If(#supply_step#>-2){\r\n                                    P(h5){  #supply_recipient_name# }\r\n                                    P(h5){  DateTime(#supply_date_dispatch#, DD.MM.YYYY HH:MI) }\r\n                                    P(h5){  DateTime(#supply_date_receipt#, DD.MM.YYYY HH:MI) }\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    }                \r\n                    \r\n\t\t\t\t\tDBFind(supplychains_supply, src_supply_id).Columns(id).Where(\"cargo_id = #cargo#\").Limit(1).Vars(\"supply\")\r\n\t\t\t\t\t\r\n\t\t\t\t\tDBFind(supplychains_steps, src_pos).Columns(\"step, id, holder_name, holder_type, receiver_name,receiver_type\").Where(\"supply_id = #supply_id#\")\r\n                    \r\n                    ForList(src_pos){\r\n                        Div(list-group-item) {\r\n                        \r\n\t\t\t\t\t\t\tDBFind(supplychains_steps, src_steps).Where(\"supply_id = #supply_id# and step=#step#\").Limit(1).Vars(\"steps\")\r\n                        \r\n\t\t\t\t\t\t\tIf(Or(#steps_holder_role_id#>0,#steps_holder_role_id#<0)){\r\n\t\t\t\t\t\t\t\tDBFind(roles_assign, src_hol).Where(\"role_id=#steps_holder_role_id# and delete=0\").Limit(1).Vars(\"hol\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIf(Or(#steps_receiver_role_id#>0,#steps_receiver_role_id#<0)){\r\n\t\t\t\t\t\t\t\tDBFind(roles_assign, rec).Where(\"role_id=#steps_receiver_role_id# and delete=0\").Limit(1).Vars(\"rec\")\r\n\t\t\t\t\t\t\t}\r\n\r\n                            Div( row df f-valign){\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h5, #holder_name#)\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-right){\r\n                    \t\t\t\r\n                    \t\t\t   If(Or(#hol_member_id#>0,#hol_member_id#<0)){ \r\n\t\t\t\t\t\t\t\t\t\tDBFind(members, src_members).Where(\"id = #hol_member_id#\").Limit(1).Vars(\"hld\")\r\n                    \t\t\t        Div(h5 text-bold , #hld_name# &nbsp Image(If(GetVar(hld_avatar)!==\"\"){ #hld_avatar# }.Else{ \"/static/img/apps/ava.png\"}, Avatar, img-thumbnail img-circle thumb-full h-30 w-30)  )\r\n                    \t\t\t   }\r\n\r\n                    \t\t\t   Div(h6 text-muted, EcosysParam(supply_type,#holder_type#))\r\n                    \t\t\t   \r\n                                }\r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h4 text-normal, Em(Class: fa fa-arrow-right))\r\n                                }\r\n                    \t\t\tDiv( col-md-3 m-xs text-left){\r\n                    \t\t\t\r\n                    \t\t\t    If(Or(#rec_member_id#>0,#rec_member_id#<0)){\r\n\t\t\t\t\t\t\t\t\t\tDBFind(members, src_members).Where(\"id = #rec_member_id#\").Limit(1).Vars(\"rcv\")\r\n                    \t\t\t        Div(h5 text-bold , Image(If(GetVar(rcv_avatar)!==\"\"){ #rcv_avatar# }.Else{ \"/static/img/apps/ava.png\" }, Avatar, img-thumbnail img-circle thumb-full h-30 w-30), &nbsp #rcv_name# )\r\n                    \t\t\t    }\r\n                    \t\t\t    \r\n                    \t\t\t    Div(h6 text-muted, EcosysParam(supply_type,#receiver_type#))\r\n                    \t\t\t    \r\n                                }\r\n                                \r\n                                Div( col-md-2 m-xs text-center){\r\n                                    Div(h5 , #receiver_name# )\r\n                                }\r\n                            }\r\n                        }\r\n                        \r\n                        SetVar(hol_member_id, 0)\r\n                        SetVar(rec_member_id, 0)\r\n                        \r\n                    }\r\n                    \r\n                    If(#supply_step#==-2){\r\n                        Div(list-group-item){\r\n                            Div( row df f-valign){\r\n                    \t\t\tDiv( col-md-4 mt-sm text-right){\r\n                    \t\t\t    Div(h4 text-normal, \"Recipient:\")\r\n                                }\r\n                    \t\t\tDiv( col-md-8 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tDBFind(supplychains_recipients, src_recipientsList).Columns(name,id).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\tSelect(Source: src_recipientsList, Name: recipient_id, NameColumn: name, ValueColumn: id, Value: 0)\r\n\t\t\t\t\t\t\t\t}\r\n                            }\r\n                            Div( row df f-valign){\r\n                    \t\t\tDiv( col-md-4 mt-sm text-right){\r\n                    \t\t\t    Div(h4 text-normal, \"Date dispatch:\")\r\n                                }\r\n                    \t\t\tDiv( col-md-8 mt-sm text-left){\r\n                    \t\t\t    Input(Name: date_dispatch, Class: form-control, Placeholder: \"\", Type: date, Value: Now(YYYY/MM/DD 00:00))\r\n                                }\r\n                            }\r\n                            Div( row df f-valign){\r\n                    \t\t\tDiv( col-md-4 mt-sm text-right){\r\n                    \t\t\t    Div(h4 text-normal, \"Date receipt:\")\r\n                                }\r\n                    \t\t\tDiv( col-md-8 mt-sm text-left){\r\n                                    Input(Name: date_receipt, Class: form-control, Placeholder: \"\", Type: date, Value: Now(YYYY/MM/DD 00:00, 10 days))\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    If(#supply_step#==-1){\r\n                        Div(list-group-item){\r\n                            Div( row df f-valign){\r\n                    \t\t\tDiv( col-md-4 mt-sm text-right){\r\n                    \t\t\t    Div(h4 text-normal, \"Transport company:\")\r\n                                }\r\n                    \t\t\tDiv( col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tDBFind(supplychains_transport, src_transportList).Columns(name,id).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\tSelect(Source: src_transportList, Name: transport_company_id, NameColumn: name, ValueColumn: id, Value: 0)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    If(And(#supply_step#>-1,#supply_status#==1)){\r\n                        Div(list-group-item){\r\n                            Div( row df f-valign){\r\n                    \t\t\tDiv( col-md-4 mt-sm text-right){\r\n                    \t\t\t    Div(h4 text-normal, \"Transport company:\")\r\n                                }\r\n                    \t\t\tDiv( col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tDBFind(supplychains_transport, src_transportList).Columns(name,id).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\tSelect(Source: src_transportList, Name: transport_company_id, NameColumn: name, ValueColumn: id, Value: 0)\r\n\t\t\t\t\t\t\t\t}\r\n                    \t\t\tDiv( col-md-2 mt-sm text-right){\r\n                    \t\t\t    Button(Contract: supplychains_addStep, Body: Next, Params: \"cargo_id=#cargo_id#,transport_company_id=Val(transport_company_id),warehouse_id=0,param=1\", Page: supplychains_plan, PageParams: \"cargo=#cargo#\", Class: btn btn-primary)\r\n                                }\r\n                            }\r\n                            Div( row df f-valign){\r\n                    \t\t\tDiv( col-md-4 mt-sm text-right){\r\n                    \t\t\t    Div(h4 text-normal, \"Warehouse:\")\r\n                                }\r\n                    \t\t\tDiv( col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tDBFind(supplychains_warehouses, src_warehousesList).Columns(name,id).Where(\"delete=0\")\r\n\t\t\t\t\t\t\t\t\tSelect(Source: src_warehousesList, Name: warehouse_id, NameColumn: name, ValueColumn: id, Value: 0)\r\n\t\t\t\t\t\t\t\t}\r\n                    \t\t\tDiv( col-md-2 mt-sm text-right){\r\n                    \t\t\t    Button(Contract: supplychains_addStep, Body: Next, Params: \"cargo_id=#cargo_id#,transport_company_id=0,warehouse_id=Val(warehouse_id),param=2\", Page: supplychains_plan, PageParams: \"cargo=#cargo#\", Class: btn btn-primary)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\t\t\t\t\t\r\n\t\t\t\t\tDiv(panel-footer){\r\n\t\t\t\t\t\tIf(#supply_step#==-2){\r\n\t\t\t\t\t\t\tDiv(clearfix){\r\n\t\t\t\t\t\t\t\tDiv(pull-right){\r\n\t\t\t\t\t\t\t\t\tButton(Contract: supplychains_supplyAddRecipient, Body: Next, Params: \"cargo_id=#cargo_id#, recipient_id=Val(recipient_id), date_dispatch=Val(date_dispatch), date_receipt=Val(date_receipt)\", Page: supplychains_plan, PageParams: \"cargo=#cargo#\", Class: btn btn-primary)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIf(#supply_step#==-1){\r\n\t\t\t\t\t\t\tDiv( clearfix pull-right){\r\n\t\t\t\t\t\t\t\tButton(Contract: supplychains_supplyAddTransportCompany, Body: Next, Params: \"cargo_id=#cargo_id#, transport_company_id=Val(transport_company_id)\", Page: supplychains_plan, PageParams: \"cargo=#cargo#\", Class: btn btn-primary)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIf(And(#supply_step#>-1,#supply_status#==1)){\r\n\t\t\t\t\t\t\tDiv( clearfix pull-right){\r\n\t\t\t\t\t\t\t\tButton(Contract: supplychains_recipientPoint, Body: Recipient point, Params: \"cargo_id=#cargo_id#\", Page: supplychains_plan, PageParams: \"cargo=#cargo#\", Class: btn btn-primary)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tIf(#supply_status#==2){\r\n\t\t\t\t\t\t\tDiv( clearfix pull-right){\r\n\t\t\t\t\t\t\t\tButton(Class: btn btn-primary, Contract: supplychains_start, Body: Start Supply Chain, Params: \"cargo_id=#cargo_id#\", Page: supplychains_plan, PageParams: \"cargo=#cargo#\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n                }\r\n            }\r\n        }\r\n        Div( col-md-2 mt-sm text-left)\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_warehouses",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "SetTitle($warehouses$)\r\nDiv(breadcrumb){\r\n\tSpan(Class: text-muted, Body: $warehouses$)\r\n}\r\n\r\nDBFind(supplychains_warehouses, src_warehouses).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#id#\r\n\t}\r\n}.Custom(custom_name){\r\n\tDiv(text-bold h4){\r\n\t\tLinkPage(Page: supplychains_warehouseView, Body: #name#, PageParams: \"m_id=#id#,m_name='#name#'\", Class: profile-flag text-blue)\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_map){\r\n\tDiv(text-center h4){\r\n\t\t\r\n\t}Style(width: 200;)\r\n}.Custom(custom_address){\r\n\tDiv(h4){\r\n\t\t#address#\r\n\t}\r\n}.Custom(custom_edit){\r\n\tDiv(h4 text-center){\r\n\t\tButton(Page: supplychains_warehouseView, Body: Em(Class: fa fa-edit), Params: \"vID=#id#\", Class: btn btn-primary)\r\n\t\tIf(StateVal(is_demo)==1){ \r\n\t\t\tDiv(text-center){\r\n\t\t\t\tButton(Contract: supplychains_deleteWarehouse, Body: Em(Class: fa fa-close), Params: \"vID=#id#\",Class: btn btn-danger, Page: supplychains_warehouses).Alert(Do you want to delete?, $yes$, $no$, Em(fa fa-close))\r\n\t\t\t}\r\n\t\t}\r\n\t}.Style(80)\r\n}.Where(\"delete=0\").Order(\"id\")\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_warehouses, Columns: \"$id$=custom_id,$name$=custom_name,$map$=custom_map,$address$=custom_address,$edit$=custom_edit\")\r\n        }\r\n    }\r\n    Div(panel-footer){\r\n        Div(clearfix){\r\n            Div(pull-right){\r\n                Button(Page: supplychains_addWarehouse, Body: Add, Class: btn btn-primary)\r\n            }\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_transport",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "SetTitle($transport_companies$)\r\nDiv(breadcrumb){\r\n\tSpan(Class: text-muted, Body: $transport_companies$)\r\n}\r\n\r\nDBFind(supplychains_transport, src_transport).Custom(custom_id){\r\n\tDiv(h4 text-center){\r\n\t\t#id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_name){\r\n\tDiv(h4 text-bold){\r\n\t\tLinkPage(Page: supplychains_transportView, Body: #name#, PageParams: \"m_id=#id#,m_name='#name#'\", Class: profile-flag text-blue)\r\n\t}\r\n}.Custom(custom_type){\r\n\tDiv(h4 text-center){\r\n\t\tEcosysParam(type_transport_company,#type#)\r\n\t}\r\n}.Custom(custom_edit){\r\n\tDiv(h4 text-center){\r\n\t\tButton(Page: supplychains_addTransport, Body: Em(Class: fa fa-edit), Params: \"vID=#id#\", Class: btn btn-primary)\r\n\t}\r\n\tIf(StateVal(is_demo)==1){ \r\n\t\tDiv(text-center){ \r\n\t\t\tButton(Contract: supplychains_deleteTransport, Body: Em(Class: fa fa-close), Params: \"vID=#id#\",Class: btn btn-danger, Page: supplychains_transport).Alert(Do you want to delete?, $yes$, $no$, Em(fa fa-close))\r\n\t\t}\r\n\t}\r\n}.Where(\"delete=0\").Order(\"id\")\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_transport, Columns: \"$id$=custom_id,$name$=custom_name,$type$=custom_type,$edit$=custom_edit\")\r\n        }\r\n    }\r\n    Div(panel-footer){\r\n        Div(clearfix){\r\n            Div(pull-right){\r\n\t\t\t\tButton(Page: supplychains_addTransport, Body: Add, Class: btn btn-primary)\r\n            }\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_recipients",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "SetTitle($recipient_companies$)\r\nDiv(breadcrumb){\r\n\tSpan(Class: text-muted, Body: $recipient_companies$)\r\n}\r\n\r\n\r\nDBFind(supplychains_recipients, src_recipirents).Custom(custom_id){\r\n\tDiv(h4 text-center){\r\n\t\t#id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_name){\r\n\tDiv(h4 text-bold){\r\n\t\tLinkPage(Page: supplychains_recipientView, Body: #name#, PageParams: \"m_id=#id#,m_name='#name#'\", Class: profile-flag text-blue)\r\n\t}\r\n}.Custom(custom_map){\r\n\tDiv(h4 text-center){\r\n\t\t\r\n\t}.Style(width: 200;)\r\n}.Custom(custom_address){\r\n\tDiv(h4){\r\n\t\t#address#\r\n\t}\r\n}.Custom(custom_edit){\r\n\tDiv(h4 text-center){\r\n\t\tButton(Page: supplychains_addRecipient, Body: Em(Class: fa fa-edit), Params: \"vID=#id#\", Class: btn btn-primary)\r\n\t}\r\n\tIf(StateVal(is_demo)==1){ \r\n\t\tDiv(text-center){ \r\n\t\t\tButton(Contract: supplychains_deleteRecipient, Body: Em(Class: fa fa-close), Params: \"vID=#id#\",Class: btn btn-danger, Page: supplychains_recipients).Alert(Do you want to delete?, $yes$, $no$, Em(Class: fa fa-close))\r\n\t\t}\r\n\t}\r\n}.Where(\"delete=0\").Order(\"id\")\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n\t\t\tTable(Source: src_recipirents, Columns: \"$id$=custom_id,$name$=custom_name,$map$=custom_map,$address$=custom_address,$edit$=custom_edit\")\r\n        }\r\n    }\r\n    Div(panel-footer){\r\n        Div(clearfix){\r\n            Div(pull-right){\r\n                Button(Page: supplychains_addRecipient, Body: Add, Class: btn btn-primary)\r\n            }\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_manufacturers",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "SetTitle($manufacturers$)\r\nDiv(breadcrumb){\r\n\tSpan(Class: text-muted, Body: $manufacturers$)\r\n}\r\n\r\n\r\nDBFind(supplychains_manufacturers, src_manufacturers).Custom(custom_id){\r\n\tDiv(h4 text-center){\r\n\t\t#id#\r\n\t}.Style(width: 60;)\r\n}.Custom(custom_name){\r\n\tDiv(h4 text-bold){\r\n\t\tLinkPage(Page: supplychains_manufacturerView, Body: #name#, PageParams: \"m_id=#id#,m_name='#name#'\", Class: profile-flag text-blue)\r\n\t}\r\n}.Custom(supplier_type){\r\n\tDiv(h4){\r\n\t\tEcosysParam(supplier_type, #supplier_type#)\r\n\t}\r\n}.Custom(custom_map){\r\n\tDiv(h4 text-center){\r\n\t\t\r\n\t}.Style(width: 200;)\r\n}.Custom(custom_address){\r\n\tDiv(h4){\r\n\t\t#address#\r\n\t}\r\n}.Custom(custom_edit){\r\n\tDiv(h4 text-center){\r\n\t\tButton(Page: supplychains_addManufacturer, Body: Em(Class:fa fa-edit), PageParams: \"vID=#id#\", Class: btn btn-primary )\r\n\t}\r\n\tIf(StateVal(is_demo)==1){ \r\n\t\tDiv(text-center){ \r\n\t\t\tButton(Contract: supplychains_deleteManufacturer, Body: Em(Class:fa fa-close),Params: \"vID=#id#\",Class: btn btn-danger, Page: supplychains_manufacturers).Alert(Do you want to delete?, $yes$, $no$, Em(Class: fa fa-close))\r\n\t\t}\r\n\t}\r\n}.Where(\"delete=0\").Order(\"id\")\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            Table(Source: src_manufacturers, Columns: \"$id$=custom_id,$name$=custom_name,$supplier_type$=supplier_type,$map$=custom_map,$address$=custom_address,$edit$=custom_edit\")\r\n        }\r\n    }\r\n    Div(panel-footer){\r\n        Div(clearfix){\r\n            Div(pull-right){\r\n                Button(Page: supplychains_addManufacturer, Body: Add, Class: btn btn-primary)\r\n            }\r\n        }\r\n    }\r\n}"
        },
        {
            "Name": "supplychains_list",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "supplychains_menu",
            "Value": "SetTitle(Supply Chains)\r\nDiv(breadcrumb){\r\n    Span(Class: text-muted, Body: Supply Chains)\r\n}\r\n\r\nDBFind(supplychains_supply, src_supply).Custom(custom_id){\r\n\tDiv(text-center h4){\r\n\t\t#id#\r\n\t}\r\n}.Custom(custom_supplier){\r\n\tDiv(text-left h4){\r\n\t\t#supplier_name#\r\n\t}\r\n}.Custom(custom_cargo){\r\n\tDiv(text-left h4){\r\n\t\t#cargo_name#\r\n\t}\r\n}.Custom(custom_recipient){\r\n\tDiv(text-left h4){\r\n\t\t#recipient_name#\r\n\t}\r\n}.Custom(custom_total_steps){\r\n\tDiv(text-center h4){\r\n\t\t#total_steps#\r\n\t}\r\n}.Custom(custom_finishing_steps){\r\n\tDiv(text-center h4){\r\n\t\tIf(#status#>=3){ \r\n\t\t\t#step#\r\n\t\t}\r\n\t}\r\n}.Custom(custom_status){\r\n\tDiv(text-center h4){\r\n\t\tEcosysParam(supply_status, #status#)\r\n\t}\r\n}.Custom(custom_supply_chain){\r\n\tDiv(text-center h4){\r\n\t\tIf(#status#<2){ \r\n\t\t\tButton(Page: supplychains_plan, Body: Plan Supply Chain, PageParams: \"cargo=#cargo_id#\", Class: btn btn-primary)\r\n\t\t}\r\n\t}\r\n\t\r\n\tDiv(text-center h4){\r\n\t\tIf(#status#==2){ \r\n\t\t\tButton(Page: supplychains_plan, Body: Start Supply Chain, PageParams: \"cargo=#cargo_id#\", Class: btn btn-primary)\r\n\t\t}\r\n\t}\r\n\t\r\n\tDiv(text-center h4){\r\n\t\tIf(#status#>=3){ \r\n\t\t\tButton(Page: supplychains_view, Body: Supply Chain, PageParams: \"cargo=#cargo_id#\", Class: btn btn-primary)\r\n\t\t}\r\n\t}\r\n}.Custom(custom_delete){\r\n\tDiv(text-center h4){\r\n\t\tButton(Contracts: supplychains_delete, Bode: Em(fa fa-close), Params: \"vID=#id#\", Class: btn btn-danger,template, Page: supplychains_list)\r\n\t}\r\n}\r\n\r\nDiv(md-12 panel panel-default data-sweet-alert){\r\n    Div(panel-body){\r\n        Div(table-responsive){\r\n            If(StateVal(is_demo)==1){\r\n\t\t\t\tTable(Source: src_supply, Columns: \"$id$=columns_id,$manufacturer$=custom_supplier,$cargo$=custom_cargo,$recipient$=custom_supplier,$total_steps$=custom_total_steps,$finished_steps$=custom_finishing_steps,$status$=custom_status,$supply_chain$=custom_supply_chain,$delete$=custom_delete\")\r\n\t\t\t}.Else{\r\n\t\t\t\tTable(Source: src_supply, Columns: \"$id$=columns_id,$manufacturer$=custom_supplier,$cargo$=custom_cargo,$recipient$=custom_supplier,$total_steps$=custom_total_steps,$finished_steps$=custom_finishing_steps,$status$=custom_status,$supply_chain$=custom_supply_chain\")\r\n\t\t\t}\r\n        }\r\n    }\r\n    Div(panel-footer){\r\n        Div(clearfix){\r\n            Div(pull-right){\r\n                Button(Page: supplychains_createStep1, Body: Create Supply Chain, Class: btn btn-primary)\r\n            }\r\n        }\r\n    }\r\n}"
        }
    ],
    "blocks": [],
    "menus": [
        {
            "Name": "supplychains_menu",
            "Conditions": "ContractAccess(\"@1EditMenu\")",
            "Value": "MenuItem(Supply Chains,supplychains_list,, \"fa pull-left icon-link\")\r\nMenuItem($manufacturers$,supplychains_manufacturers,, \"fa pull-left icon-share-alt\")\r\nMenuItem($transport_companies$,supplychains_transport,, \"fa pull-left icon-anchor\")\r\nMenuItem($warehouses$,supplychains_warehouses,, \"fa pull-left icon-layers\")\r\nMenuItem($recipient_companies$,supplychains_recipients,, \"fa pull-left icon-basket-loaded\")"
        }
    ],
    "parameters": [
        {
            "Name": "supplier_type",
            "Value": "machine building, armaments, textiles and apparel, petroleum, chemicals, consumer products, food processing, transportation equipment, telecommunications equipment",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_company_type",
            "Value": "manufacturer, stock, transport_company, company_consumer",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_status",
            "Value": "Planning, Expectation, In transit, Finished",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supply_type",
            "Value": "manufacturer,transport company,warehouse,recipient",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "type_transport_company",
            "Value": "Air,Rail,Road,Water",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "cargo_type",
            "Value": "Container cargo, Liquid bulk, Dry bulk, Breakbulk, Ro-ro",
            "Conditions": "ContractAccess(\"@1EditPage\")"
        }
    ],
    "languages": [
        {
            "Name": "supply_chain",
            "Trans": "{\"ru\":\"Supply Chain\",\"en\":\"Supply Chain\"}",
            "Conditions": ""
        },
        {
            "Name": "finished_steps",
            "Trans": "{\"ru\":\"Завершено шагов\",\"en\":\"Finished steps\"}",
            "Conditions": ""
        },
        {
            "Name": "total_steps",
            "Trans": "{\"ru\":\"Всего шагов\",\"en\":\"Total steps\"}",
            "Conditions": ""
        },
        {
            "Name": "cargo",
            "Trans": "{\"ru\":\"Груз\",\"en\":\"Cargo\"}",
            "Conditions": ""
        },
        {
            "Name": "supplychain_plan",
            "Trans": "{\"ru\":\"Планирование Supply Chain\",\"en\":\"Plan Supply Chain\"}",
            "Conditions": ""
        },
        {
            "Name": "transport_company_details",
            "Trans": "{\"ru\":\"Информация о транспортной компании\",\"en\":\"Transport company details\"}",
            "Conditions": ""
        },
        {
            "Name": "warehouse_details",
            "Trans": "{\"ru\":\"Информация о складе\",\"en\":\"Warehouse details\"}",
            "Conditions": ""
        },
        {
            "Name": "recipient_company_details",
            "Trans": "{\"ru\":\"Информация о компании-получателе\",\"en\":\"Recipient company details\"}",
            "Conditions": ""
        },
        {
            "Name": "manufacturer_details",
            "Trans": "{\"ru\":\"Информация о поставщике\",\"en\":\"Manufacturer details\"}",
            "Conditions": ""
        },
        {
            "Name": "create_manufacturer",
            "Trans": "{\"ru\":\"Добавить поставщика\",\"en\":\"Add manufacturer\"}",
            "Conditions": ""
        },
        {
            "Name": "create_warehouse",
            "Trans": "{\"ru\":\"Добавить склад\",\"en\":\"Add warehouse\"}",
            "Conditions": ""
        },
        {
            "Name": "create_transport_company",
            "Trans": "{\"ru\":\"Добавить транспортную компанию\",\"en\":\"Add transport company\"}",
            "Conditions": ""
        },
        {
            "Name": "create_recipient_company",
            "Trans": "{\"ru\":\"Добавить компанию-получателя\",\"en\":\"Add recipient company\"}",
            "Conditions": ""
        },
        {
            "Name": "recipient_companies",
            "Trans": "{\"ru\":\"Компании получатели\",\"en\":\"Recipient companies\"}",
            "Conditions": ""
        },
        {
            "Name": "create_supply_chain",
            "Trans": "{\"ru\":\"Создать Supply Chain\",\"en\":\"Create Supply Chain\"}",
            "Conditions": ""
        },
        {
            "Name": "transport_companies",
            "Trans": "{\"ru\":\"Транспортные компании\",\"en\":\"Transport companies\"}",
            "Conditions": ""
        },
        {
            "Name": "warehouses",
            "Trans": "{\"ru\":\"Склады\",\"en\":\"Warehouses\"}",
            "Conditions": ""
        },
        {
            "Name": "add_cargo",
            "Trans": "{\"ru\":\"Добавить груз\",\"en\":\"Add cargo\"}",
            "Conditions": ""
        },
        {
            "Name": "area",
            "Trans": "{\"ru\":\"Площадь\",\"en\":\"Area\"}",
            "Conditions": ""
        },
        {
            "Name": "supply",
            "Trans": "{\"ru\":\"Поставка\",\"en\":\"Supply\"}",
            "Conditions": ""
        },
        {
            "Name": "qr_code",
            "Trans": "{\"ru\":\"QR код\",\"en\":\"QR code\"}",
            "Conditions": ""
        },
        {
            "Name": "weight",
            "Trans": "{\"ru\":\"Вес\",\"en\":\"Weight\"}",
            "Conditions": ""
        },
        {
            "Name": "cargo_type",
            "Trans": "{\"en\":\"Cargo type\",\"ru\":\"Тип груза\"}",
            "Conditions": ""
        },
        {
            "Name": "edit",
            "Trans": "{\"ru\":\"Редактировать\",\"en\":\"Edit\"}",
            "Conditions": ""
        },
        {
            "Name": "address",
            "Trans": "{\"ru\":\"Адрес\",\"en\":\"Address\"}",
            "Conditions": ""
        },
        {
            "Name": "map",
            "Trans": "{\"ru\":\"Карта\",\"en\":\"Map\"}",
            "Conditions": ""
        },
        {
            "Name": "manufacturers",
            "Trans": "{\"en\":\"Supplier Companies\",\"ru\":\"Компании поставщики\"}",
            "Conditions": ""
        },
        {
            "Name": "manufacturer",
            "Trans": "{\"ru\":\"Поставщик\",\"en\":\"Supplier\"}",
            "Conditions": ""
        },
        {
            "Name": "supplier_type",
            "Trans": "{\"ru\":\"Индустрия\",\"en\":\"Industry\"}",
            "Conditions": ""
        }
    ],
    "contracts": [
		{
            "Name": "supplychains_sendNotification",
            "Value": "contract supplychains_sendNotification \n{\n    \n    data \n    {\n        supply_id int   \n    }\n\n    conditions \n    {\n\n    }\n\n    action \n    {\n        \n\t\tvar supplies array\n\t\tsupplies = DBFind(\"supplychains_supply\").Columns(\"step, total_steps, cargo_id\").Where(\"id = ?\", $supply_id)\n\t\t\n\t\tvar supply map\n\t\tsupply = supplies[0]\n\t\t\n\t\tvar step int\n        step = supply[\"step\"]\n\t\t\n\t\tvar total_steps int\n        total_steps = supply[\"total_steps\"]\n        \n        if (step < total_steps)\n        {\n\t\t\tvar cargo_id int\n            cargo_id =  supply[\"cargo_id\"]\n            \n\t\t\tvar supply_steps array\n\t\t\tsupply_steps = DBFind(\"supplychains_steps\").Columns(\"receiver_role_id, holder_role_id\").Where(\"supply_id=? and step=\" + Str(step), $supply_id)\n\n\t\t\tvar supply_step map\n\t\t\tsupply_step = supply_steps[0]\n\t\t\t\n\t\t\tvar receiver_role_id int\n            receiver_role_id = supply_step[\"receiver_role_id\"]\n\t\t\t\n\t\t\tvar holder_role_id int\n            holder_role_id = supply_step[\"holder_role_id\"]\n            \n\t\t\tvar receiver_roles array\n\t\t\treceiver_roles = DBFind(\"roles_assign\").Columns(\"member_id\").Where(\"role_id=? and delete=0\", receiver_role_id)\n\t\t\t\n\t\t\tvar receiver_role map\n\t\t\treceiver_role = receiver_roles[0]\n\t\t\t\n\t\t\tvar receiver_member int\n            receiver_member = receiver_role[\"member_id\"]\n\n\t\t\tvar holder_roles array\n\t\t\tholder_roles = DBFind(\"roles_assign\").Columns(\"member_id\").Where(\"role_id=? and delete=0\", holder_role_id)\n\n\t\t\tvar holder_role map\n\t\t\tholder_role = holder_roles[0]\n\t\t\t\n\t\t\tvar holder_member int\n            holder_member = holder_role[\"member_id\"]\n            \n            Notifications_Single_Send(\"icon_name,text_header,text_body,page_name,val_int,val_str,member_id\", 7, \"Supply Chain\", \"Requires your signature\", \"supplychains_sign\", cargo_id, \"\", receiver_member)\n            \n            Notifications_Single_Send(\"icon_name,text_header,text_body,page_name,val_int,val_str,member_id\", 7, \"Supply Chain\", \"Requires your signature\", \"supplychains_sign\", cargo_id, \"\", holder_member)\n\t\t} \n    }\n    \n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_recipientPoint",
            "Value": "contract supplychains_recipientPoint\n{\n    data \n    {\n        cargo_id int\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n        var supplies array\n\t\tsupplies = DBFind(\"supplychains_supply\").Columns(\"id, step, recipient_id, recipient_name, recipient_role_id\").Where(\"cargo_id = ?\", $cargo_id)\n\t\t\n\t\tvar supply map\n\t\tsupply = supplies[0]\n\t\t\n\t\tvar supply_id int\n        supply_id = supply[\"id\"]\n\t\t\n\t\tvar step int\n        step = supply[\"step\"]\n        step = step + 1\n\t\t\n        DBUpdateExt(\"supplychains_supply\", \"id\", supply_id, \"total_steps, status, step\", step+1, 2, 0)\n        \n        var supply_steps array\n\t\tsupply_steps = DBFind(\"supplychains_steps\").Columns(\"id\").Where(\"supply_id=? and step=\" + Str(step), supply_id)\n\n\t\tvar supply_step map\n\t\tsupply_step = supply_steps[0]\n\t\t\n\t\tvar supply_step_id int\n\t\tsupply_step_id = supply_step[\"id\"]\n        \n\t\tvar recipient_id array\n\t\trecipient_id = supply[\"recipient_id\"]\n\n        var recipient_name string\n        recipient_name = supply[\"recipient_name\"]\n        \n        var recipient_role_id int\n        recipient_role_id = supply[\"recipient_role_id\"]\n\n        DBUpdateExt(\"supplychains_steps\", \"id\", supply_step_id, \"receiver_id,receiver_name,receiver_role_id,receiver_type\", recipient_id, recipient_name, recipient_role_id, 4)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addStep",
            "Value": "contract supplychains_addStep\n{\n    data \n    {\n        cargo_id int\n        transport_company_id int\n        warehouse_id int\n        \n        param int\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n\t\tvar supplies array\n\t\tsupplies = DBFind(\"supplychains_supply\").Columns(\"id, step\").Where(\"cargo_id = ?\", $cargo_id)\n\t\t\n\t\tvar supply map\n\t\tsupply = supplies[0]\n\t\t\n\t\tvar supply_id int\n        supply_id = supply[\"id\"]\n        \n\t\tvar step int\n        step = supply[\"step\"]\n        step = step + 1\n        \n\t\tDBUpdateExt(\"supplychains_supply\", \"id\", supply_id, \"step\", step)\n\n\t\tvar supply_steps array\n\t\tsupply_steps = DBFind(\"supplychains_steps\").Columns(\"id\").Where(\"supply_id=? and step=\" + Str(step), supply_id)\n\n\t\tvar supply_step map\n\t\tsupply_step = supply_steps[0]\n\t\t\n\t\tvar supply_step_id int\n\t\tsupply_step_id = supply_step[\"id\"]\n        \n\t\tvar var_id int\n\t\tvar_id = 0\n\t\t\n\t\tvar var_name string\n\t\tvar_name = \"\"\n\t\t\n\t\tvar var_role_id int\n\t\tvar_role_id = 0\n\t\t\n\t\tvar var_type int\n\t\tvar_type = 0\n        \n        if ($param==1)\n        {\n\t\t\tvar transport_companies array\n\t\t\ttransport_companies = DBFind(\"supplychains_transport\").Columns(\"name, role_id\").Where(\"id = ?\", $transport_company_id)\n\t\t\t\n\t\t\tvar transport_company map\n\t\t\ttransport_company = transport_companies[0]\n\t\t\n            var_id = $transport_company_id\n            var_name = transport_company[\"name\"]\n            var_role_id = transport_company[\"role_id\"]\n            var_type = 2\n        }\n        else\n        {\n\t\t\tvar warehouses array\n\t\t\twarehouses = DBFind(\"supplychains_warehouses\").Columns(\"name, role_id\").Where(\"id = ?\", $warehouse_id)\n\t\t\t\n\t\t\tvar warehouse map\n\t\t\twarehouse = warehouses[0]\n\t\t\n            var_id = $warehouse_id\n            var_name = warehouse[\"name\"]\n            var_role_id = warehouse[\"role_id\"]\n            var_type = 3\n        }\n\n        DBUpdateExt(\"supplychains_steps\", \"id\", supply_step_id, \"receiver_id,receiver_name,receiver_role_id,receiver_type\", var_id,var_name, var_role_id, var_type)\n\n        step = step + 1\n        DBInsert(\"supplychains_steps\", \"supply_id, holder_id, holder_name, holder_type, holder_role_id, step\", supply_id, var_id, var_name, var_type, var_role_id, step)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_supplyAddTransportCompany",
            "Value": "contract supplychains_supplyAddTransportCompany\n{\n    data \n    {\n        cargo_id int\n        transport_company_id int\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n\t\tvar supplies array\n\t\tsupplies = DBFind(\"supplychains_supply\").Columns(\"id\").Where(\"cargo_id = ?\", $cargo_id)\n\t\t\n\t\tvar supply map\n\t\tsupply = supplies[0]\n\t\t\n\t\tvar supply_id int\n\t\tsupply_id = supply[\"id\"]\n\t\t\n        DBUpdateExt(\"supplychains_supply\", \"id\", supply_id, \"step\", 0)\n\t\t\n\t\tvar supply_steps array\n\t\tsupply_steps = DBFind(\"supplychains_steps\").Columns(\"id\").Where(\"supply_id=? and step=-1\", supply_id)\n\t\t\n\t\tvar supply_step map\n\t\tsupply_step = supply_steps[0]\n\t\t\n\t\tvar supply_step_id int\n\t\tsupply_step_id = supply_step[\"id\"]\n        \n\t\t\n\t\tvar transport_companies array\n\t\ttransport_companies = DBFind(\"supplychains_transport\").Columns(\"name, role_id\").Where(\"id = ?\", $transport_company_id)\n\t\t\n\t\tvar transport_company map\n\t\ttransport_company = transport_companies[0]\n\t\t\n\t\tvar transport_company_name string\n\t\ttransport_company_name  = transport_company[\"name\"]\n\t\t\n\t\tvar transport_company_role_id int\n\t\ttransport_company_role_id = transport_company[\"role_id\"]\n\t\t\n        DBUpdateExt(\"supplychains_steps\", \"id\", supply_step_id, \"step,receiver_id,receiver_name,receiver_role_id,receiver_type\", 0, $transport_company_id,transport_company_name,transport_company_role_id, 2)\n\n\n        DBInsert(\"supplychains_steps\", \"supply_id, holder_id, holder_name, holder_type, holder_role_id, step\", supply_id, $transport_company_id, transport_company_name, 2, transport_company_role_id, 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "add_qr_code",
            "Value": "contract add_qr_code \n{\n    data \n    {\n        qr_code string \"image\"\n    }\n\n    conditions \n    {\n\n    }\n\n    action \n    {\n        DBInsert(\"supplychains_qr\", \"qr_code, counter\", $qr_code, 0)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addCargo",
            "Value": "contract supplychains_addCargo{\n\tdata \n\t{\n\t    vID int\n\t    m_id int\n\t    name string\n\t    cargo_type int\n\t\tweight int\n\t}\n\n\tconditions \n\t{\n\t}\n\t\n\taction \n\t{\n\t    if ($vID == 0)\n\t    {\n   \t\t    var ret array      \n    \t\tvar row map        \n\t\t\t\n\t\t\tret = DBFind(\"supplychains_qr\").Columns(\"id, qr_code, counter\").Where(\"id > ?\", 0).Order(\"counter ASC\").Limit(1)\n    \t\trow = ret[0] \n    \t\t$qr_code_id    =  Int(row[\"id\"])\n    \t\t$qr_code_image =  string(row[\"qr_code\"])\n    \t\t$qr_code_cnte  =  Int(row[\"counter\"])\n\t        \n\t    \tDBInsert(\"supplychains_cargo\", \"name,cargo_type,weight,delete,manufacturer_id,btn_block,qr_code\", $name, $cargo_type, $weight, 0, $m_id,0,$qr_code_image )\n\t    \t\n\t    \t$qr_code_cnte = $qr_code_cnte + 1\n\t    \tDBUpdate(\"supplychains_qr\",$qr_code_id,\"counter\", $qr_code_cnte)\n\t    }\n\t    else\n\t    {\n\t        DBUpdate(\"supplychains_cargo\",$vID,\"name,cargo_type,weight\", $name, $cargo_type, $weight)\n\t    }\n\t}\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addManufacturer",
            "Value": "contract supplychains_addManufacturer\n{\n\tdata \n\t{\n\t    vID int\n\t    name string\n\t    supplier_type int\n\t\tcoords string \"polymap\"\n\t\tcoords_address string\n\t\tarea int\n\t}\n\t\n\tconditions \n\t{\n\t}\n\t\n\taction \n\t{\n\t    if ($vID == 0)\n\t    {\n\t        var rows array\n\t\t\trows = DBFind(\"member\").Columns(\"member_name\").Where(\"member_id=?\", $key_id)\n\t\t\tvar member map\n\t\t\tmember = rows[0]\n\t        $creator_name = member[\"name\"]\n            $role_id = DBInsert(\"roles_list\", \"role_type,role_name,creator_id,creator_name,timestamp date_create\",1,$name,$key_id,$creator_name,$block_time)\n\t        \n\t\t    DBInsert(\"supplychains_manufacturers\", \"name,supplier_type,coords,address,area,delete,role_id\", $name, $supplier_type, $coords, $coords_address, $area, 0,$role_id)\n\t    }\n\t    else\n\t    {\n\t        DBUpdate(\"supplychains_manufacturers\",$vID,\"name,supplier_type,coords,address,area\", $name, $supplier_type, $coords, $coords_address, $area)   \n\t    }\n\t}\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychain_recipientPoint",
            "Value": "contract supplychain_recipientPoint\n{\n    data \n    {\n        cargo_id int\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n\t\tvar ret array\n\t\tret = DBFind(\"supplychains\").Columns(\"id\").Where(\"cargo_id=?\", $cargo_id)\n\t\tret = ret[0]\n        $supply_id = ret[\"id\"]\n\t\t\n\t\tret = DBFind(\"supplychains\").Columns(\"step\").Where(\"id=?\", $supply_id)\n\t\tret = ret[0]        \n        $step = ret[\"step\"]\n        $step = $step + 1\n        DBUpdate(\"supplychains\", $supply_id, \"total_steps, status, step\", $step+1, 2, 0)\n        \n        ret = DBFind(\"supplychains_steps\").Columns(\"id\").Where(\"supply_id=? and step=?\", $supply_id, $step)\n\t\tret = ret[0] \n        $supply_steps_id = ret[\"id\"]\n        \n\t\tret = DBFind(\"supplychains\").Columns(\"id,recipient_name,recipient_role_id\").Where(\"id=?\", $supply_id)\n\t\tret = ret[0]\n        $recipientid = ret[\"recipient_id\"]\n        $recipient_name = ret[\"recipient_name\"]\n        $recipient_role_id = ret[\"recipient_role_id\"]\n\n        DBUpdate(\"supplychains_steps\", $supply_steps_id, \"receiver_id,receiver_name,receiver_role_id,receiver_type\", $recipientid, $recipient_name, $recipient_role_id, 4)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_delete",
            "Value": "contract supplychains_delete \n{\n    data \n    {\n        table_name string\n        vID int\n    }\n\n    conditions \n    {\n\n    }\n\n    action \n    {\n        DBUpdate($table_name,$vID,\"delete\",1) \n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addWarehouses",
            "Value": "contract supplychains_addWarehouses \n{\n\tdata \n\t{\n\t    vID int\n\t    name string\n\t\tcoords string \"polymap\"\n\t\tcoords_address string\n\t\tarea int\n\t}\n\t\n\tconditions \n\t{\n\t}\n\t\n\taction \n\t{\n\t    if ($vID == 0)\n\t    {\n\t\t\t\n\t        var ret array\n\t\t\tret = DBFind(\"member\").Columns(\"member_name\").Where(\"member_id=?\", $key_id)\n\t\t\tret = ret[0]\n\t        $creator_name = ret[\"name\"]\n            $role_id = DBInsert(\"roles_list\", \"role_type,role_name,creator_id,creator_name,timestamp date_create\",1,$name,$key_id,$creator_name,$block_time)\n            \n\t    \tDBInsert(\"supplychains_warehouses\", \"name,coords,address,area,delete,role_id\", $name, $coords, $coords_address, $area, 0,$role_id)\n\t    }\n\t    else\n\t    {\n\t        DBUpdate(\"supplychains_warehouses\",$vID,\"name,coords,address,area\", $name, $coords, $coords_address, $area)  \n\t    }\n\t}\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addTransport",
            "Value": "contract supplychains_addTransport\n{\n\tdata \n\t{\n\t    vID int\n\t    name string\n\t\ttype_company int\n\t}\n\t\n\tconditions \n\t{\n\t}\n\t\n\taction \n\t{\n\t    if ($vID == 0)\n\t    {\n\t        var ret array\n\t\t\tret = DBFind(\"member\").Columns(\"member_name\").Where(\"member_id=?\", $key_id)\n\t\t\tret = ret[0]\n\t        $creator_name = ret[\"member_name\"]\n            $role_id = DBInsert(\"roles_list\", \"role_type,role_name,creator_id,creator_name,timestamp date_create\",1,$name,$key_id,$creator_name,$block_time)\n            \n\t\t    DBInsert(\"supplychains_transport\", \"name,type,delete,role_id\", $name, $type_company, 0, $role_id)\n\t    }\n\t    else\n\t    {\n\t        DBUpdate(\"supplychains_transport\",$vID,\"name,type\", $name, $type_company)\n\t    }\n\t}\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addSuply",
            "Value": "contract supplychains_addSuply  \n{\n    data \n    {\n        manufacturer int\n        cargo int\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n\t\tvar ret array\n\t\tret = DBFind(\"supplychains_manufacturers\").Columns(\"name\").Where(\"id=?\", $manufacturer)\n\t\tret = ret[0]\n\t\t$creator_name = ret[\"name\"]\n\t\tret = DBFind(\"supplychains_warehouses\").Columns(\"name\").Where(\"id=?\", $cargo)\n\t\tret = ret[0]\n        $cargo_name = ret[\"name\"]\n        \n        DBInsert(\"supplychains\", \"supplier_id,supplier_name,cargo_id,cargo_name,status,step,delete\", $manufacturer, $manufacturer_name, $cargo, $cargo_name, 0, -2, 0)\n        \n        DBUpdate(\"supplychains_warehouses\", $cargo, \"btn_block\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addRecipient",
            "Value": "contract supplychains_addRecipient \n{\n\tdata \n\t{\n\t    vID int\n\t    name string\n\t\tcoords string \"polymap\"\n\t\tcoords_address string\n\t\tarea int\n\t}\n\t\n\tconditions \n\t{\n\t}\n\t\n\taction \n\t{\n\t    if ($vID == 0)\n\t    {\n\t\t\tvar ret array\n\t\t\tret = DBFind(\"member\").Columns(\"member_name\").Where(\"member_id=?\", $key_id)\n\t\t\tret = ret[0]\n\t        $creator_name = ret[\"member_name\"]\n            $role_id = DBInsert(\"roles_list\", \"role_type,role_name,creator_id,creator_name,timestamp date_create\",1,$name,$key_id,$creator_name,$block_time)\n\t\t    DBInsert(\"supplychains_recipients\", \"name,coords,address,area,delete,role_id\", $name, $coords, $coords_address, $area, 0, $role_id)\n\t    }\n\t    else\n\t    {\n\t        DBUpdate(\"supplychains_recipients\",$vID,\"name,coords,address,area\", $name, $coords, $coords_address, $area)  \n\t    }\n\t}\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_start",
            "Value": "contract supplychains_start\n{\n    data \n    {\n        cargo_id int\n    }\n\n    conditions \n    {\n\n    }\n\n    action \n    {\n\t\tvar supplies array\n\t\tsupplies = DBFind(\"supplychains_supply\").Columns(\"id\").Where(\"cargo_id=?\", $cargo_id)\n\n        var supply map\n        supply = supplies[0]\n\n        var supply_id int\n        supply_id = supply[\"id\"]\n\n        DBUpdateExt(\"supplychains_supply\", \"id\", supply_id, \"status\", 3)\n        \n        supplychains_sendNotification(\"supply_id\", supply_id)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_sign",
            "Value": "contract supplychains_sign\n{\n    data \n    {\n        vID int\n        vFlag int\n        \n        photo string \"image\"\n        \n        NotificID int\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n        if ($vFlag == 1)\n        {\n            DBUpdateExt(\"supplychains_steps\", \"id\", $vID, \"holder_signature, timestamp holder_date_signature\", $key_id, $block_time)    \n        }\n        else\n        {\n            DBUpdateExt(\"supplychains_steps\", \"id\", $vID, \"receiver_signature, timestamp receiver_date_signature,photo\", $key_id, $block_time,$photo)   \n        }\n        \n\t\tvar supply_steps array\n\t\tsupply_steps = DBFind(\"supplychains_steps\").Columns(\"holder_signature,receiver_signature,supply_id \").Where(\"id=?\", $vID)\n\n        var supply_step map\n\t\tsupply_step = supply_steps[0]\n        \n        var holder_signature int\n        holder_signature =  supply_step[\"holder_signature\"]\n\n        var receiver_signature int\n        receiver_signature =  supply_step[\"receiver_signature\"]\n        \n\n        if (holder_signature != 0  &&  receiver_signature != 0)\n        {\n            var supply_id int\n            supply_id =  supply_step[\"supply_id\"]\n\n            var supplies array\n\t\t\tsupplies = DBFind(\"supplychains_supply\").Columns(\"step,total_steps\").Where(\"id=?\", supply_id)\n\n            DBInsert(\"debug\", \"data\", \"52\")\n\n            var supply map\n\t\t\tsupply = supplies[0]\n\n            var step int\n            step = supply[\"step\"]\n\n            var total_steps int\n            total_steps = supply[\"total_steps\"]\n            \n            step = step + 1\n            \n            if step >= Int(Str(total_steps)) {\n                DBUpdateExt(\"supplychains_supply\", \"id\", supply_id, \"step,status\", step, 4 )\n            } else {\n                DBUpdateExt(\"supplychains_supply\", \"id\", supply_id, \"step\", step)\n                supplychains_sendNotification(\"supply_id\", supply_id)\n            }\n        }\n        \n        \n        if ($NotificID > 0)\n        {\n            Notifications_Single_Close(\"notific_id\", $NotificID)\n        }\n        \n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_addSupply",
            "Value": "contract supplychains_addSupply  \n{\n    data \n    {\n        manufacturer int\n        cargo int\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n\t\tvar ret array\n\t\tret = DBFind(\"supplychains_manufacturers\").Columns(\"name\").Where(\"id=?\", $manufacturer)\n\t\tret = ret[0]\n\t\t$manufacturer_name = ret[\"name\"]\n\t\tret = DBFind(\"supplychains_cargo\").Columns(\"name\").Where(\"id=?\", $cargo)\n\t\tret = ret[0]\n        $cargo_name = ret[\"name\"]\n\n        \n        \n        DBInsert(\"supplychains_supply\", \"supplier_id,supplier_name,cargo_id,cargo_name,status,step,delete\", $manufacturer, $manufacturer_name, $cargo, $cargo_name, 0, -2, 0)\n        \n        DBUpdate(\"supplychains_cargo\", $cargo, \"btn_block\", 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "supplychains_supplyAddRecipient",
            "Value": "contract supplychains_supplyAddRecipient\n{\n    data \n    {\n        cargo_id int\n        \n        recipient_id int\n        date_dispatch string \"date\"\n        date_receipt string \"date\"\n    }\n\n    conditions \n    {\n    }\n\n    action \n    {\n        var supply_rows array\n        supply_rows = DBFind(\"supplychains_supply\").Columns(\"id, supplier_id, supplier_name\").Where(\"cargo_id=?\", $cargo_id)\n\n        DBInsert(\"debug\", \"data\", \"21\")\n\n        var supply map\n        supply = supply_rows[0]\n\n        var supply_id int\n        supply_id = supply[\"id\"]\n\n        DBInsert(\"debug\", \"data\", \"29\")\n        \n        var recipients_rows array\n        recipients_rows = DBFind(\"supplychains_recipients\").Columns(\"role_id, name\").Where(\"id=?\", $recipient_id)\n        //DBStringWhere(Table(\"company_consumer\"), \"name\",  \"id=?\",  $company_consumer)\n\n        DBInsert(\"debug\", \"data\", \"35\")\n\n        var recipient map\n        recipient = recipients_rows[0]\n\n        var recipient_name string\n        recipient_name = recipient[\"name\"]\n\n        DBInsert(\"debug\", \"data\", \"43\")\n\n        var role_id int\n        role_id =  recipient[\"role_id\"]\n\n        DBInsert(\"debug\", \"data\", \"48\")\n\n        DBInsert(\"debug\", \"data\", Sprintf(\"%v %v %v %v %v %v %v %v\", $recipient_id, recipient_name, role_id, \"timestamp \" + $date_dispatch + \" 00:00:00\", \"timestamp \" + $date_receipt + \" 00:00:00\", -1, 2, $time))\n\n        DBInsert(\"debug\", \"data\", Str(supply_id))\n        DBUpdateExt(\"supplychains_supply\", \"id\", supply_id, \"recipient_id,recipient_name,recipient_role_id,date_dispatch,date_receipt,step,status\", $recipient_id, recipient_name, role_id, \"timestamp \" + $date_dispatch, \"timestamp \" + $date_receipt, -1, 1)\n\t\t\n        DBInsert(\"debug\", \"data\", \"49\")\n\n\t\tvar holder_id int\n        holder_id = supply[\"supplier_id\"]\n\t\t\n\t\tvar holder_name string\n        holder_name = supply[\"supplier_name\"]\n\t\t\n\t\tvar manufacturers array\n\t\tmanufacturers = DBFind(\"supplychains_manufacturers\").Columns(\"role_id\").Where(\"id=?\", holder_id)\n\n        var manufacturer map\n        manufacturer = manufacturers[0]\n\n        DBInsert(\"debug\", \"data\", \"60\")\n\t\t\n\t\tvar manufacturer_role_id int\n\t\tmanufacturer_role_id = manufacturer[\"role_id\"]\n\t\t\n        DBInsert(\"supplychains_steps\", \"supply_id, holder_id, holder_name, holder_type, holder_role_id, step\", supply_id, holder_id, holder_name, 1, manufacturer_role_id, -1)\n\n        DBInsert(\"debug\", \"data\", \"67\")\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "tables": [
        {
            "Name": "supplychains_cargo",
            "Columns": "[{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"weight\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"qr_code\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"btn_block\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"cargo_type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"manufacturer_id\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_manufacturers",
            "Columns": "[{\"name\":\"area\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"coords\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"supplier_type\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_qr",
            "Columns": "[{\"name\":\"counter\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"qr_code\",\"type\":\"bytea\",\"conditions\":\"true\"},{\"name\":\"cargo_id\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_recipients",
            "Columns": "[{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"area\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"coords\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_steps",
            "Columns": "[{\"name\":\"step\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_signature\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"holder_role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"photo\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"receiver_type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_signature\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"holder_type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"holder_signature\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"receiver_date_signature\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"holder_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"supply_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"holder_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"holder_date_signature\",\"type\":\"datetime\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_supply",
            "Columns": "[{\"name\":\"date_dispatch\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"status\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_receipt\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"recipient_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"recipient_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"recipient_role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"step\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"cargo_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"cargo_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"total_steps\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"supplier_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"supplier_name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"date_create\",\"type\":\"datetime\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_transport",
            "Columns": "[{\"name\":\"type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supplychains_warehouses",
            "Columns": "[{\"name\":\"area\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"coords\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ],
    "data": []
}