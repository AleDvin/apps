contract lots_Delete {
    data {
        LotId int
    }

    conditions {
        var lot map
        lot = DBFind("lots").Where("id=?", $LotId).Row()

        if !lot {
            warning "Lot not found"
        }
        if lot["status"] > 0 {
            warning "Bidding has already begun"
        }
    }

    action {
        DBUpdate("lots", $LotId, "deleted", 1)
    }
}