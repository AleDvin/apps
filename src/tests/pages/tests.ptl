SetVar(now, Now("YYYY-MM-DD HH:MI:SS"))
Div(content-wrapper){
    Div(row){
        Div(col-sm-10 col-sm-offset-1 col-lg-8 col-lg-offset-2){
            Form(panel panel-default){
                Div(panel-heading text-right){
                    Button(Body: Run contracts tests, Contract: tests_Run, Class: btn btn-primary, Page: tests, PageParams: "date=#now#", Params: "Date=#now#")
                }
                Div(panel-body){
                    If(GetVar(date)){
                        Div(h3){Contract operation tests, DateTime(#date#)}
                        DBFind(Name: tests, Source: src).Where("date='#date#'").Order("id desc")
                        ForList(src){
                            If(#result#=="fail"){
                                SetVar(hl, text-danger)
                            }.Else{
                                SetVar(hl, text-success)
                            }
                            Div(form-group row #hl#){
                                Div(col-sm-10){#name#}
                                Div(col-sm-2){#result#}
                            }
                        }
                    }
                    Div(h3){Page operation tests, DateTime(#now#)}
                    Div(form-group row){
                        Div(col-sm-2 text-center){details}
                        Div(col-sm-10){
                            Div(col-sm-10 text-center){case}
                            Div(col-sm-2){result}
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            If(){
                                SetVar(t1_fail, text-danger)
                            }.Else{
                                SetVar(t1_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t1_ok# #t1_fail#){
                            Div(col-sm-10){"normal If"}
                            Div(col-sm-2){
                                If(GetVar(t1_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar("Condition1", 1).("Condition2", 0.3)
                            If(And(GetVar("Condition2") == 0.3, And(GetVar("Condition1") == 1, Or(GetVar("Condition2") == 0, GetVar("Condition1") == 0)))){
                                SetVar(t2_fail, text-danger)
                            }.Else{
                                SetVar(t2_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t2_ok# #t2_fail#){
                            Div(col-sm-10){"complex If, And, Or, GetVar with vars"}
                            Div(col-sm-2){
                                If(GetVar(t2_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar("Condition1", 1).("Condition2", 0.3)
                            If(And(0.3 == 0.3, And(1 == 1, Or(0.3 == 0, 1 == 0)))){
                                SetVar(t3_fail, text-danger)
                            }.Else{
                                SetVar(t3_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t3_ok# #t3_fail#){
                            Div(col-sm-10){"complex If, And, Or, GetVar with values"}
                            Div(col-sm-2){
                                If(GetVar(t3_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar("Condition3", 1)
                            If(#Condition3# == 2){
                                1 SetVar(t4_fail, text-danger)
                            }.ElseIf(#Condition3# == 1){
                                SetVar("Condition3", 2)
                                2 SetVar(t4_ok, text-success)
                            }.ElseIf(#Condition3# == 2){
                                3 SetVar(t4_fail, text-danger)
                            }.Else{
                                else SetVar(t4_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t4_ok# #t4_fail#){
                            Div(col-sm-10){"a. reset condition If, ElseIf, Else"}
                            Div(col-sm-2){
                                If(GetVar(t4_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar("Condition4", 1)
                            If(GetVar(Condition4) == 2){
                                1 SetVar(t5_fail, text-danger)
                            }.ElseIf(GetVar(Condition4) == 1){
                                SetVar("Condition4", 2)
                                2 SetVar(t5_ok, text-success)
                            }.ElseIf(GetVar(Condition4) == 2){
                                3 SetVar(t5_fail, text-danger)
                            }.Else{
                                else SetVar(t5_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t5_ok# #t5_fail#){
                            Div(col-sm-10){"b. reset condition If, ElseIf, Else with GetVar"}
                            Div(col-sm-2){
                                If(GetVar(t5_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar(coltype, GetColumnType(members, member_name))
                            SetVar(colnone, GetColumnType(none, none))
                            SetVar(colempty, GetColumnType())
                            If(Or(#coltype#!="varchar",#colnone#>0,#colempty#>0)){
                                SetVar(t6_fail, text-danger)
                            }.Else{
                                SetVar(t6_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t6_ok# #t6_fail#){
                            Div(col-sm-10){"GetColumnType"}
                            Div(col-sm-2){
                                If(GetVar(t6_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            DBFind(parameters, src_par).Columns("id").Order(id).Where("id >= 1 and id <= 3").Count(count)
                            If(#count#==3){
                                SetVar(t7_ok, text-success)
                            }.Else{
                                SetVar(t7_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t7_ok# #t7_fail#){
                            Div(col-sm-10){
Code(
    DBFind.Count
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t7_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar(where)
                            DBFind(contracts, src).Columns(id).Order(id).Limit(3).Custom(a){SetVar(where, #where# #id#)}
                            If(#where#=="1 2 3"){
                                SetVar(t8_ok, text-success)
                            }.Else{
                                SetVar(t8_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t8_ok# #t8_fail#){
                            Div(col-sm-10){
Code(
    DBFind(contracts, src).Columns(id).Order(id).Limit(3).Custom(a){SetVar(where, #where# #id#)}
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t8_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            DBFind(contracts, src).Order(id).Where("id=2").Vars(t9_vars)
                            If(#t9_vars_id#==2){
                                SetVar(t9_ok, text-success)
                            }.Else{
                                SetVar(t9_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t9_ok# #t9_fail#){
                            Div(col-sm-10){
Code(
    DBFind(contracts, src).Order(id).Where("id=2").Vars(t9_vars)
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t9_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            If(#isMobile#==0){
                                Desktop
                                SetVar(t10_ok, text-success)
                            }.Else{
                                If(#isMobile#==1){
                                    Mobile
                                    SetVar(t10_ok, text-success)
                                }.Else{
                                    SetVar(t10_fail, text-danger)
                                }
                            }
                        }
                        Div(col-sm-10 #t10_ok# #t10_fail#){
                            Div(col-sm-10){"isMobile"}
                            Div(col-sm-2){
                                If(GetVar(t10_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            Range(t11_my,0,5)
                            SetVar(t11,"")
                            ForList(t11_my){SetVar(t11,#t11# #t11_my_index#=#id#)}
                            If(#t11#=="1=0 2=1 3=2 4=3 5=4"){
                                SetVar(t11_ok, text-success)
                            }.Else{
                                SetVar(t11_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t11_ok# #t11_fail#){
                            Div(col-sm-10){
Code(
    Range(t11_my,0,5)
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t11_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            Range(t12_none,20,0)
                            SetVar(t12,"")
                            ForList(t12_none){t12,#t12# #none_index#=#id#}
                            If(#t12#==""){
                                SetVar(t12_ok, text-success)
                            }.Else{
                                SetVar(t12_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t12_ok# #t12_fail#){
                            Div(col-sm-10){
Code(
    Range(t12_none,20,0)
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t12_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar(t13,"").(from, 5).(to, -4).(step,-2)
                            Range(Source: neg, From: #from#, To: #to#, Step: #step#)
                            ForList(neg){SetVar(t13,#t13# #neg_index#=#id#)}
                            If(#t13#=="1=5 2=3 3=1 4=-1 5=-3"){
                                SetVar(t13_ok, text-success)
                            }.Else{
                                SetVar(t13_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t13_ok# #t13_fail#){
                            Div(col-sm-10){
Code(
    SetVar(t13,"").(from, 5).(to, -4).(step,-2) Range(Source: neg, From: #from#, To: #to#, Step: #step#)
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t13_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar(t14,"")
                            Range(t14_zero,0,5,0)
                            ForList(t14_zero){SetVar(t14,#t14# #zero_index#=#id#)}
                            If(#t14#==""){
                                SetVar(t14_ok, text-success)
                            }.Else{
                                SetVar(t14_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t14_ok# #t14_fail#){
                            Div(col-sm-10){
Code(
    Range(t14_zero,0,5,0)
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t14_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar(t15,"")
                            JsonToSource(t15_none, ["q","p"])
                            ForList(t15_none){SetVar(t15,#t15# #key#:#value#)}
                            If(#t15#==""){
                                SetVar(t15_ok, text-success)
                            }.Else{
                                SetVar(t15_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t15_ok# #t15_fail#){
                            Div(col-sm-10){
Code(
    JsonToSource(t15_none, ["q","p"])
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t15_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar(t17,"").(t17_obj,{"p1":"v1", "p2":"v2"})
                            JsonToSource(t17_pv, #t17_obj#)
                            ForList(t17_pv){SetVar(t17,#t17# #key#:#value#)}
                            If(#t17#=="p1:v1 p2:v2"){
                                SetVar(t17_ok, text-success)
                            }.Else{
                                SetVar(t17_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t17_ok# #t17_fail#){
                            Div(col-sm-10){
Code(
    SetVar(t17,"").(t17_obj,{"p1":"v1", "p2":"v2"}) JsonToSource(t17_pv, #t17_obj#)
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t17_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-2 text-muted text-center){
                            SetVar(t18,"")
                            JsonToSource(t18_dat, {"param":"va lue", "obj": {"sub":"one"}, "arr":["one"], "empty": null})
                            ForList(t18_dat){SetVar(t18,#t18# #key#:#value#)}
                            If(#t18#=="arr:[one] empty: obj:map[sub:one] param:va lue"){
                                SetVar(t18_ok, text-success)
                            }.Else{
                                SetVar(t18_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t18_ok# #t18_fail#){
                            Div(col-sm-10){
Code(
    JsonToSource(dat, {"param":"va lue", "obj": {"sub":"one"}, "arr":["one"], "empty": null})
)
                            }
                            Div(col-sm-2){
                                If(GetVar(t18_fail)){fail}.Else{ok}
                            }
                        }
                    }
                }
            }
        }
    }
}