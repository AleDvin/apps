SetVar(now, Now("YYYY-MM-DD HH:MI:SS"))
Div(content-wrapper){
    Div(row){
        Div(col-lg-10 col-sm-offset-1 col-lg-8 col-lg-offset-2){
            Form(panel panel-default){
                Div(panel-heading text-right){
                    Button(Body: Run contracts tests, Contract: tests_Run, Class: btn btn-primary, Page: tests, PageParams: "date=#now#", Params: "Date=#now#")
                }
                Div(panel-body){
                    If(GetVar(date)){
                        Div(h3){Contract operation tests, DateTime(#date#)}
                        DBFind(Name: tests, Source: src).Where("date='#date#'").Order("id desc")
                        ForList(src){
                            If(#result#=="fail"){
                                SetVar(hl, text-danger)
                            }.Else{
                                SetVar(hl, text-success)
                            }
                            Div(form-group row #hl#){
                                Div(col-sm-10){#name#}
                                Div(col-sm-2){#result#}
                            }
                        }
                    }
                    Div(h3){Page operation tests, DateTime(#now#)}
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            If(){
                                SetVar(t1_fail, text-danger)
                            }.Else{
                                SetVar(t1_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t1_ok# #t1_fail#){
                            Div(col-sm-10){"normal If"}
                            Div(col-sm-2){
                                If(GetVar(t1_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            SetVar("Condition1", 1).("Condition2", 0.3)
                            If(And(GetVar("Condition2") == 0.3, And(GetVar("Condition1") == 1, Or(GetVar("Condition2") == 0, GetVar("Condition1") == 0)))){
                                SetVar(t2_fail, text-danger)
                            }.Else{
                                SetVar(t2_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t2_ok# #t2_fail#){
                            Div(col-sm-10){"complex If, And, Or, GetVar with vars"}
                            Div(col-sm-2){
                                If(GetVar(t2_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            SetVar("Condition1", 1).("Condition2", 0.3)
                            If(And(0.3 == 0.3, And(1 == 1, Or(0.3 == 0, 1 == 0)))){
                                SetVar(t3_fail, text-danger)
                            }.Else{
                                SetVar(t3_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t3_ok# #t3_fail#){
                            Div(col-sm-10){"complex If, And, Or, GetVar with values"}
                            Div(col-sm-2){
                                If(GetVar(t3_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            SetVar("Condition3", 1)
                            If(#Condition3# == 2){
                                1 SetVar(t4_fail, text-danger)
                            }.ElseIf(#Condition3# == 1){
                                SetVar("Condition3", 2)
                                2 SetVar(t4_ok, text-success)
                            }.ElseIf(#Condition3# == 2){
                                3 SetVar(t4_fail, text-danger)
                            }.Else{
                                else SetVar(t4_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t4_ok# #t4_fail#){
                            Div(col-sm-10){"a. reset condition If, ElseIf, Else"}
                            Div(col-sm-2){
                                If(GetVar(t4_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            SetVar("Condition4", 1)
                            If(GetVar(Condition4) == 2){
                                1 SetVar(t5_fail, text-danger)
                            }.ElseIf(GetVar(Condition4) == 1){
                                SetVar("Condition4", 2)
                                2 SetVar(t5_ok, text-success)
                            }.ElseIf(GetVar(Condition4) == 2){
                                3 SetVar(t5_fail, text-danger)
                            }.Else{
                                else SetVar(t5_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t5_ok# #t5_fail#){
                            Div(col-sm-10){"b. reset condition If, ElseIf, Else with GetVar"}
                            Div(col-sm-2){
                                If(GetVar(t5_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            SetVar(coltype, GetColumnType(members, member_name))
                            SetVar(colnone, GetColumnType(none, none))
                            SetVar(colempty, GetColumnType())
                            If(Or(#coltype#!="varchar",#colnone#>0,#colempty#>0)){
                                SetVar(t6_fail, text-danger)
                            }.Else{
                                SetVar(t6_ok, text-success)
                            }
                        }
                        Div(col-sm-10 #t6_ok# #t6_fail#){
                            Div(col-sm-10){"GetColumnType"}
                            Div(col-sm-2){
                                If(GetVar(t6_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            DBFind(parameters, src_par).Columns("id").Order(id).Where("id >= 1 and id <= 3").Count(count)
                            If(#count#==3){
                                SetVar(t7_ok, text-success)
                            }.Else{
                                SetVar(t7_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t7_ok# #t7_fail#){
                            Div(col-sm-10){"DBFind.Count"}
                            Div(col-sm-2){
                                If(GetVar(t7_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            SetVar(where)
                            DBFind(contracts, src).Columns(id).Order(id).Limit(3).Custom(a){SetVar(where, #where# #id#)}
                            If(#where#==" 1 2 3"){
                                SetVar(t8_ok, text-success)
                            }.Else{
                                SetVar(t8_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t8_ok# #t8_fail#){
                            Div(col-sm-10){"DBFind.Where append values"}
                            Div(col-sm-2){
                                If(GetVar(t8_fail)){fail}.Else{ok}
                            }
                        }
                    }
                    Div(form-group row){
                        Div(col-sm-1 text-muted){
                            DBFind(contracts, src).Order(id).Where("id=2").Vars(t9_vars)
                            If(#t9_vars_id#==2){
                                SetVar(t9_ok, text-success)
                            }.Else{
                                SetVar(t9_fail, text-danger)
                            }
                        }
                        Div(col-sm-10 #t9_ok# #t9_fail#){
                            Div(col-sm-10){"DBFind.Vars"}
                            Div(col-sm-2){
                                If(GetVar(t9_fail)){fail}.Else{ok}
                            }
                        }
                    }
                }
            }
        }
    }
}