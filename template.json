{
    "blocks": [],
    "contracts": [
        {
            "Name": "Companies_Add",
            "Value": "contract Companies_Add {\n    data {\n        company_name string\n        company_type int\n    }\n\n    conditions {\n        $company_map = DBFind(\"companies\").Where(\"id = $\", $key_id).Row()\n        if ($company_map[\"id\"] != nil) {\n            warning \"Company has already been created for this account. Create a new account and try again\"\n        }\n    }\n\n    action {\n        DBInsert(\"companies\", \"id,company_name,company_type,timestamp date_start\", $key_id, $company_name, $company_type, $block_time)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "data": [
        {
            "Table": "voting_templates",
            "Columns": [
                "quorum",
                "precondition",
                "contract_reject",
                "contract_accept_params",
                "contract_reject_params",
                "volume",
                "vacancies",
                "type_participants",
                "type_voting",
                "type_decision",
                "init_condition",
                "contract_accept",
                "title",
                "voters",
                "subject"
            ],
            "Data": [
                [
                    "50",
                    "Candidate for validators",
                    "",
                    "",
                    "",
                    "50",
                    "1",
                    "3",
                    "2",
                    "2",
                    "MainCondition",
                    "sysparams_AcceptRole",
                    "Voting for Validator",
                    "Delegate",
                    "Validator"
                ]
            ]
        }
    ],
    "languages": [
        {
            "Name": "сlosed",
            "Conditions": "",
            "Trans": "{\"en\": \"Closed\", \"ru\": \"Закрыто\"}"
        }
    ],
    "menus": [
        {
            "Name": "default_menu",
            "Value": "MenuItem(Title:$profile$, Page:profile_view, Icon:\"fa icon-user\")\nMenuItem(Title:$membership$, Page:members_list, Icon:\"fa icon-people\")\nMenuItem(Title:$companies$, Page:companies_list, Icon:\"fa fa-university\")\nMenuItem(Title:$roles$, Page:roles_list, Icon:\"fa fa-list-ul\")\nMenuGroup(Title:$notifications$, Icon:\"fa fa-bell-o\"){\n    MenuItem(Title:$single_notifics$, Page:notifications_single, Icon:\"fa fa-bell-o\")\n    MenuItem(Title:$role_notifics$, Page:notifications_roles, Icon:\"fa fa-bullhorn\")\n    MenuItem(Title:$test_page$, Page:notifications_testpage, Icon:\"icon-settings\")\n}\nMenuGroup(Title:$voting$, Icon:\"fa fa-edit\"){\n    MenuItem(Title:$voting$, Page:voting_list, Icon:\"fa fa-edit\")\n    MenuItem(Title:$voting_templates$, Page:voting_templates, Icon:\"fa icon-pin\")\n    MenuItem(Title:$sysparams_candidate_validators_form$, Page:sysparams_candidate_validators_form, Icon:\"icon-note\")\n    MenuItem(Title:$sysparams_candidates_list$, Page:sysparams_candidates_list, Icon:\"icon-list\")\n}\nMenuGroup(Title:$admin$, Icon:\"fa icon-settings\"){\n\tMenuItem(Title:$tokens_transfer$, Page:money_transfer, Icon:\"icon-energy\")\n\tMenuItem(Title:$new_ecosystem$, Page:ecosystem_new, Icon:\"icon-globe\")\n    MenuItem(Title: $sysparams_list$,Page:sysparams_list, Icon:\"fa icon-settings\")\n} ",
            "Conditions": "ContractAccess(\"@1EditMenu\")"
        }
    ],
    "pages": [
        {
            "Name": "companies_add",
            "Value": "Div(Class: content-wrapper){\n\n\tSetTitle($company_add$)\n\tDiv(Class: breadcrumb){\n\t\tLinkPage($companies$, companies_list)\n\t\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\n\t\tSpan(Class: text-muted, Body: $company_add$)\n\t}\n\n    Div(Class: row df f-valign){\n        Div(Class: col-md-3)\n        Div(Class: col-md-6){\n\n            Div(Class: panel panel-primary){\n                Div(Class: panel-heading, Body: LangRes(company_add))\n                Form(){\n\n                    Div(Class: list-group-item){\n                        Div(Class: row df f-valign){\n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: company_name){\n                                    Span(Body: LangRes(name))\n                                }\n                            }\n                            Div(Class: col-md-9 mb-sm text-left){\n                                Input(Class: form-control, Value: \"Company\", Type: text, Name: company_name)\n                            } \n                        }\n                        Div(Class: row df f-valign){\n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: company_type){\n                                    Span(Body: LangRes(type))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n                                EcosysParam(Name: company_type, Source: src_company)\n                                Select(Name: company_type, Source: src_company, NameColumn: name, ValueColumn: id)\n                            } \n                        }\n\t\t\t\t\t}\t\n\t\t\t\t\t\t\n                    Div(Class: panel-footer clearfix){\n                        Div(Class: pull-right){\n                            Button(Body: LangRes(create), Class: btn btn-primary, Page: companies_list, Contract: Companies_Add).Alert(Text: $want_create_new_company$, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\n                        }\n                    }\n                }\n\n            }\n        }\n\n        Div(Class: col-md-3)\n    }\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        }
    ],
    "parameters": [
        {
            "Name": "company_type",
            "Value": "group_person,company,institution,organization",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "tables": [
        {
            "Name": "companies_participants",
            "Columns": "[{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"role_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"member_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"company_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_start\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"member_name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"member_avatar\",\"type\":\"bytea\",\"conditions\":\"true\"},{\"name\":\"date_end\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"role_name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"right_sign\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ]
}