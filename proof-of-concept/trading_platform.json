{
    "name": "Trading Platform",
    "data": [
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Div(col-md-3 mt-sm text-right){\n    Label(For:Count){LangRes(lots_count)}\n}\nDiv(col-md-9 text-left){\n    If(And(GetVar(TypeId),GetVar(lot_unit_count))){\n        Input(Name:Count, Type:number, Value:#lot_unit_count#)\n    }.ElseIf(GetVar(lot_unit_count)){\n        Div(mt-sm){\n            #lot_unit_count#\n        }\n    }.Else{\n        Input(Name:Count, Type:number)\n    }\n}",
            "Name": "lots_count_block",
            "Type": "blocks"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Div(col-md-3 mt-sm text-right){\n    Label(){LangRes(lots_dimensions)}\n}\nDiv(col-md-9 text-left){\n    Div(row){\n        Div(col-md-3 mt-sm text-right){\n            Label(For:Length){LangRes(lots_length)}\n        }\n        Div(col-md-9 text-left){\n            If(And(GetVar(TypeId),GetVar(lot_length))){\n                Input(Name:Length, Type:number, Value:#lot_length#)\n            }.ElseIf(GetVar(lot_length)){\n                Div(mt-sm){\n                    #lot_length#\n                }\n            }.Else{\n                Input(Name:Length, Type:number)\n            }\n        }\n    }\n    Div(row){\n        Div(col-md-3 mt-sm text-right){\n            Label(For:Height){LangRes(lots_height)}\n        }\n        Div(col-md-9 text-left){\n            If(And(GetVar(TypeId),GetVar(lot_height))){\n                Input(Name:Height, Type:number, Value:#lot_height#)\n            }.ElseIf(GetVar(lot_height)){\n                Div(mt-sm){\n                    #lot_height#\n                }\n            }.Else{\n                Input(Name:Height, Type:number)\n            }\n        }\n    }\n    Div(row){\n        Div(col-md-3 mt-sm text-right){\n            Label(For:Width){LangRes(lots_width)}\n        }\n        Div(col-md-9 text-left){\n            If(And(GetVar(TypeId),GetVar(lot_width))){\n                Input(Name:Width, Type:number, Value:#lot_width#)\n            }.ElseIf(GetVar(lot_width)){\n                Div(mt-sm){\n                    #lot_width#\n                }\n            }.Else{\n                Input(Name:Width, Type:number)\n            }\n        }\n    }\n}",
            "Name": "lots_dimensions_block",
            "Type": "blocks"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "AppParam(App:#application_id#,Name:lots_weight_types, Source: weight_types)\nDiv(col-md-3 mt-sm text-right){\n    Label(For:Weight){LangRes(lots_weight)}\n}\nDiv(col-md-9 text-left){\n    Div(row){\n        If(And(GetVar(TypeId),GetVar(lot_weight))){\n            Div(col-sm-8){\n                Input(Name:Weight, Type:number, Value:#lot_weight#)\n            }\n            Div(col-sm-4){\n                Select(Name:WeightType, Source:weight_types, NameColumn:name, ValueColumn:id, Value:#lot_weight_type#)\n            }\n        }.ElseIf(GetVar(lot_weight)){\n            Div(col-sm-12 mt-sm){\n                Span(#lot_width#,mr-sm)\n                AppParam(App:#application_id#,Name:lots_weight_types, Index: #lot_weight_type#)\n            }\n        }.Else{\n            Div(col-sm-8){\n                Input(Name:Weight, Type:number)\n            }\n            Div(col-sm-4){\n                Select(Name:WeightType, Source:weight_types, NameColumn:name, ValueColumn:id)\n            }\n        }\n    }\n}",
            "Name": "lots_weight2_block",
            "Type": "blocks"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Data(weight_types, \"id,name\"){\n    1,$lots_kg$\n    2,$lots_ton$\n}\nDiv(col-md-3 mt-sm text-right){\n    Label(For:Weight){LangRes(lots_weight)}\n}\nDiv(col-md-9 text-left){\n    Div(row){\n        If(And(GetVar(TypeId),GetVar(lot_weight))){\n            Div(col-sm-8){\n                Input(Name:Weight, Type:number, Value:#lot_weight#)\n            }\n            Div(col-sm-4){\n                Select(Name:WeightType, Source:weight_types, NameColumn:name, ValueColumn:id, Value:#lot_weight_type#)\n            }\n        }.ElseIf(GetVar(lot_weight)){\n            Div(col-sm-12 mt-sm){\n                Span(#lot_width#,mr-sm)\n                AppParam(App:#application_id#,Name:lots_weight_types, Index: #lot_weight_type#)\n            }\n        }.Else{\n            Div(col-sm-8){\n                Input(Name:Weight, Type:number)\n            }\n            Div(col-sm-4){\n                Select(Name:WeightType, Source:weight_types, NameColumn:name, ValueColumn:id)\n            }\n        }\n    }\n}",
            "Name": "lots_weight_block",
            "Type": "blocks"
        },
        {
            "Conditions": "ContractAccess(\"@1EditMenu\")",
            "Value": "MenuItem(Title: \"Список лотов\", Page: lots_list, Icon:\"icon-list\")",
            "Name": "default_menu",
            "Type": "menu"
        },
        {
            "Name": "amount_final",
            "Trans": "{\n    \"ru\": \"Конечная сумма\"\n}",
            "Type": "languages"
        },
        {
            "Name": "amount_starting",
            "Trans": "{\n    \"ru\": \"Стартовая сумма\"\n}",
            "Type": "languages"
        },
        {
            "Name": "buyer",
            "Trans": "{\n    \"ru\": \"Покупатель\"\n}",
            "Type": "languages"
        },
        {
            "Name": "date_creation",
            "Trans": "{\n    \"ru\": \"Дата создания\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lot_deleted",
            "Trans": "{\n    \"ru\": \"Лот удалён\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lot_edit",
            "Trans": "{\n    \"ru\": \"Редактировать\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lot_next",
            "Trans": "{\n    \"ru\": \"Далее\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_amount_max",
            "Trans": "{\n    \"ru\": \"Текущая максимальная сумма\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_back",
            "Trans": "{\n    \"ru\": \"Назад\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_bid",
            "Trans": "{\n    \"ru\": \"Сделать ставку\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_bidding",
            "Trans": "{\n    \"ru\": \"Идут торги\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat",
            "Trans": "{\n    \"ru\": \"Категория\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat01",
            "Trans": "{\"ru\":\"Запорная арматура\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat02",
            "Trans": "{\"ru\":\"Трубная продукция\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat03",
            "Trans": "{\"ru\":\"Блочное и технологическое оборудование\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat04",
            "Trans": "{\"ru\":\"Нефтепромысловое оборудование\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat05",
            "Trans": "{\"ru\":\"Металлопрокат\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat06",
            "Trans": "{\"ru\":\"КИП и А\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat07",
            "Trans": "{\"ru\":\"Химическая продукция и сопутствующие материалы\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat08",
            "Trans": "{\"ru\":\"Кабельная продукция\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat09",
            "Trans": "{\"ru\":\"Транспорт\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat10",
            "Trans": "{\"ru\":\"Материалы административно-хозяйственного назначения\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat11",
            "Trans": "{\"ru\":\"Строительные материалы\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat12",
            "Trans": "{\"ru\":\"Спецодежда, СИЗ, противопожарное оборудование и материалы\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_cat13",
            "Trans": "{\"ru\":\"Прочее\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_close",
            "Trans": "{\"ru\":\"Закрыть\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_condition",
            "Trans": "{\n    \"ru\": \"Состояние\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_contract",
            "Trans": "{\n    \"ru\": \"Договор\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_count",
            "Trans": "{\n    \"ru\": \"Количество\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_create",
            "Trans": "{\n    \"ru\": \"Создать лот\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_date_end",
            "Trans": "{\n    \"ru\": \"Дата окончания торгов\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_date_start",
            "Trans": "{\n    \"ru\": \"Дата начала торгов\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_delete",
            "Trans": "{\n    \"ru\": \"Удалить лот\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_delete_auction",
            "Trans": "{\n    \"ru\": \"Вы действительно хотите удалить аукцион?\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_description",
            "Trans": "{\n    \"ru\": \"Описание\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_dimensions",
            "Trans": "{\n    \"ru\": \"Габариты\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_edit",
            "Trans": "{\n    \"ru\": \"Редактирование лота\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_height",
            "Trans": "{\n    \"ru\": \"Высота\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_kg",
            "Trans": "{\n    \"ru\": \"килограмм\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_length",
            "Trans": "{\n    \"ru\": \"Длина\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_list",
            "Trans": "{\n    \"ru\": \"Список лотов\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_liter",
            "Trans": "{\n    \"ru\": \"литр\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_location",
            "Trans": "{\n    \"ru\": \"Местонахождение\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_name",
            "Trans": "{\n    \"ru\": \"Название\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_new",
            "Trans": "{\n    \"ru\": \"новое\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_no",
            "Trans": "{\n    \"ru\": \"Нет\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_not_found",
            "Trans": "{\n    \"ru\": \"Лоты не найдены\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_old",
            "Trans": "{\n    \"ru\": \"б/у\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_photo",
            "Trans": "{\n    \"ru\": \"Фотография\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_rejected",
            "Trans": "{\n    \"ru\": \"Отклонен\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_save",
            "Trans": "{\n    \"ru\": \"Сохранить\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_select_cat",
            "Trans": "{\n    \"ru\": \"Выбор категории\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_select_type",
            "Trans": "{\n    \"ru\": \"Выбор вида\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_signed",
            "Trans": "{\n    \"ru\": \"Торги завершены, подпись получена\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_status",
            "Trans": "{\n    \"ru\": \"Статус\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_subscribe",
            "Trans": "{\n    \"ru\": \"Подписаться\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_ton",
            "Trans": "{\n    \"ru\": \"тонна\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_type",
            "Trans": "{\n    \"ru\": \"Вид\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_type01",
            "Trans": "{\"ru\":\"АРМАТУРА ПРОМЫШЛЕННАЯ ТРУБОПРОВОДНАЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type02",
            "Trans": "{\"ru\":\"ДЕТАЛИ ТРУБОПРОВОДОВ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type03",
            "Trans": "{\"ru\":\"ПРОДУКЦИЯ ТРУБНАЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type04",
            "Trans": "{\"ru\":\"З/Ч И КОМПЛЕКТУЮЩИЕ К ОБОР. ТЕХНОЛОГИЧ.\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type05",
            "Trans": "{\"ru\":\"ОБОРУДОВАНИЕ БЛОЧНОЕ НЕФТЕПРОМЫСЛОВОЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type06",
            "Trans": "{\"ru\":\"ОБОРУДОВАНИЕ ТЕХНОЛОГИЧЕСКОЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type07",
            "Trans": "{\"ru\":\"З/Ч К БУРОВОМУ ОБОРУДОВАНИЮ, ИНСТРУМЕНТУ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type08",
            "Trans": "{\"ru\":\"З/Ч К НЕФТЕПРОМЫСЛОВОМУ И ПОГРУЖ.ОБОРУД.\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type09",
            "Trans": "{\"ru\":\"ИНСТРУМЕНТ ЛОВИЛЬНЫЙ, КРС И З/Ч К НЕМУ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type10",
            "Trans": "{\"ru\":\"ОБОРУД-НИЕ И ИНСТР.БУРОВОЙ, ТЕХ.ОСНАСТКА\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type11",
            "Trans": "{\"ru\":\"ОБОРУД-НИЕ НЕФТЕПРОМЫСЛОВОЕ, НЕФТЕПОГРУЖ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type12",
            "Trans": "{\"ru\":\"ОБОРУДОВАНИЕ И ЗАПЧАСТИ ДЛЯ ГЕОФИЗИКИ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type13",
            "Trans": "{\"ru\":\"ЗАПЧАСТИ И КОМПЛЕКТУЮЩИЕ К ТЕХНИКЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type14",
            "Trans": "{\"ru\":\"МЕТАЛЛОИЗДЕЛИЯ ПРОМЫШЛЕННОГО НАЗНАЧЕНИЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type15",
            "Trans": "{\"ru\":\"ПРОКАТ ЦВЕТНЫХ МЕТАЛЛОВ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type16",
            "Trans": "{\"ru\":\"ПРОКАТ ЧЕРНЫХ МЕТАЛЛОВ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type17",
            "Trans": "{\"ru\":\"ОБЕСПЕЧЕНИЕ ПРОГРАММНОЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type18",
            "Trans": "{\"ru\":\"СРЕДСТВА АСУТП\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type19",
            "Trans": "{\"ru\":\"СРЕДСТВА КОММУНИКАЦИИ И СВЯЗИ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type20",
            "Trans": "{\"ru\":\"ПРИБОРЫ И СРЕДСТВА АВТОМАТИЗАЦИИ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type21",
            "Trans": "{\"ru\":\"ТЕХНИКА ВЫЧИСЛИТЕЛЬНАЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type22",
            "Trans": "{\"ru\":\"ОБОРУДОВАНИЕ, ПРИБОРЫ, ЛАБОРАТОРНЫЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type23",
            "Trans": "{\"ru\":\"ПОЛИМЕРЫ, ПЛАСТИЧ. МАССЫ, ХИМИЧ. ВОЛОКНА\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type24",
            "Trans": "{\"ru\":\"ПОСУДА, МАТЕРИАЛЫ ВСПОМ-НЫЕ ЛАБОРАТОРНЫЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type25",
            "Trans": "{\"ru\":\"РЕАКТИВЫ ХИМИЧЕСКИЕ ДЛЯ АНАЛИЗОВ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type26",
            "Trans": "{\"ru\":\"ХИМПРОДУКЦИЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type27",
            "Trans": "{\"ru\":\"ПРОДУКЦИЯ КАБЕЛЬНАЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type28",
            "Trans": "{\"ru\":\"ТЕХНИКА ТРАНСПОРТНАЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type29",
            "Trans": "{\"ru\":\"ИЗД. КУЛЬТУРНО-БЫТ. НАЗН. И ХОЗ. ОБИХОДА\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type30",
            "Trans": "{\"ru\":\"КАНЦТОВАРЫ, ОФИСНАЯ ТЕХН., ПРОД.БУМАЖНАЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type31",
            "Trans": "{\"ru\":\"МЕБЕЛЬ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type32",
            "Trans": "{\"ru\":\"ПРОДУКЦИЯ ПОЛИГРАФИЧЕСКОЙ ПРОМЫШЛЕННОСТИ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type33",
            "Trans": "{\"ru\":\"ИНСТРУМЕНТ, МАТЕРИАЛЫ АБРАЗИВНЫЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type34",
            "Trans": "{\"ru\":\"КРЕПЕЖНЫЕ ИЗДЕЛИЯ ОБЩЕМАШИНОСТРОИТЕЛЬН.\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type35",
            "Trans": "{\"ru\":\"МАТЕРИАЛЫ ОГНЕУП., ТЕРМОИЗОЛЯЦ., СТРОИТ.\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type36",
            "Trans": "{\"ru\":\"ОБОРУДОВАНИЕ ПРОТИВОПОЖАРНОЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type37",
            "Trans": "{\"ru\":\"СПЕЦОДЕЖДА, СПЕЦОБУВЬ И ДРУГИЕ СИЗ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type38",
            "Trans": "{\"ru\":\"СРЕДСТВА АВАРИЙНО-СПАСАТ. И МЕДИЦИНСКИЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type39",
            "Trans": "{\"ru\":\"МАШИНЫ ЭЛЕКТРИЧЕСКИЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type40",
            "Trans": "{\"ru\":\"ОБОРУД-ИЕ И МАТЕРИАЛЫ ЭЛЕКТРОТЕХНИЧЕСКИЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type41",
            "Trans": "{\"ru\":\"ЗАПЧАСТИ К ОБОРУДОВАНИЮ МЕХАНИЧЕСКОМУ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type42",
            "Trans": "{\"ru\":\"ОБОРУДОВАНИЕ МЕХАНИЧЕСКОЕ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type43",
            "Trans": "{\"ru\":\"ПОДШИПНИКИ КАЧЕНИЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type44",
            "Trans": "{\"ru\":\"ПРОДУКЦИЯ РЕЗИНОТЕХНИЧЕСКАЯ И АСБЕСТОВАЯ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_type45",
            "Trans": "{\"ru\":\"ПРОДУКЦИЯ ТЕКСТИЛЬН. - ТКАНИ И МАТЕРИАЛЫ\"}",
            "Type": "languages"
        },
        {
            "Name": "lots_view",
            "Trans": "{\n    \"ru\": \"Просмотр лота\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_view_info",
            "Trans": "{\n    \"ru\": \"Подробности лота\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_waiting_approval",
            "Trans": "{\n    \"ru\": \"Ожидает подтверждения\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_waiting_for_sign",
            "Trans": "{\n    \"ru\": \"Торги завершены, ожидание подписи\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_waiting_for_start",
            "Trans": "{\n    \"ru\": \"Ожидание начала торгов\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_weight",
            "Trans": "{\n    \"ru\": \"Вес\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_width",
            "Trans": "{\n    \"ru\": \"Ширина\"\n}",
            "Type": "languages"
        },
        {
            "Name": "lots_yes",
            "Trans": "{\n    \"ru\": \"Да\"\n}",
            "Type": "languages"
        },
        {
            "Name": "order_max",
            "Trans": "{\n    \"ru\": \"Максимальная ставка\"\n}",
            "Type": "languages"
        },
        {
            "Name": "order_min",
            "Trans": "{\n    \"ru\": \"Минимальная ставка\"\n}",
            "Type": "languages"
        },
        {
            "Name": "photo",
            "Trans": "{\n    \"ru\": \"Фото\"\n}",
            "Type": "languages"
        },
        {
            "Name": "seller",
            "Trans": "{\n    \"ru\": \"Продавец\"\n}",
            "Type": "languages"
        },
        {
            "Name": "buyers",
            "Columns": "[{\"conditions\":\"true\",\"name\":\"amount\",\"type\":\"money\"},{\"conditions\":\"true\",\"name\":\"lot_id\",\"type\":\"number\"},{\"conditions\":\"true\",\"name\":\"buyer_id\",\"type\":\"number\"}]",
            "Permissions": "{\"insert\": \"ContractConditions(\\\"MainCondition\\\")\", \"update\": \"ContractConditions(\\\"MainCondition\\\")\", \"new_column\": \"ContractConditions(\\\"MainCondition\\\")\"}",
            "Type": "tables"
        },
        {
            "Name": "lots",
            "Columns": "[\n    {\n        \"conditions\": \"true\",\n        \"name\": \"status\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"deleted\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"photo\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"order_min\",\n        \"type\": \"money\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"amount_final\",\n        \"type\": \"money\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"date_creation\",\n        \"type\": \"datetime\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"name\",\n        \"type\": \"text\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"seller\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"order_max\",\n        \"type\": \"money\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"amount_max\",\n        \"type\": \"money\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"buyer\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"date_start\",\n        \"type\": \"datetime\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"contract_id\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"description\",\n        \"type\": \"text\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"amount_starting\",\n        \"type\": \"money\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"date_end\",\n        \"type\": \"datetime\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"unit_count\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"weight\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"weight_type\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"length\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"width\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"height\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"lots_type_id\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"category\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"condition\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"location\",\n        \"type\": \"varchar\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"admin_comment\",\n        \"type\": \"text\"\n    }\n]",
            "Permissions": "{\"insert\": \"ContractConditions(\\\"MainCondition\\\")\", \"update\": \"ContractConditions(\\\"MainCondition\\\")\", \"new_column\": \"ContractConditions(\\\"MainCondition\\\")\"}",
            "Type": "tables"
        },
        {
            "Name": "lots_tracks",
            "Columns": "[\n    {\n        \"conditions\": \"true\",\n        \"name\": \"key_id\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"lot_id\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"deleted\",\n        \"type\": \"number\"\n    }\n]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}",
            "Type": "tables"
        },
        {
            "Name": "lots_types",
            "Columns": "[\n    {\n        \"conditions\": \"true\",\n        \"name\": \"resource_name\",\n        \"type\": \"varchar\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"category\",\n        \"type\": \"number\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"lots_params\",\n        \"type\": \"varchar\"\n    },\n    {\n        \"conditions\": \"true\",\n        \"name\": \"deleted\",\n        \"type\": \"number\"\n    }\n]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}",
            "Type": "tables"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "lots_cat01,lots_cat02,lots_cat03,lots_cat04,lots_cat05,lots_cat06,lots_cat07,lots_cat08,lots_cat09,lots_cat10,lots_cat11,lots_cat12,lots_cat13",
            "Name": "lots_categories",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "lots_new,lots_old",
            "Name": "lots_condition",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "lots_dimensions_block,lots_weight_block,lots_weight2_block,lots_count_block",
            "Name": "lots_params",
            "Type": "app_params"
        },
        {
            "Conditions": "true",
            "Value": "lots_waiting_approval,lots_waiting_for_start,lots_bidding,lots_waiting_for_sign,lots_signed,lots_rejected",
            "Name": "lots_status",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "lots_kg,lots_ton,lots_liter",
            "Name": "lots_weight_types",
            "Type": "app_params"
        },
        {
            "Conditions": "true",
            "Value": "DBFind(applications).Columns(\"id\").Where(\"name='Trading Platform' AND deleted=0\").Vars(application)\r\nSetVar(title, $lots_create$).(name,).(description,).(amount_starting,).(order_min,).(order_max,).(date_start,).(date_end,).(time_start,).(time_end,).(contract_text,).(unit_count,).(weight,).(weight_type,).(length,).(width,).(height,).(location,).(condition,)\r\n\r\nSetVar(Action,\"create\").(BtnBody,LangRes(lots_create))\r\nIf(GetVar(Id)){\r\n    SetVar(Action,\"edit\").(BtnBody,LangRes(lots_save))\r\n\r\n    DBFind(lots, src_lots).Where(\"id=#Id#\").Vars(lot)\r\n    SetVar(title, $lots_edit$)\r\n    SetVar(name, #lot_name#)\r\n    SetVar(description, #lot_description#)\r\n    SetVar(amount_starting, Money(#lot_amount_starting#))\r\n    SetVar(order_min, Money(#lot_order_min#))\r\n    SetVar(order_max, Money(#lot_order_max#))\r\n    SetVar(date_start, DateTime(#lot_date_start#, YYYY-MM-DD))\r\n    SetVar(date_end, DateTime(#lot_date_end#, YYYY-MM-DD))\r\n    SetVar(time_start, DateTime(#lot_date_start#, HH:MI))\r\n    SetVar(time_end, DateTime(#lot_date_end#, HH:MI))\r\n    SetVar(contract_text,Binary().ById(#lot_contract_id#))\r\n    SetVar(unit_count,#lot_unit_count#)\r\n    SetVar(weight,#lot_weight#)\r\n    SetVar(weight_type,#lot_weight_type#)\r\n    SetVar(length,#lot_length#)\r\n    SetVar(width,#lot_width#)\r\n    SetVar(height,#lot_height#)\r\n    SetVar(location,#lot_location#)\r\n    SetVar(condition,#lot_condition#)\r\n\r\n    SetVar(TypeId,#lot_lots_type_id#)\r\n    SetVar(CatId,#lot_category#)\r\n}\r\n\r\n\r\nDiv(content-wrapper){\r\n    If(GetVar(TypeId)){\r\n        SetTitle(#title#)\r\n        Div(breadcrumb){\r\n            LinkPage($lots_list$, lots_list)\r\n            Span(/,mh)\r\n            Span(Class: text-muted, Body: #title#)\r\n        }\r\n\r\n        Div(row){\r\n            Div(col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3){\r\n                Form(panel panel-primary){\r\n                    DBFind(lots_types,src_type).Where(\"deleted=0 and id=#TypeId#\").Vars(type)\r\n\r\n                    Div(panel-heading){#title#}\r\n                    Div(panel-body){\r\n                        If(GetVar(Id)) {\r\n                            Input(Name: Id, Type: hidden, Value: #Id#)\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Strong(LangRes(lots_cat))\r\n                                }\r\n                                Div(col-md-9 text-left mt-sm){\r\n                                    AppParam(App: #application_id#, Name: lots_categories, Index: #CatId#)\r\n                                }\r\n                            }\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Strong(LangRes(lots_type))\r\n                                }\r\n                                Div(col-md-9 text-left mt-sm){\r\n                                    ForList(src_type){\r\n                                        LangRes(#resource_name#)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: Name){LangRes(lots_name)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Input(Name: Name, Value: #name#)\r\n                                }\r\n                            }\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: Description){LangRes(lots_description)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Input(Name: Description, Type: textarea, Value: #description#)\r\n                                }\r\n                            }\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: Photo){LangRes(lots_photo)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Input(Name: Photo, Type: file)\r\n                                }\r\n                            }\r\n                            If(#lot_contract_id#>0){\r\n                                Div(row mt-sm){\r\n                                    Div(col-md-3 mt-sm text-right){\r\n                                        Label(For: LotContract){LangRes(lots_contract)}\r\n                                    }\r\n                                    Div(col-md-9 mt-sm text-left){\r\n                                        #contract_text#\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For:){LangRes(lots_location)}\r\n                                }\r\n                                Div(col-md-9 text-left mt-sm){\r\n                                    Input(Name: Location, Value: #location#)\r\n                                }\r\n                            }\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For:){LangRes(lots_condition)}\r\n                                }\r\n                                Div(col-md-9 text-left mt-sm){\r\n                                    AppParam(App:#application_id#, Name:lots_condition, Source:src_condition)\r\n                                    RadioGroup(Name: Condition, Value:#condition#, ValueColumn: id, NameColumn: name, Source: src_condition)\r\n                                }\r\n                            }\r\n\r\n                            ArrayToSource(type_blocks, [#type_lots_params#])\r\n                            ForList(type_blocks){\r\n                                Div(row mt-sm){\r\n                                    SetVar(block,AppParam(App:#application_id#, Name:lots_params, Index:#value#))\r\n                                    If(#block#==\"lots_count_block\"){\r\n                                        Include(lots_count_block)\r\n                                    }.ElseIf(#block#==\"lots_dimensions_block\"){\r\n                                        Include(lots_dimensions_block)\r\n                                    }.ElseIf(#block#==\"lots_weight_block\"){\r\n                                        Include(lots_weight_block)\r\n                                    }.ElseIf(#block#==\"lots_weight2_block\"){\r\n                                        Include(lots_weight2_block)\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: DateStart){LangRes(lots_date_start)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Div(row){\r\n                                        Div(col-md-6){\r\n                                            Input(Name: DateStart, Type: date, Value: #date_start#)\r\n                                        }\r\n                                        Div(col-md-6){\r\n                                            Input(Name: TimeStart, Type: time, Value: #time_start#)\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: DateEnd){LangRes(lots_date_end)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Div(row){\r\n                                        Div(col-md-6){\r\n                                            Input(Name: DateEnd, Type: date, Value: #date_end#)\r\n                                        }\r\n                                        Div(col-md-6){\r\n                                            Input(Name: TimeEnd, Type: time, Value: #time_end#)\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: AmountStarting){LangRes(amount_starting)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Input(Name: AmountStarting, Type: number, Value: #amount_starting#)\r\n                                }\r\n                            }\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: OrderMin){LangRes(order_min)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Input(Name: OrderMin, Type: number, Value: #order_min#)\r\n                                }\r\n                            }\r\n                            Div(row mt-sm){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: OrderMax){LangRes(order_max)}\r\n                                }\r\n                                Div(col-md-9 text-left){\r\n                                    Input(Name: OrderMax, Type: number, Value: #order_max#)\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                    Div(panel-footer text-right){\r\n                        If(GetVar(Id)) {\r\n                            Button(Body: $lots_back$, Class: btn btn-default pull-left, Page: lots_list)\r\n                        }.Else{\r\n                            Button(Body: $lots_back$, Class: btn btn-default pull-left hidden-lg, Page: lots_edit, PageParams: \"CatId=#CatId#\").Popup(Width: 50, Header: \"Выбор вида\")\r\n                            Button(Body: $lots_back$, Class: btn btn-default pull-left hidden-sm hidden-md hidden-xs, Page: lots_edit, PageParams: \"CatId=#CatId#\").Popup(Width: 40, Header: \"Выбор вида\")\r\n                        }\r\n                        Button(Body: #BtnBody#, Class: btn btn-primary, Contract: lots_SellerAction, Page: lots_list, Params: \"Action=#Action#,TypeId=#TypeId#\")\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    }.Else{\r\n        If(GetVar(CatId)){\r\n            SetVar(Cat,AppParam(App: #application_id#, Name: lots_categories, Index: #CatId#))\r\n            DBFind(lots_types,src_types).Where(\"deleted=0 and category=#CatId#\")\r\n            Div(text-center form-group){\r\n                ForList(src_types){\r\n                    Button(Body: LangRes(#resource_name#), Class: btn btn-primary btn-block mr-sm mb-sm, Page: lots_edit, PageParams: \"TypeId=#id#,CatId=#CatId#\")\r\n                }\r\n            }\r\n            Div(text-left){\r\n                Button(Body: $lots_back$, Class: btn btn-default hidden-lg, Page: lots_edit).Popup(Width: 50, Header: \"Выбор категории\")\r\n                Button(Body: $lots_back$, Class: btn btn-default hidden-sm hidden-md hidden-xs, Page: lots_edit).Popup(Width: 40, Header: \"Выбор категории\")\r\n            }\r\n        }.Else{\r\n            AppParam(App: #application_id#, Name: lots_categories, Source: src_cats)\r\n            Div(text-center form-group){\r\n                ForList(src_cats){\r\n                    Button(Body: #name#, Class: btn btn-primary btn-block mr-sm mb-sm hidden-lg, Page: lots_edit, PageParams: \"CatId=#id#\").Popup(Width: 50, Header: \"Выбор вида\")\r\n                    Button(Body: #name#, Class: btn btn-primary btn-block mr-sm mb-sm hidden-sm hidden-md hidden-xs, Page: lots_edit, PageParams: \"CatId=#id#\").Popup(Width: 40, Header: \"Выбор вида\")\r\n                }\r\n            }\r\n            Div(text-left){\r\n                Button(Body: $lots_back$, Class: btn btn-default, Page: lots_list)\r\n            }\r\n        }\r\n    }\r\n}",
            "Name": "lots_edit",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "true",
            "Value": "\r\nDBFind(applications).Columns(\"id\").Where(\"name='Trading Platform' AND deleted=0\").Vars(application)\r\nDBFind(roles).Where(\"id=#role_id#\").Columns(\"role_name\").Vars(r)\r\nSetTitle($lots_list$)\r\nDiv(content-wrapper){\r\n    Div(breadcrumb){\r\n        Span(Class: text-muted, Body: $lots_list$)\r\n        If(#r_role_name#==\"Seller\"){\r\n            Button(Body: Span(Class:icon-plus) $lots_create$, Page: lots_edit, Class: btn btn-link pull-right hidden-sm hidden-md hidden-xs).Popup(Width: 40, Header: \"Выбор категории\")\r\n            Button(Body: Span(Class:icon-plus) $lots_create$, Page: lots_edit, Class: btn btn-link pull-right hidden-lg).Popup(Width: 50, Header: \"Выбор категории\")\r\n        }\r\n    }\r\n\r\n    SetVar(Where,\"deleted=0\").(rejected_status,5)\r\n    If(GetVar(Search)){\r\n        If(GetVar(Status)!=\"\"){\r\n            SetVar(Where,\"#Where# and name='#Search#' and status=#Status#\")\r\n        }.Else{\r\n            SetVar(Where,\"#Where# and name='#Search#'\")\r\n        }\r\n    }.Else{\r\n        If(GetVar(Status)!=\"\"){\r\n            SetVar(Where,\"#Where# and status=#Status#\")\r\n        }\r\n        SetVar(Search,)\r\n    }\r\n\r\n    Div(text-right){\r\n        Data(status_icons, \"Icon\"){\r\n            fa fa-hourglass-start\r\n            fa fa-hourglass-half\r\n            fa fa-hourglass-end\r\n            fa fa-check\r\n        }\r\n\r\n        If(GetVar(Status)!=\"\"){\r\n            Button(Class: fa fa-times mr-sm btn bg-danger, Page: lots_list)\r\n        }\r\n        ForList(status_icons){\r\n            SetVar(status,Calculate(#status_icons_index#-1))\r\n            If(#Status#==#status#){\r\n                Button(Class: #Icon# mr-sm btn bg-gray-lighter, Page: lots_list, PageParams: \"Status=#status#,Search=#Search#\")\r\n            }.Else{\r\n                Button(Class: #Icon# mr-sm btn bg-gray, Page: lots_list, PageParams: \"Status=#status#,Search=#Search#\")\r\n            }\r\n        }\r\n    }.Style(div {display:inline-block;})\r\n\r\n    Form(panel panel-primary){\r\n        Div(panel-body){\r\n            Div(row){\r\n                Div(col-md-12){\r\n                    Div(input-group){\r\n                        Div(input-group-addon){\r\n                            \"Название\"\r\n                        }\r\n                        Input(Name: Search, Value: #Search#)\r\n                        Div(input-group-btn){\r\n                            Button(Class: fa fa-search btn btn-default, Page: lots_list, PageParams: \"Search=Val(Search)\")\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            DBFind(lots, src_lots).Where(\"#Where#\").Count(lots_count).Custom(_name){\r\n                Div(text-left){\r\n                    LinkPage(Class: text-primary h5 text-bold, Page: lots_view, PageParams: \"Id=#id#\", Body: #name#)\r\n                }\r\n            }.Custom(_photo){\r\n                Image(Src: Binary().ById(#photo#), Class:photo)\r\n            }.Custom(_seller){\r\n                Div(text-nowrap){\r\n                    DBFind(members).Columns(\"id,member_name,image_id\").Where(\"id=#seller#\").Vars(seller)\r\n                    If(Or(#seller_id#>0,#seller_id#<0)){\r\n                    }.Else{\r\n                        SetVar(seller_member_name,Address(#seller#))\r\n                    }\r\n                    LinkPage(Class: center text-primary h5 text-bold, Page: profile_view, PageParams: \"v_member_id=#seller#\"){\r\n                        If(#seller_image_id#>0){\r\n                            Image(Src: Binary().ById(#seller_image_id#), Class: img-circle mr)\r\n                        }.Else{\r\n                            Div(Class: fa icon-user fa-2x mr)\r\n                        }\r\n                        Div(){#seller_member_name#}\r\n                    }\r\n                }\r\n            }.Custom(_date_creation){\r\n                DateTime(#date_creation#, DD.MM.YYYY)\r\n            }.Custom(_date_start){\r\n                DateTime(#date_start#, DD.MM.YYYY)\r\n            }.Custom(_date_end){\r\n                DateTime(#date_end#, DD.MM.YYYY)\r\n            }.Custom(_amount_starting){\r\n                Money(#amount_starting#)\r\n            }.Custom(_amount_final){\r\n                Money(#amount_final#)\r\n            }.Custom(_status){\r\n                SetVar(status_index, Calculate(#status# + 1))\r\n                If(#status_index#==5){\r\n                    SetVar(status_class,text-success)\r\n                }.ElseIf(#status_index#==6){\r\n                    SetVar(status_class,text-danger)\r\n                }.ElseIf(#status_index#==1){\r\n                    SetVar(status_class,text-muted)\r\n                }.Else{\r\n                    SetVar(status_class,text-warning)\r\n                }\r\n                Div(#status_class#){\r\n                    AppParam(App: #application_id#, Name: lots_status, Index: #status_index#)\r\n                }\r\n            }.Custom(_actions){\r\n                SetVar(track_id,)\r\n                DBFind(lots_tracks).Where(\"lot_id=#id# and key_id=#key_id# and deleted=0\").Vars(track)\r\n                Div(text-right text-nowrap){\r\n                    If(#r_role_name#==\"Buyer\"){\r\n                        If(And(#status#>1,#status#<#rejected_status#)){\r\n                            Button(Class: btn btn-primary, Body: $lots_bid$, Page: lots_list)\r\n                        }.ElseIf(#status#==1){\r\n                            If(#track_id#>0){\r\n                                Button(Class: btn btn-default, Body: $lots_unsubscribe$, Page: lots_list, Contract: lots_BuyerAction, Params: \"Action=track_reject,Id=#id#\")\r\n                            }.Else{\r\n                                Button(Class: btn btn-primary, Body: $lots_subscribe$, Page: lots_list, Contract: lots_BuyerAction, Params: \"Action=track_accept,Id=#id#\")\r\n                            }\r\n                        }\r\n                    }.ElseIf(And(#seller#==#key_id#,#r_role_name#==\"Seller\")){\r\n                        If(#status#<1){\r\n                            Button(Class: btn btn-default fa fa-edit mr-sm, Page: lots_edit, PageParams: \"Id=#id#\")\r\n                            Button(Class: btn btn-danger fa fa-trash, Page: lots_list, Contract: lots_Delete, Params: \"Id=#id#\").Alert($lots_delete_auction$, $lots_yes$, $lots_no$)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(row){\r\n                Div(col-md-12){\r\n                    If(#lots_count#>0){\r\n                        Div(table-responsive){\r\n                            Table(src_lots,\"ID=id,$lots_name$=_name,$photo$=_photo,$seller$=_seller,$date_creation$=_date_creation,$lots_date_start$=_date_start,$lots_date_end$=_date_end,$amount_starting$=_amount_starting,$amount_final$=_amount_final,$lots_status$=_status,=_actions\")\r\n                        }\r\n                    }.Else{\r\n                        Div(text-center h3){\r\n                            LangRes(lots_not_found)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            If(GetVar(Search)){\r\n                Div(row){\r\n                    Div(col-md-12 mt-lg){\r\n                        Div(text-center){\r\n                            Button(Body: LangRes(show_all), Class: btn btn-primary, Page: lots_list)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }.Style(\r\n            th,td {text-align:center;}\r\n            .img-circle {height: 30px;width: 30px; border: 1px solid #5A5D63;}\r\n            .center {display:flex; align-items:center;}\r\n            .photo {height: 100px; width: 100px;}\r\n        )\r\n    }\r\n}",
            "Name": "lots_list",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Div(){\r\n    If(And(#Id#>0,#role_id#==1,#NotificId#>0)){\r\n        Form(form-group){\r\n            Div(form-group){\r\n                Input(Name:Comment, Type:textarea)\r\n            }\r\n            Div(text-left){\r\n                Button(Body: \"Отклонить\", Page: lots_view, Contract: lots_AdminAction, Params: \"Action=reject,Id=#Id#,NotificId=#NotificId#\", PageParams: \"Id=#Id#\", Class: btn btn-danger pull-right)\r\n                Button(Body: \"Отмена\", Page: lots_view, PageParams: \"Id=#Id#,notific_id=#NotificId#\", Class: btn btn-default pull-left)\r\n            }\r\n        }\r\n    }.Else{\r\n        Button(Body: \"Отмена\", Page: lots_view, PageParams: \"Id=#Id#,notific_id=#NotificId#\", Class: btn btn-default pull-left)\r\n    }\r\n}",
            "Name": "lots_reject",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "true",
            "Value": "DBFind(applications).Columns(\"id\").Where(\"name='Trading Platform' AND deleted=0\").Vars(application)\r\nDBFind(roles).Where(\"id=#role_id#\").Columns(\"role_name\").Vars(r)\r\nIf(#notific_id#>0){\r\n    DBFind(notifications).Columns(\"id,page_params->lot_id\").Where(\"id=#notific_id#\").Vars(note)\r\n    If(#note_id#>0){\r\n        SetVar(Id,#note_page_params_lot_id#)\r\n    }\r\n}.Else{\r\n    SetVar(notific_id,)\r\n}\r\nDiv(content-wrapper){\r\n    Div(breadcrumb){\r\n        LinkPage($lots_list$, lots_list)\r\n        Span(/,mh)\r\n        Span(Class: text-muted, Body: $lots_view$)\r\n    }\r\n\r\n    If(GetVar(Id)){\r\n        DBFind(lots,lot).Where(\"id=#Id#\").Vars(lot)\r\n        DBFind(lots_types,src_type).Where(\"deleted=0 and id=#lot_lots_type_id#\").Vars(type)\r\n        DBFind(roles).Columns(\"role_name\").Where(\"id=#role_id#\").Vars(r)\r\n        DBFind(lots_tracks).Where(\"lot_id=#Id# and key_id=#key_id# and deleted=0\").Vars(track)\r\n\r\n        Div(row){\r\n            Div(col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3){\r\n                Form(panel panel-default){\r\n                    Div(panel-heading text-center){\r\n                        If(#lot_deleted#==1){\r\n                            Div(Class: h2 text-danger, Body: LangRes(lot_deleted))\r\n                        }\r\n                        Div(Class: h3, Body: #lot_name#)\r\n                    }\r\n                    Div(panel-body){\r\n                        Div(text-center){\r\n                            Image(Src: Binary().ById(#lot_photo#), Class:big_photo mb-lg)\r\n                        }\r\n                        Div(list-group-item text-center){\r\n                            SetVar(status_index, Calculate(#lot_status# + 1)).(status_class,text-warning)\r\n                            If(#status_index# == 5){\r\n                                SetVar(status_class,text-success)\r\n                                Div(col-md-6 mt-sm text-right){\r\n                                    LangRes(buyer)\r\n                                }\r\n                                Div(col-md-6 text-left){\r\n                                    DBFind(members).Columns(\"id,member_name,image_id\").Where(\"id=#lot_buyer#\").Vars(buyer)\r\n                                    If(Or(#buyer_id#>0,#buyer_id#<0)){\r\n                                    }.Else{\r\n                                        SetVar(buyer_member_name,Address(#lot_buyer#))\r\n                                    }\r\n                                    LinkPage(Class: center text-primary h5 text-bold, Page: profile_view, PageParams: \"v_member_id=#seller#\"){\r\n                                        If(#buyer_image_id#>0){\r\n                                            Image(Src: Binary().ById(#buyer_image_id#), Class: img-circle mr)\r\n                                        }.Else{\r\n                                            Span(Class: fa icon-user fa-2x mr)\r\n                                        }\r\n                                        Span(#buyer_member_name#)\r\n                                    }\r\n                                }\r\n                            }.ElseIf(#status_index# == 6){\r\n                                SetVar(status_class,text-danger)\r\n                            }.ElseIf(And(#status_index#==1,#role_id#==1,#notific_id#>0)){\r\n                                Div(form-group text-left){\r\n                                    Button(Body: \"Отклонить\", Page: lots_reject, PageParams: \"NotificId=#notific_id#,Id=#Id#\", Class: btn btn-danger).Popup(Width: 40, Header: \"Пожалуйста укажите причину отказа\")\r\n                                    Button(Body: \"Принять\", Page: lots_view, Contract: lots_AdminAction, Params: \"Action=accept,Id=#Id#,NotificId=#notific_id#,Comment=\", Class: btn btn-success pull-right, PageParams: \"Id=#Id#\")\r\n                                }\r\n                            }.ElseIf(And(#r_role_name#==\"Buyer\",#notific_id#>0)){\r\n                                Div(form-group text-left){\r\n                                    Button(Body: \"Не интересует\", Page: lots_view, Contract: lots_BuyerAction, Params: \"Action=track_reject,Id=#Id#,NotificId=#notific_id#\", Class: btn btn-default, PageParams: \"Id=#Id#\")\r\n                                    Button(Body: \"Отслеживать\", Page: lots_view, Params: \"Action=track_accept,NotificId=#notific_id#,Id=#Id#\",PageParams: \"Id=#Id#\", Contract: lots_BuyerAction, Class: btn btn-success pull-right)\r\n                                }\r\n                            }\r\n                            Div(#status_class#){\r\n                                AppParam(App: #application_id#, Name: lots_status, Index: #status_index#)\r\n                            }\r\n                            If(#lot_comment#!=\"\"){\r\n                                Div(text-muted){\r\n                                    #lot_comment#\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(form-group){\r\n                            Div(list-group-item text-center){\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        ID\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        #lot_id#\r\n                                    }\r\n                                }\r\n\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(lots_description)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        #lot_description#\r\n                                    }\r\n                                }\r\n\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 mt-sm text-right){\r\n                                        LangRes(seller)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        DBFind(members).Columns(\"id,member_name,image_id\").Where(\"id=#lot_seller#\").Vars(seller)\r\n                                        If(Or(#seller_id#>0,#seller_id#<0)){\r\n                                        }.Else{\r\n                                            SetVar(seller_member_name,Address(#lot_seller#))\r\n                                        }\r\n                                        LinkPage(Class: center text-primary h5 text-bold, Page: profile_view, PageParams: \"v_member_id=#lot_seller#\"){\r\n                                            If(#seller_image_id#>0){\r\n                                                Image(Src: Binary().ById(#seller_image_id#), Class: img-circle mr)\r\n                                            }.Else{\r\n                                                Span(Class: fa icon-user fa-2x mr)\r\n                                            }\r\n                                            Span(#seller_member_name#)\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            Div(list-group-item text-center){\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(date_creation)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        DateTime(#lot_date_creation#, DD.MM.YYYY HH:MI)\r\n                                    }\r\n                                }\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(lots_date_start)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        DateTime(#lot_date_start#, DD.MM.YYYY HH:MI)\r\n                                    }\r\n                                }\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(lots_date_end)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        DateTime(#lot_date_end#, DD.MM.YYYY HH:MI)\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            Div(list-group-item text-center){\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(amount_starting)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        Money(#lot_amount_starting#)\r\n                                    }\r\n                                }\r\n\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(order_min)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        Money(#lot_order_min#)\r\n                                    }\r\n                                }\r\n\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(order_max)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        Money(#lot_order_max#)\r\n                                    }\r\n                                }\r\n\r\n                                Div(row mt-sm t4){\r\n                                    Div(col-md-6 text-right){\r\n                                        LangRes(lots_amount_max)\r\n                                    }\r\n                                    Div(col-md-6 text-left){\r\n                                        Money(#lot_amount_max#)\r\n                                    }\r\n                                }\r\n                            }\r\n                            If(#lot_contract_id#>0){\r\n                                Div(list-group-item text-center){\r\n                                    Div(row mt-sm t4){\r\n                                        Div(col-md-12){\r\n                                            DBFind(binaries, src_binaries).Where(\"id=#lot_contract_id#\")\r\n                                            Table(Source: src_binaries, \"$lots_contract$=data\")\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                            Div(text-right mt){\r\n                                Button(Class: btn btn-info hidden-lg, Body: $lots_view_info$, Page: lots_view_info, PageParams: \"notific_id=#notific_id#,Id=#Id#,\").Popup(Header:\"#lot_name#\", Width: 50)\r\n                                Button(Class: btn btn-info hidden-sm hidden-md hidden-xs, Body: $lots_view_info$, Page: lots_view_info, PageParams: \"notific_id=#notific_id#,Id=#Id#\").Popup(Header:\"#lot_name#\", Width: 40)\r\n                            }\r\n                        }\r\n                        Div(form-group){\r\n                            If(#lot_deleted#==0) {\r\n                                If(#r_role_name#==\"Buyer\"){\r\n                                    If(#comment#==\"пока отключено\"){\r\n                                        Div(list-group-item text-center){\r\n                                            If(#lot_status#==1){\r\n                                                If(#track_id#>0){\r\n                                                    Button(Body: $lots_unsubscribe$, Class: btn btn-default btn-block, Page: lots_view, PageParams: \"Id=#Id#\", Contract: lots_BuyerAction, Params: \"Action=track_reject,Id=#Id#\")\r\n                                                }.Else{\r\n                                                    Button(Body: $lots_subscribe$, Class: btn btn-primary btn-block, Page: lots_view,PageParams: \"Id=#Id#\", Contract: lots_BuyerAction, Params: \"Action=track_accept,Id=#Id#\")\r\n                                                }\r\n                                            }.ElseIf(#lot_status#>1){\r\n                                                Button(Class: btn btn-primary btn-block, Body: $lots_bid$, Page: lots_list)\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }.ElseIf(#r_role_name#==\"Seller\"){\r\n                                    If(And(#lot_seller#==#key_id#,#lot_status#==0)){\r\n                                        Div(list-group-item text-center){\r\n                                            Button(Class: btn btn-default btn-block, Body: LangRes(lot_edit), Page: lots_edit, PageParams: \"Id=#Id#\")\r\n                                        }\r\n                                        Div(list-group-item text-center){\r\n                                            Button(Class: btn btn-danger btn-block, Body: LangRes(lots_delete), Page: lots_list, Contract: lots_Delete, Params: \"Id=#Id#\").Alert($lots_delete_auction$, $lots_yes$, $lots_no$)\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}.Style(\r\n    th,td {text-align:center;}\r\n    .t4 {font-size:18px;}\r\n    .img-circle {height: 30px;width: 30px; border: 1px solid #5A5D63;}\r\n    .center {display:flex; align-items:center;}\r\n    .big_photo {height: 300px; width: 300px;}\r\n)",
            "Name": "lots_view",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(applications).Columns(\"id\").Where(\"name='Trading Platform' AND deleted=0\").Vars(application)\r\nDiv(content-wrapper){\r\n    If(GetVar(Id)){\r\n        DBFind(lots,lot).Where(\"id=#Id#\").Vars(lot)\r\n        DBFind(lots_types,src_type).Where(\"deleted=0 and id=#lot_lots_type_id#\").Vars(type)\r\n\r\n        Div(form-group){\r\n            Div(row mt-sm){\r\n                Div(col-md-4 mt-sm text-right){\r\n                    Strong(LangRes(lots_cat))\r\n                }\r\n                Div(col-md-8 text-left mt-sm){\r\n                    AppParam(App: #application_id#, Name: lots_categories, Index: #type_category#)\r\n                }\r\n            }\r\n            Div(row mt-sm){\r\n                Div(col-md-4 mt-sm text-right){\r\n                    Strong(LangRes(lots_type))\r\n                }\r\n                Div(col-md-8 text-left mt-sm){\r\n                    ForList(src_type){\r\n                        LangRes(#resource_name#)\r\n                    }\r\n                }\r\n            }\r\n            Div(row mt-sm){\r\n                Div(col-md-4 mt-sm text-right){\r\n                    Strong(LangRes(lots_location))\r\n                }\r\n                Div(col-md-8 text-left mt-sm){\r\n                    #lot_location#\r\n                }\r\n            }\r\n            Div(row mt-sm){\r\n                Div(col-md-4 mt-sm text-right){\r\n                    Strong(LangRes(lots_condition))\r\n                }\r\n                Div(col-md-8 text-left mt-sm){\r\n                    AppParam(App:#application_id#, Name:lots_condition, Index:#lot_condition#)\r\n                }\r\n            }\r\n            ArrayToSource(type_blocks, [#type_lots_params#])\r\n            ForList(type_blocks){\r\n                Div(row mt-sm){\r\n                    SetVar(block,AppParam(App:#application_id#, Name:lots_params, Index:#value#))\r\n                    Include(#block#)\r\n                }\r\n            }\r\n        }\r\n        Div(text-right){\r\n            Button(Class: btn btn-primary, Page: lots_view, PageParams: \"notific_id=#notific_id#,Id=#Id#\", Body: \"Закрыть\")\r\n        }\r\n    }\r\n}",
            "Name": "lots_view_info",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract lots_AdminAction {\r\n    data {\r\n        Action string\r\n        NotificId int\r\n        Id int\r\n        Comment string \"optional\"\r\n    }\r\n    func notifyBuyers(lotId int, lotName string){\r\n        var rid closureType sender int textHeader pageName string params map\r\n        closureType = 2\r\n        sender = 1\r\n        textHeader = \"Появился новый лот: \" + lotName\r\n        pageName = \"lots_view\"\r\n        params[\"lot_id\"] = lotId\r\n        params[\"note_for\"] = \"buyers\"\r\n        params = JSONEncode(params)\r\n        rid = $buyerRoleId\r\n        notifications_Send(\"rid,closure_type,sender,text_header,page_name,params_map\", rid, closureType, sender, textHeader, pageName, params)\r\n    }\r\n    conditions {\r\n        if $role_id != 1{\r\n            warning \"Access denied\"\r\n        }\r\n        $buyerRoleId = Int(DBFind(\"roles\").Where(\"role_name='Buyer'\").One(\"id\"))\r\n        if $buyerRoleId == 0{\r\n            warning \"'Buyer' role not found\"\r\n        }\r\n        $lot = DBFind(\"lots\").Where(\"id=? and deleted=0\", $Id).Row()\r\n        if !$lot {\r\n            warning \"Lot not found\"\r\n        }\r\n        if $lot[\"status\"] > 1 {\r\n            warning \"Bidding has already begun\"\r\n        }\r\n        if $Action == \"reject\" && Size($Comment) < 1 {\r\n            warning \"Пожалуйста укажите причину отказа\"\r\n        }\r\n    }\r\n\r\n    action {\r\n        info $Action\r\n        if $Action == \"accept\" {\r\n            DBUpdate(\"lots\", $Id, \"status\", 1)\r\n            notifyBuyers($Id, $lot[\"name\"])\r\n        }\r\n        if $Action == \"reject\" {\r\n            DBUpdate(\"lots\", $Id, \"status,comment\", 5, $Comment)\r\n        }\r\n        notifications_Close(\"notific_id\", $NotificId)\r\n    }\r\n}",
            "Name": "lots_AdminAction",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract lots_BuyerAction {\n    data {\n        Action string\n        NotificId string \"optional\"\n        Id int\n    }\n    conditions {\n        $NotificId = Int($NotificId)\n        if !DBFind(\"roles\").Where(\"role_name='Buyer' and id=?\", $role_id).One(\"id\") {\n            warning \"Access denied\"\n        }\n        $lot = DBFind(\"lots\").Where(\"id=?\", $Id).Row()\n        if !$lot {\n            warning \"Lot not found\"\n        }\n        $track = DBFind(\"lots_tracks\").Where(\"key_id=? and lot_id=?\", $key_id, $Id).Row()\n    }\n\n    action {\n        if $Action == \"track_accept\" {\n            if !$track {\n                DBInsert(\"lots_tracks\", \"key_id,lot_id\", $key_id, $Id)\n            }else{\n                DBUpdate(\"lots_tracks\", Int($track[\"id\"]), \"deleted\", 0)\n            }\n        }\n        if $Action == \"track_reject\" {\n            if $track {\n                DBUpdate(\"lots_tracks\", Int($track[\"id\"]), \"deleted\", 1)\n            }\n        }\n        if $NotificId>0{\n            notifications_Close(\"notific_id\", $NotificId)\n        }\n    }\n}",
            "Name": "lots_BuyerAction",
            "Type": "contracts"
        },
        {
            "Conditions": "true",
            "Value": "contract lots_Delete {\r\n    data {\r\n        Id int\r\n    }\r\n    func closeNotes(){\r\n        var notes array i lenNotes int note map\r\n        notes = DBFind(\"notifications\").Where(\"page_params->lot_id=?\", $Id).Columns(\"id\")\r\n        lenNotes = Len(notes)\r\n        while i<lenNotes{\r\n            note = notes[i]\r\n            notifications_Close(\"notific_id\", Int(note[\"id\"]))\r\n            i=i+1\r\n        }\r\n    }\r\n    func removeTracks(){\r\n        var tracks array i lenTracks int track map\r\n        tracks = DBFind(\"lots_tracks\").Where(\"lot_id=?\", $Id).Columns(\"id\")\r\n        lenTracks = Len(tracks)\r\n        while i<lenTracks{\r\n            track = tracks[i]\r\n            DBUpdate(\"lots_tracks\", Int(track[\"id\"]), \"deleted\", 1)\r\n            i=i+1\r\n        }\r\n    }\r\n    conditions {\r\n        var lot map\r\n        lot = DBFind(\"lots\").Where(\"id=? and deleted=0\", $Id).Row()\r\n        if !lot {\r\n            warning \"Lot not found\"\r\n        }\r\n        if lot[\"status\"] > 0 && lot[\"status\"] != 5 {\r\n            warning \"You cannot delete a confirmed lot\"\r\n        }\r\n        if lot[\"seller\"] != $key_id {\r\n            warning \"You are not owner of the lot\"\r\n        }\r\n    }\r\n\r\n    action {\r\n        DBUpdate(\"lots\", $Id, \"deleted\", 1)\r\n        closeNotes()\r\n        removeTracks()\r\n    }\r\n}",
            "Name": "lots_Delete",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract lots_InstallTypes {\r\n    data {}\r\n    func insertType(res,cat,params string){\r\n        if !DBFind(\"lots_types\").Where(\"deleted=0 and resource_name=?\", res).Row(){\r\n            DBInsert(\"lots_types\", \"resource_name,category,lots_params\", res, cat, params)\r\n        }\r\n    }\r\n    action {\r\n        // App Param \"lots_params\"\r\n        // 1. lots_dimensions: габариты (длинна / высота / ширина)\r\n        // 2. lots_weight: вес (кг/тонн)\r\n        // 3. lots_weight2: вес (кг/тонн/литры)\r\n        // 4. lots_counts: количество (шт.)\r\n\r\n        insertType(\"lots_type01\",\"1\", \"1,2,4\")\r\n        insertType(\"lots_type02\",\"2\", \"1,2,4\")\r\n        insertType(\"lots_type03\",\"2\", \"1,2,4\")\r\n        insertType(\"lots_type04\",\"3\", \"1,2,4\")\r\n        insertType(\"lots_type05\",\"3\", \"1,2,4\")\r\n        insertType(\"lots_type06\",\"3\", \"1,2,4\")\r\n        insertType(\"lots_type07\",\"4\", \"1,2,4\")\r\n        insertType(\"lots_type08\",\"4\", \"1,2,4\")\r\n        insertType(\"lots_type09\",\"4\", \"1,2,4\")\r\n        insertType(\"lots_type10\",\"4\", \"1,2,4\")\r\n        insertType(\"lots_type11\",\"4\", \"1,2,4\")\r\n        insertType(\"lots_type12\",\"4\", \"1,2,4\")\r\n        insertType(\"lots_type13\",\"5\", \"1,2,4\")\r\n        insertType(\"lots_type14\",\"5\", \"1,2,4\")\r\n        insertType(\"lots_type15\",\"5\", \"1,2,4\")\r\n        insertType(\"lots_type16\",\"5\", \"1,2,4\")\r\n        insertType(\"lots_type17\",\"6\", \"4\")\r\n        insertType(\"lots_type18\",\"6\", \"4\")\r\n        insertType(\"lots_type19\",\"6\", \"4\")\r\n        insertType(\"lots_type20\",\"6\", \"4\")\r\n        insertType(\"lots_type21\",\"6\", \"4\")\r\n        insertType(\"lots_type22\",\"7\", \"1,3,4\")\r\n        insertType(\"lots_type23\",\"7\", \"1,3,4\")\r\n        insertType(\"lots_type24\",\"7\", \"1,3,4\")\r\n        insertType(\"lots_type25\",\"7\", \"1,3,4\")\r\n        insertType(\"lots_type26\",\"7\", \"1,3,4\")\r\n        insertType(\"lots_type27\",\"8\", \"1,2,4\")\r\n        insertType(\"lots_type28\",\"9\", \"1,2,4\")\r\n        insertType(\"lots_type29\",\"10\", \"1,2,4\")\r\n        insertType(\"lots_type30\",\"10\", \"1,2,4\")\r\n        insertType(\"lots_type31\",\"10\", \"1,2,4\")\r\n        insertType(\"lots_type32\",\"10\", \"1,2,4\")\r\n        insertType(\"lots_type33\",\"11\", \"1,2,4\")\r\n        insertType(\"lots_type34\",\"11\", \"1,2,4\")\r\n        insertType(\"lots_type35\",\"11\", \"1,2,4\")\r\n        insertType(\"lots_type36\",\"12\", \"1,2,4\")\r\n        insertType(\"lots_type37\",\"12\", \"1,2,4\")\r\n        insertType(\"lots_type38\",\"12\", \"1,2,4\")\r\n        insertType(\"lots_type39\",\"13\", \"1,2,4\")\r\n        insertType(\"lots_type40\",\"13\", \"1,2,4\")\r\n        insertType(\"lots_type41\",\"13\", \"1,2,4\")\r\n        insertType(\"lots_type42\",\"13\", \"1,2,4\")\r\n        insertType(\"lots_type43\",\"13\", \"1,2,4\")\r\n        insertType(\"lots_type44\",\"13\", \"1,2,4\")\r\n        insertType(\"lots_type45\",\"13\", \"1,2,4\")\r\n\r\n    }\r\n}",
            "Name": "lots_InstallTypes",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract lots_SellerAction {\n    data {\n        Action string\n        Id string \"optional\"\n        TypeId int\n        Name string\n        Description string\n        Photo bytes \"file\"\n        DateStart string \"date\"\n        TimeStart string \"date\"\n        DateEnd string \"date\"\n        TimeEnd string \"date\"\n        AmountStarting money\n        OrderMin money\n        OrderMax money\n\n        Location string\n        Condition int\n\n        Count int\n        Weight string \"optional\"\n        WeightType string \"optional\"\n        Length string \"optional\"\n        Width string \"optional\"\n        Height string \"optional\"\n    }\n    func trimZeroTime(s string) string{\n        if Contains(s, \"T00:00:00Z\"){\n            s = s Replace(s, \"T00:00:00Z\", \"\")\n        }\n        return s\n    }\n    func appendAll(items ...)array{\n        return items\n    }\n    func notifyAdmin(lotId int){\n        var rid closureType sender int textHeader pageName string params map\n        closureType = 2\n        sender = 1\n        textHeader = \"Новый лот: требуется подтверждение\"\n        pageName = \"lots_view\"\n        params[\"lot_id\"] = lotId\n        params[\"lot_status\"] = 0\n        params = JSONEncode(params)\n        rid = 1\n        notifications_Send(\"rid,closure_type,sender,text_header,page_name,params_map\", rid, closureType, sender, textHeader, pageName, params)\n    }\n    conditions {\n        $Id = Int($Id)\n        if !($Action == \"create\" || $Action == \"edit\") {\n            warning \"Lot: unknown action\"\n        }\n        if $Action == \"create\" {\n            RoleConditions(\"role\", \"Seller\")\n        }else{\n            $lot = DBFind(\"lots\").Where(\"id=? and deleted=0\", $Id).Row()\n\n            if !$lot {\n                warning \"Lot not found\"\n            }\n            if $lot[\"status\"] > 0 {\n                warning \"You cannot edit a confirmed lot\"\n            }\n            if $lot[\"seller\"] != $key_id {\n                warning \"You are not owner of the lot\"\n            }\n\n        }\n        $Weight = Int($Weight)\n        $WeightType = Int($WeightType)\n        $Length = Int($Length)\n        $Width = Int($Width)\n        $Height = Int($Height)\n\n        if $OrderMin > $OrderMax {\n            warning \"Minimum order bigger than maximum order\"\n        }\n        $dateStart = Sprintf(\"%v %v\", trimZeroTime($DateStart), $TimeStart)\n        $dateEnd = Sprintf(\"%v %v\", trimZeroTime($DateEnd), $TimeEnd)\n        $catId = Int(DBFind(\"lots_types\").Where(\"id=?\", $TypeId).One(\"category\"))\n    }\n\n    action {\n        var appId imageId contractFileId int imageName string\n        appId = Int(DBFind(\"applications\").Where(\"name = $ AND deleted = 0\", \"Trading Platform\").One(\"id\"))\n        imageName = Sprintf(\"%v_%v\", $key_id, $time)\n        if $Id > 0 {\n            imageName = DBFind(\"binaries\").Where(\"id=?\", $lot[\"photo\"]).One(\"name\")\n        }\n        imageId = @1UploadBinary(\"ApplicationId,Name,Data\", appId, imageName, $Photo)\n        // TODO: contractFileId генерировать внутри\n        // contractFileId = @1UploadBinary(\"ApplicationId,Name,Data,DataMimeType\", appId, \"lot_contract\", \"application/pdf\")\n\n        var fields string args array id int\n        args = appendAll($Name, $Description, imageId, $dateStart, $dateEnd, $AmountStarting, $OrderMin, $OrderMax, contractFileId, $Count, $Weight, $WeightType, $Length, $Width, $Height, $TypeId, $catId, $Location, $Condition)\n        fields = \"name,description,photo,date_start,date_end,amount_starting,order_min,order_max,contract_id,unit_count,weight,weight_type,length,width,height,lots_type_id,category,location,condition\"\n        if $Action == \"create\"{\n            fields = Sprintf(\"%v,timestamp date_creation,seller\", fields)\n            args = Append(args,$block_time)\n            args = Append(args,$key_id)\n            id = DBInsert(\"lots\", fields, args...)\n            notifyAdmin(id)\n            return\n        }\n        if $Action == \"edit\"{\n            DBUpdate(\"lots\", $Id, fields, args...)\n            return\n        }\n    }\n}",
            "Name": "lots_SellerAction",
            "Type": "contracts"
        }
    ]
}