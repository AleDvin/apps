{
            "name": "Trading Platform",
            "data": [
                {
                "Type": "pages",
                "Name": "lots_edit",
                "Value": "Div(content-wrapper){\r\n\r\n    If(GetVar(id) != \"\"){\r\n        DBFind(lots, src_lots).Where(\"id = #id#\").Vars(\"lot\")\r\n        SetVar(lots_action, $lots_edit$)\r\n    }.Else{\r\n        SetVar(lots_action, $lots_create$)\r\n    }\r\n\r\n\r\n\r\n    SetTitle(#lots_action#)\r\n    Div(breadcrumb){\r\n        LinkPage($lots_list$, lots_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n        Span(Class: text-muted, Body: #lots_action#)\r\n    }\r\n\r\n    SetVar(amount_starting, Money(#lot_amount_starting#))\r\n    SetVar(amount_final, Money(#lot_amount_final#))\r\n    SetVar(order_min, Money(#lot_order_min#))\r\n    SetVar(order_max, Money(#lot_order_max#))\r\n    SetVar(date_start, DateTime(#lot_date_start#, MM.DD.YYYY))\r\n    SetVar(date_end, DateTime(#lot_date_end#, MM.DD.YYYY)) \r\n    \r\n    \r\n    Div(row){\r\n        Div(col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3){\r\n            Form(panel panel-primary){\r\n                Div(panel-heading, Body: #lots_action#)\r\n                Div(panel-body){\r\n                    If(GetVar(id) != \"\") {\r\n                        Input(Name: id, Class: hidden, Disabled: true, Value: #id#)\r\n                        Div(list-group-item){\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: name){\r\n                                        Span(Body: LangRes(lots_name))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: name, Value: #lot_name#)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: description){\r\n                                        Span(Body: LangRes(lots_description))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: description, Type: textarea, Value: #lot_description#)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: photo){\r\n                                        Span(Body: LangRes(photo))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: photo, Type: file)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: lots_contract){\r\n                                        Span(Body: LangRes(lots_contract))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: lot_contract, Type: file)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: date_start){\r\n                                        Span(Body: LangRes(lots_date_start))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: date_start, Type: date, Value: #date_start#)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: date_end){\r\n                                        Span(Body: LangRes(lots_date_end))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: date_end, Type: date, Value: #date_end#)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: amount_starting){\r\n                                        Span(Body: LangRes(amount_starting))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: amount_starting, Type: number, Value: #amount_starting#)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: amount_final){\r\n                                        Span(Body: LangRes(amount_final))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: amount_final, Type: number, Value: #amount_final#)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: order_min){\r\n                                        Span(Body: LangRes(order_min))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: order_min, Type: number, Value: #order_min#)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: order_max){\r\n                                        Span(Body: LangRes(order_max))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: order_max, Type: number, Value: #order_max#)\r\n                                }\r\n                            }\r\n                            \r\n                        }\r\n                    }.Else{\r\n                        Div(list-group-item){\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: name){\r\n                                        Span(Body: LangRes(lots_name))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: name)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: description){\r\n                                        Span(Body: LangRes(lots_description))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: description, Type: textarea)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: photo){\r\n                                        Span(Body: LangRes(photo))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: photo, Type: file)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-sm text-right){\r\n                                    Label(For: lots_contract){\r\n                                        Span(Body: LangRes(lots_contract))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: lot_contract, Type: file)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: date_start){\r\n                                        Span(Body: LangRes(lots_date_start))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: date_start, Type: date)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: date_end){\r\n                                        Span(Body: LangRes(lots_date_end))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: date_end, Type: date)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(list-group-item){\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: amount_starting){\r\n                                        Span(Body: LangRes(amount_starting))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: amount_starting, Type: number)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: amount_final){\r\n                                        Span(Body: LangRes(amount_final))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: amount_final, Type: number)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: order_min){\r\n                                        Span(Body: LangRes(order_min))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: order_min, Type: number)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-3 mt-lg text-right){\r\n                                    Label(For: order_max){\r\n                                        Span(Body: LangRes(order_max))\r\n                                    }\r\n                                }\r\n                                Div(col-md-9 mc-sm text-left){\r\n                                    Input(Name: order_max, Type: number)\r\n                                }\r\n                            }\r\n                            \r\n                        }\r\n                    }                  \r\n                }\r\n                Div(panel-footer text-right){\r\n                    If(GetVar(id) != \"\"){\r\n                        Button(Body: LangRes(save), Class: btn btn-primary, Contract: lots_Edit, Page: lots_list)\r\n                    }.Else{\r\n                        Button(Body: LangRes(create), Class: btn btn-primary, Contract: lots_Create, Page: lots_list)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
                "Conditions": "true",
                "Menu": "default_menu",
                "Title": "",
                "Trans": "",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "pages",
                "Name": "lots_list",
                "Value": "Div(content-wrapper){\r\n\r\n\tSetTitle($lots_list$)\r\n    Div(breadcrumb){\r\n        Span(Class: text-muted, Body: $lots_list$)\r\n    }\r\n\r\n    If(GetVar(isSearch) == 1){\r\n        If(GetVar(status_filter) != \"\"){\r\n            SetVar(Name: v_Where, Value: \"name='#v_Search#' and deleted = 0 and status = #status_filter#\")\r\n        }.Else{\r\n            SetVar(Name: v_Where, Value: \"name='#v_Search#' and deleted = 0\")\r\n        }\r\n    }.Else{\r\n        If(GetVar(status_filter) != \"\"){\r\n            SetVar(Name: v_Where, Value: \"deleted = 0 and status = #status_filter#\")\r\n        }.Else{\r\n            SetVar(Name: v_Where, Value: \"deleted = 0\")\r\n        }\r\n        SetVar(Name: v_Search, Value: \"\")\r\n    }\r\n\r\n    AddToolButton(Title: $lots_create$, Page: lots_edit, Icon: icon-plus)\r\n\r\n    Form(){\r\n        Div(clearfix){\r\n            Div(pull-right){\r\n                If(GetVar(isSearch) == 1) {\r\n\r\n                    If(GetVar(status_filter) != \"\"){\r\n                        Span(Button(Body: Em(Class: fa fa-times), Class: btn bg-danger, Page: lots_list, PageParams: \"isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                    If(#status_filter#==0){\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-start), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=0,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-start), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=0,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                    If(#status_filter#==1){\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-half), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=1,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-half), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=1,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                    If(#status_filter#==2){\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-end), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=2,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-end), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=2,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                    If(#status_filter#==3){\r\n                        Span(Button(Body: Em(Class: fa fa-check), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=3,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-check), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=3,isSearch=1,v_Search=#v_Search#\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                }.Else{\r\n\r\n                    If(GetVar(status_filter) != \"\"){\r\n                        Span(Button(Body: Em(Class: fa fa-times), Class: btn bg-danger, Page: lots_list)).Style(margin-right:5px;)\r\n                    }\r\n\r\n                \r\n                    If(#status_filter#==0){\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-start), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=0\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-start), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=0\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                    If(#status_filter#==1){\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-half), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=1\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-half), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=1\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                    If(#status_filter#==2){\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-end), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=2\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-hourglass-end), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=2\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                    If(#status_filter#==3){\r\n                        Span(Button(Body: Em(Class: fa fa-check), Class: btn bg-gray-lighter, Page: lots_list, PageParams: \"status_filter=3\")).Style(margin-right:5px;)\r\n                    }.Else{\r\n                        Span(Button(Body: Em(Class: fa fa-check), Class: btn bg-gray, Page: lots_list, PageParams: \"status_filter=3\")).Style(margin-right:5px;)\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    Form(panel panel-primary){\r\n        Div(panel-body){\r\n            Div(row){\r\n                Div(col-md-1 mt-sm text-right){\r\n                    Label(For: Search){\r\n                        Span(Body: Название)\r\n                    }\r\n                }\r\n                Div(col-md-11){\r\n                    Div(input-group){\r\n                        Input(Name: Search, Value: #v_Search#)\r\n                        Div(input-group-btn){\r\n                            Button(Body: Em(Class: fa fa-search), Class: btn btn-default, Page: lots_list, PageParams: \"isSearch=1,v_Search=Val(Search)\")\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            DBFind(roles, src_roles).Columns(\"role_name\").Where(\"id = #role_id#\").Vars(\"r\")\r\n            DBFind(applications, src_apps).Columns(\"id\").Where(\"name = 'Trading Platform' AND deleted = 0\").Vars(\"app\")\r\n\r\n            DBFind(lots, src_lots).Where(\"#v_Where#\").Custom(custom_name){\r\n               LinkPage(Class: text-primary h5 text-bold, Page: lots_view, PageParams: \"id=#id#\", Body: #name#) \r\n            }.Custom(custom_photo){\r\n                Image(Src: Binary().ById(#photo#)).Style(height: 100px; width: 100px)\r\n            }.Custom(custom_seller){\r\n                DBFind(Name: members, Source: src_member).Columns(\"id,member_name,image_id\").Where(\"id = #seller#\").Vars(\"m\")\r\n                LinkPage(Class: text-primary h5 text-bold, Page: profile_view, PageParams: \"v_member_id=#seller#\"){\r\n                    If(#m_image_id#>0){\r\n                        Image(Src: Binary().ById(#m_image_id#), Class: img-circle).Style(height: 30px;width: 30px; border: 1px solid #5A5D63; margin-right: 10px;)\r\n                        Span(#m_member_name#)\r\n                    }.Else{\r\n                        Div(){\r\n                            Span(Em(Class: fa icon-user fa-2x)).Style(margin-right:10px;)\r\n                            Span(#m_member_name#)\r\n                        }.Style(display:flex; align-items:center;)\r\n                    }\r\n                }\r\n            }.Custom(custom_date_creation){\r\n                DateTime(#date_creation#, DD.MM.YYYY)\r\n            }.Custom(custom_date_start){\r\n                DateTime(#date_start#, DD.MM.YYYY)\r\n            }.Custom(custom_date_end){\r\n                DateTime(#date_end#, DD.MM.YYYY)\r\n            }.Custom(custom_amount_starting){\r\n                Money(#amount_starting#)\r\n            }.Custom(custom_amount_final){\r\n                Money(#amount_final#)\r\n            }.Custom(custom_status){\r\n\r\n                SetVar(status_index, Calculate(Exp: #status# + 1, Type: int))\r\n                \r\n                If(#status_index# == 4){\r\n                    Span(Class: text-success, Body: AppParam(App: #app_id#, Name: \"lots_status\", Index: #status_index#))\r\n                }.Else{\r\n                    Span(Class: text-warning, Body: AppParam(App: #app_id#, Name: \"lots_status\", Index: #status_index#))\r\n                }\r\n            }.Custom(custom_actions){                \r\n                \r\n                If(And(#status# == 0, #r_role_name# == Buyer)){\r\n                    Button(Class: btn btn-primary, Body: $lots_subscribe$, Page: lots_list)\r\n                }\r\n                If(And(#status# > 0, #r_role_name# == Buyer)){\r\n                    Button(Class: btn btn-primary, Body: $lots_bid$, Page: lots_list)\r\n                }\r\n                If(And(And(#seller# == #key_id#, #r_role_name# == Seller), #status# == 0)){\r\n                    Div(pull-right){\r\n                        Button(Class: btn btn-default, Body: Em(Class: fa fa-edit), Page: lots_edit, PageParams: \"id=#id#\").Style(margin-right:15px;)\r\n                        Button(Class: btn btn-danger, Body: Em(Class: fa fa-trash), Page: lots_list, Contract: lots_Delete, Params: \"lot_id=#id#\").Alert($lots_delete_auction$, $lots_yes$, $lots_no$)\r\n                    }\r\n                }\r\n            }\r\n\t\t\t\r\n            Div(row){\r\n                Div(col-md-12){\r\n                    Table(Source: src_lots, Columns: \"ID=id,$lots_name$=custom_name,$photo$=custom_photo,$seller$=custom_seller,$date_creation$=custom_date_creation,$lots_date_start$=custom_date_start,$lots_date_end$=custom_date_end,$amount_starting$=custom_amount_starting,$amount_final$=custom_amount_final,$lots_status$=custom_status,=custom_actions\")\r\n                }\r\n            }\r\n\t\t\t\r\n            If(GetVar(isSearch) == 1){\r\n                Div(row){\r\n                    Div(col-md-12 mt-lg){\r\n                        Div(text-center){\r\n                            Button(Body: Показать все, Class: btn btn-primary, Page: lots_list, PageParams: \"isSearch=0\")\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
                "Conditions": "true",
                "Menu": "default_menu",
                "Title": "",
                "Trans": "",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "contracts",
                "Name": "lots_Create",
                "Value": "contract lots_Create {\r\n    data {\r\n        name string\r\n        description string\r\n        photo bytes \"file\"\r\n        lot_contract bytes \"file\"\r\n        date_start string \"date\"\r\n        date_end string \"date\"\r\n        amount_starting money\r\n        amount_final money\r\n        order_min money\r\n        order_max money\r\n\r\n    }\r\n\r\n    conditions {\r\n        RoleConditions(\"role\", \"Seller\")\r\n\r\n        if $order_min > $order_max {\r\n            warning \"Minimum order bigger than maximum order\"\r\n        }\r\n    }\r\n\r\n    action {\r\n\r\n        var app_id int\r\n        app_id = DBFind(\"applications\").Where(\"name = $ AND deleted = 0\", \"Trading Platform\").One(\"id\")\r\n\r\n        var image_id int\r\n        image_id = @1UploadBinary(\"Name,Data,ApplicationId\", \"lot_photo\", $photo, Int(app_id))\r\n\r\n        var contract_file_id int\r\n        contract_file_id = @1UploadBinary(\"Name,Data,ApplicationId\", \"lot_contract\", $lot_contract, Int(app_id))\r\n\r\n\r\n        DBInsert(\"lots\", \"name,description,photo,timestamp date_creation,date_start,date_end,amount_starting,amount_final,seller,order_min,order_max,contract_id\", $name, $description, image_id, $block_time, $date_start, $date_end, $amount_starting, $amount_final, $key_id, $order_min, $order_max, contract_file_id)\r\n\r\n    }\r\n}",
                "Conditions": "true",
                "Menu": "",
                "Title": "",
                "Trans": "",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "contracts",
                "Name": "lots_Delete",
                "Value": "contract lots_Delete {\r\n    data {\r\n        lot_id int\r\n    }\r\n\r\n    conditions {\r\n        $lot = DBFind(\"lots\").Where(\"id = ?\", $lot_id).Row()\r\n\r\n        if $lot[\"status\"] > 0 {\r\n            warning \"Bidding has already begun\"\r\n        }\r\n    }\r\n\r\n    action {\r\n        DBUpdate(\"lots\", $lot_id, \"deleted\", 1)\r\n    }\r\n}",
                "Conditions": "true",
                "Menu": "",
                "Title": "",
                "Trans": "",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "contracts",
                "Name": "lots_Edit",
                "Value": "contract lots_Edit {\r\n    data {\r\n        id int\r\n        name string\r\n        description string\r\n        photo bytes \"file\"\r\n        lot_contract bytes \"file\"\r\n        date_start string\r\n        date_end string\r\n        amount_starting money\r\n        amount_final money\r\n        order_min money\r\n        order_max money\r\n\r\n    }\r\n\r\n    conditions {\r\n        $lot = DBFind(\"lots\").Where(\"id = ?\", $id).Row()\r\n\r\n        \r\n\r\n        if $lot[\"deleted\"] > 0 {\r\n            warning \"Lot deleted\"\r\n        }\r\n\r\n        if $lot[\"status\"] > 0 {\r\n            warning \"Bidding has already begun\"\r\n        }\r\n\r\n        if $lot[\"seller\"] != $key_id {\r\n            warning \"You are not seller of the lot\"\r\n        }        \r\n    }\r\n\r\n    action {\r\n        var app_id int\r\n        app_id = DBFind(\"applications\").Where(\"name = $ AND deleted = 0\", \"Trading Platform\").One(\"id\")\r\n        \r\n        var image_id int\r\n        image_id = @1UploadBinary(\"Name,Data,ApplicationId\", \"lot_photo\", $photo, Int(app_id))\r\n\r\n        var contract_file_id int\r\n        contract_file_id = @1UploadBinary(\"Name,Data,ApplicationId\", \"lot_contract\", $lot_contract, Int(app_id))\r\n\r\n        \r\n        DBUpdate(\"lots\", $id, \"name,description,photo,date_start,date_end,amount_starting,amount_final,order_min,order_max,contract_id\", $name, $description, image_id, $date_start, $date_end, $amount_starting, $amount_final, $order_min, $order_max, contract_file_id)\r\n    }\r\n}",
                "Conditions": "true",
                "Menu": "",
                "Title": "",
                "Trans": "",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_waiting_for_start",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Ожидание начала торгов\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_bidding",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Идут торги\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_waiting_for_sign",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Торги завершены, ожидание подписи\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_signed",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Торги завершены, подпись получена\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_subscribe",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Подписаться\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_bid",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Сделать ставку\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_delete_auction",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Вы действительно хотите удалить аукцион?\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_name",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Название\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "photo",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Фото\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "seller",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Продавец\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "date_creation",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Дата создания\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_date_start",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Дата начала торгов\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_date_end",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Дата окончания торгов\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "buyer",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Покупатель\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_status",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Статус\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_list",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Список лотов\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_create",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Создать лот\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_description",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Описание\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "amount_starting",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Стартовая сумма\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_contract",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Договор\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "amount_final",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Конечная сумма\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "order_min",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Минимальная ставка\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "order_max",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Максимальная ставка\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_yes",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Да\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_no",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Нет\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "languages",
                "Name": "lots_edit",
                "Value": "",
                "Conditions": "",
                "Menu": "",
                "Title": "",
                "Trans": "{\"ru\":\"Редактирование лота\"}",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "app_params",
                "Name": "lots_status",
                "Value": "lots_waiting_for_start,lots_bidding,lots_waiting_for_sign,lots_signed",
                "Conditions": "true",
                "Menu": "",
                "Title": "",
                "Trans": "",
                "Columns": "",
                "Permissions": ""
            },
{
                "Type": "tables",
                "Name": "lots",
                "Value": "",
                "Conditions": "ContractAccess(\"@1EditTable\")",
                "Menu": "",
                "Title": "",
                "Trans": "",
                "Columns": "[{\"conditions\":\"true\",\"name\":\"order_max\",\"type\":\"money\"},{\"conditions\":\"true\",\"name\":\"order_min\",\"type\":\"money\"},{\"conditions\":\"true\",\"name\":\"seller\",\"type\":\"number\"},{\"conditions\":\"true\",\"name\":\"status\",\"type\":\"number\"},{\"conditions\":\"true\",\"name\":\"contract_id\",\"type\":\"number\"},{\"conditions\":\"true\",\"name\":\"amount_final\",\"type\":\"money\"},{\"conditions\":\"true\",\"name\":\"buyer\",\"type\":\"number\"},{\"conditions\":\"true\",\"name\":\"date_start\",\"type\":\"datetime\"},{\"conditions\":\"true\",\"name\":\"date_end\",\"type\":\"datetime\"},{\"conditions\":\"true\",\"name\":\"amount_max\",\"type\":\"money\"},{\"conditions\":\"true\",\"name\":\"description\",\"type\":\"text\"},{\"conditions\":\"true\",\"name\":\"date_creation\",\"type\":\"datetime\"},{\"conditions\":\"true\",\"name\":\"amount_starting\",\"type\":\"money\"},{\"conditions\":\"true\",\"name\":\"name\",\"type\":\"text\"},{\"conditions\":\"true\",\"name\":\"photo\",\"type\":\"number\"},{\"conditions\":\"true\",\"name\":\"deleted\",\"type\":\"number\"}]",
                "Permissions": "{\"insert\": \"ContractConditions(\\\"MainCondition\\\")\", \"update\": \"ContractConditions(\\\"MainCondition\\\")\", \"new_column\": \"ContractConditions(\\\"MainCondition\\\")\"}"
            },
{
                "Type": "tables",
                "Name": "buyers",
                "Value": "",
                "Conditions": "ContractAccess(\"@1EditTable\")",
                "Menu": "",
                "Title": "",
                "Trans": "",
                "Columns": "[{\"conditions\":\"true\",\"name\":\"amount\",\"type\":\"money\"},{\"conditions\":\"true\",\"name\":\"lot_id\",\"type\":\"number\"},{\"conditions\":\"true\",\"name\":\"buyer_id\",\"type\":\"number\"}]",
                "Permissions": "{\"insert\": \"ContractConditions(\\\"MainCondition\\\")\", \"update\": \"ContractConditions(\\\"MainCondition\\\")\", \"new_column\": \"ContractConditions(\\\"MainCondition\\\")\"}"
            },
{
                "Type": "menu",
                "Name": "default_menu",
                "Value": "\nMenuItem(Title:$profile$, Page:profile_view, Icon:\"fa icon-user\")\nMenuItem(Title:$membership$, Page:members_list, Icon:\"fa icon-people\")\nMenuGroup(Title:$notifications$, Icon:\"icon-arrow-right\"){\n    MenuItem(Title:$single_notifics$, Page:notifications_single, Icon:\"fa fa-bell-o\")\n    MenuItem(Title:$role_notifics$, Page:notifications_roles, Icon:\"fa fa-bullhorn\")\n    MenuItem(Title:$test_page$, Page:notifications_testpage, Icon:\"icon-settings\")\n}\nMenuItem(Title:$roles$, Page:roles_list, Icon:\"fa fa-list-ul\")\nMenuGroup(Title:$voting$, Icon:\"icon-arrow-right\"){\n    MenuItem(Title:$voting$, Page:voting_list, Icon:\"fa fa-edit\")\n}\nMenuItem(Title: $catalog_ecosystems$, Page: catalog_ecosystems, Icon:\"fa fa-book\")\r\nMenuItem(Title:$voting_templates$, Page:voting_templates, Icon:\"fa icon-pin\")\r\nMenuGroup(Title:$admin$, Icon:\"icon-arrow-right\"){\r\n    MenuItem(Title: $sysparams_list$,Page:sysparams_list, Icon:\"fa icon-settings\")\r\n    MenuItem(Title:$sysparams_candidates$, Page:sysparams_candidates, Icon:\"icon-list\")\r\n    MenuItem(Title:$sysparams_ecos$, Page:sysparams_ecos, Icon:\"icon-list\")\r\n    MenuItem(Title:$tokenrefund_list$, Page:tokenrefund_list, Icon:\"icon-list\")\r\n    MenuItem(Title:$tokens_transfer$, Page:tokens_transfer, Icon:\"icon-credit-card\")\r\n\tMenuItem(Title:$new_ecosystem$, Page:ecosystem_new, Icon:\"icon-globe\")\r\n\tMenuItem(Title:$request_membership$, Page:membership_ecosystems, Icon:\"icon-list\")\r\n}",
                "Conditions": "ContractAccess(\"@1EditMenu\")",
                "Menu": "",
                "Title": "default",
                "Trans": "",
                "Columns": "",
                "Permissions": ""
            }
            ]
        }