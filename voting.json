{
    "blocks": [],
    "contracts": [
        {
            "Name": "voting_UpdateDataForGraphs",
            "Value": "contract voting_UpdateDataForGraphs {\n    data {\n        votingID int\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=$\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting is not found\"\n\t\t}\t\n\t\t\n\t\t$number_participants = Int($voting_map[\"number_participants\"])  // number of participants\n\t\t$number_voters       = Int($voting_map[\"number_voters\"])        // number of voters\n\t\t$volume              = Int($voting_map[\"volume\"])               // percentage of votes for this vote\n    }\n\n    action {\n\t\t// increment count of voters\n\t\t$number_voters = $number_voters + 1\n\t\t\n\t\t// calculate the percentage of the ratio of the number of voters to the number of participants (for the graph)\n\t\t$percent_voters = ($number_voters * 100) / $number_participants\n\t\tif ($percent_voters \u003e 100) {$percent_voters = 100}\n\t\t\n\t\t// update progress\n\t\t$percent_success = ($percent_voters * 100) / $volume\n\t\tif ($percent_success \u003e 100) {$percent_success = 100}\n\t\t\n\t\t// update the flag of success\n\t\t$flag_success = 0\n\t\tif ($percent_success == 100) {$flag_success = 1}\n\n\t\tDBUpdate(`voting_instances`, $votingID, `number_voters,percent_voters,percent_success,flag_success`, \n\t\t\t\t$number_voters, $percent_voters, $percent_success, $flag_success)\n    } \n}",
            "Conditions": "ContractConditions(`MainCondition`)"
        },
        {
            "Name": "voting_RejectDecision",
            "Value": "contract voting_RejectDecision {\n    data {\n        votingID int\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=$\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting is not found\"\n\t\t}\n\t\t\n\t\t// check the participant of the voting\n\t\t$participant_id = DBFind(`voting_participants`).Where(\"voting_id=$ and member_id=$\", $votingID, $key_id).One(\"id\")\n\t\tif ($participant_id == nil){\n\t\t\twarning \"You are not a participant in this voting\"\n\t\t}\n    }\n\n    action {\n\t\t// if notifications have been sent, then close it\n\t\tif ( Int($voting_map[\"flag_notifics\"]) == 1 ){\n\t\t\tvar params string\n\t\t\tparams = \"notific_param=\" + Str($votingID)\t\n\t\t\t$notific_id = DBFind(`notifications`).Where(\"recipient_id=$ and page_name=$ and page_params=$ and closed=$\", $key_id, \"voting_view\", params, 0).One(\"id\")\n\t\t\tif ($notific_id != nil){\n\t\t\t\tNotifications_Single_Close(\"notific_id\", Int($notific_id))\n\t\t\t}\n\t\t}\n\n\t\t// check the decision\n\t\tif ( Int($voting_map[\"flag_decision\"]) == 1 ){\n\t\t\twarning \"Decision was taken. Voting is now not possible\"\n\t\t} \n\t\t\n\t\t// check start-end of voting time\n\t\t$voting_start = DBFind(`voting_instances`).Where(\"id=$ and startdate \u003c now()\", $votingID).One(\"id\")\n\t\t$voting_end   = DBFind(`voting_instances`).Where(\"id=$ and enddate   \u003e now()\", $votingID).One(\"id\")\n\t\tif ($voting_start == nil){\n\t\t\twarning \"Voting has not yet begun. Try again later, please\"\n\t\t}\n\t\tif ($voting_end == nil){\n\t\t\twarning \"Voting has expired. Voting is now not possible\"\n\t\t}\n\t\t\n\t\t//-----------------------------------------------------------------------------------------------\n\n\t\t// write the result of the voting\n\t\tDBUpdate(`voting_participants`, Int($participant_id), `timestamp decision_date, decision`, $block_time, -1)\n\n\t\tvoting_UpdateDataForGraphs(\"votingID\", $votingID)\n    }\n}",
            "Conditions": "ContractConditions(`MainCondition`)"
        },
        {
            "Name": "voting_CheckDecision",
            "Value": "contract voting_CheckDecision {\n    func stringToMap(s string) map{\n        var arr, par array\n        var i int\n        var res map\n        arr = Split(s, \";\")\n        while i \u003c Len(arr){\n            par = Split(arr[i], \"-\u003e\")\n            if Len(par) == 2{\n                res[par[0]] = par[1]\n            }\n            i=i+1\n        }\n        return res\n    }\n    data {\n        votingID int\n    }\n    \n    conditions {\n        $voting_map = DBFind(\"voting_instances\").Where(\"id=$ and enddate \u003c now()\", $votingID).Row()\n        if($voting_map[\"id\"] == nil){\n            warning \"Voting has not expired. Try again later, please\"\n        }\n        if(Int($voting_map[\"creator_id\"]) != $key_id){\n            warning \"Only creator the voting can check decision\"\n        }\n        \n        $type_voting = Int($voting_map[\"type_voting\"])\t// type of voting - system or custom\n        $number_voters = Int($voting_map[\"number_voters\"]) // number of participants who have already voted\n        $optional_role_vacancies = Int($voting_map[\"optional_role_vacancies\"]) // number of vacancies for the role\n        $voting_name = string($voting_map[\"name\"]) // voting name\n        $quorum = Int($voting_map[\"quorum\"]) // quorum value\n        $optional_role_id = Int($voting_map[\"optional_role_id\"]) // role id\n        $contract_accept = $voting_map[\"optional_contract_accept\"] // contract accept\n        $contract_reject = $voting_map[\"optional_contract_reject\"] // contract reject\n        $param_accept = stringToMap($voting_map[\"contract_accept_params\"])\n        $param_reject = stringToMap($voting_map[\"contract_reject_params\"])\n        $flag_success = Int($voting_map[\"flag_success\"])\t// flag of success\n        $typedecision = Int($voting_map[\"typedecision\"])\t// type of decision\n        \n        $chech_id = DBFind(\"voting_subject\").Where(\"voting_id=$\", $votingID).One(\"id\")\n        if($chech_id == nil){\n            warning \"Subject of voting is not found\"\n        }\n    }\n    \n    action {\n        // if notifications have been sent, then close it\n        var params string\n        params = \"notific_param=\" + Str($votingID)\n        $ret_notifics = DBFind(\"notifications\").Where(\"page_name=$ and page_params=$ and closed=0\", \"voting_view\", params)\n        var i int\n        while(i \u003c Len($ret_notifics)){\n            $vals_notifics = $ret_notifics[i]\n            Notifications_Single_Close(\"notific_id\", Int($vals_notifics[\"id\"]))\n            i = i + 1\n        }\n        \n        //if the flag of success = true(enough participants to make a decision)\n        if($flag_success == 1){\n            if(($typedecision == 1) ||($typedecision == 2) ){\n                $number_inserts = 0 // number of candidates who have already been added(for comparison with the number of vacancies)\n                $flag_decision = -1 // none of the candidates has been added yet\n                \n                $ret_subject = DBFind(\"voting_subject\").Where(\"voting_id=$\", $votingID).Order(\"number_accept DESC\")\n                i = 0\n                while i \u003c Len($ret_subject){\n                    $vals_subject = $ret_subject[i]\n                    \n                    // if there are still vacancies\n                    if $number_inserts \u003c $optional_role_vacancies {\n                        // calculate the percentage to compare it with the quorum\n                        $v_percent = Int($vals_subject[\"number_accept\"]) * 100 / $number_voters\n                        // if percentage \u003e= quorum values, then this candidate must be added to the role\n                        if $v_percent \u003e= $quorum {\n                            // get role name\n                            $role_name = DBFind(`roles_list`).Where(\"id=$\", $optional_role_id).One(\"role_name\")\n                            if $role_name != nil {\n                                // add a candidate to the role\n                                DBInsert(`roles_assign`, `role_id,role_name,member_id,member_name,member_avatar,timestamp date_start,appointed_by_id,appointed_by_name`,$optional_role_id, string($role_name), Int($vals_subject[\"member_id\"]), string($vals_subject[\"member_name\"]), string($vals_subject[\"member_avatar\"]), $block_time, $votingID, $voting_name)\n                                \n                                // increment of the counter of candidates\n                                $number_inserts = $number_inserts + 1\n                                // if at least one of the candidates was added to the role, then the voting decision is considered successful\n                                $flag_decision = 1\n                            }\n                        }\n                    }\n                    i = i + 1\n                }\n                \n                DBUpdate(`voting_instances`, $votingID, `flag_decision`, $flag_decision)\n                \n                // starting optional contract\n                if($flag_decision == 1){\n                    if($contract_accept != \"\"){\n                        CallContract($contract_accept, $param_accept)\n                    }\n                }\n                else{\n                    if($contract_reject != \"\"){\n                        CallContract($contract_reject, $param_reject)\n                    }\n                }\n            }\n            \n            if($typedecision == 3){\n                $number_accept = DBFind(`voting_subject`).Where(\"voting_id=$\", $votingID).One(\"number_accept\")\n                if($number_accept != nil){\n                    // calculate the percentage to compare it with the quorum\n                    $v_percent = Int($number_accept) * 100 / $number_voters\n                    \n                    // if percentage \u003e= quorum values, then this document will be approved\n                    if($v_percent \u003e= $quorum){\n                        $flag_decision = 1\n                    }\n                    // otherwise the document will be rejected\n                    else{\n                        $flag_decision = -1\n                    }\n                    \n                    DBUpdate(`voting_instances`, $votingID, `flag_decision`, $flag_decision)\n                    \n                    // starting optional contract\n                    if($flag_decision == 1){\n                        if($contract_accept != \"\"){\n                            CallContract($contract_accept, $param_accept)\n                        }\n                    }\n                    else{\n                        if($contract_reject != \"\"){\n                            CallContract($contract_reject, $param_reject)\n                        }\n                    }\n                }\n            }\n            \n            if($typedecision == 4){\n                $subject_map = DBFind(\"voting_subject\").Where(\"voting_id=$\", $votingID).Row()\n                if($subject_map[\"id\"] != nil){\n                    $number_accept = Int($subject_map[\"number_accept\"])\n                    \n                    // calculate the percentage to compare it with the quorum\n                    $v_percent = $number_accept * 100 / $number_voters\n                    \n                    // if percentage \u003e= quorum values, then this document will be approved\n                    if($v_percent \u003e= $quorum){\n                        $flag_decision = 1\n                        \n                        $decisionTable = $subject_map[\"formal_decision_table\"]\n                        $decisionId = Int($subject_map[\"formal_decision_tableid\"])\n                        $decisionColumn =$subject_map[\"formal_decision_column\"]\n                        $decisionValue = $subject_map[\"formal_decision_colvalue\"]\n                        \n                        // type of voting - custom\n                        if($type_voting == 1){\n                            // ALWAYS CHECK THE PERMISSION\n                            DBUpdate($decisionTable, $decisionId, $decisionColumn, $decisionValue)\n                        }\n                        \n                        // type of voting - system\n                        if($type_voting == 2){\n                            DBUpdateSysParam($decisionColumn, $decisionValue, ``)\n                        }\n                    }\n                    // otherwise the document will be rejected\n                    else{\n                        $flag_decision = -1\n                    }\n                    \n                    DBUpdate(`voting_instances`, $votingID, `flag_decision`, $flag_decision)\n                    \n                    // starting optional contract\n                    if($flag_decision == 1){\n                        if($contract_accept != \"\"){\n                            CallContract($contract_accept, $param_accept)\n                        }\n                    }\n                    else{\n                        if($contract_reject != \"\"){\n                            CallContract($contract_reject, $param_reject)\n                        }\n                    }\n                }\n            }\n            \n            if($typedecision == 5){\n                $subject_map = DBFind(\"voting_subject\").Where(\"voting_id=$\", $votingID).Row()\n                if($subject_map[\"id\"] != nil){\n                    $number_accept = Int($subject_map[\"number_accept\"])\n                    \n                    // calculate the percentage to compare it with the quorum\n                    $v_percent = $number_accept * 100 / $number_voters\n                    \n                    $con_accept = $subject_map[\"contract_accept\"]\n                    $con_accept = $subject_map[\"contract_accept\"]\n                    $param_accept = stringToMap($subject_map[\"contract_accept_params\"])\n                    $param_reject = stringToMap($subject_map[\"contract_reject_params\"])\n                    \n                    // if percentage \u003e= quorum values, then this document will be approved\n                    if($v_percent \u003e= $quorum){\n                        $flag_decision = 1\n                        \n                        CallContract($con_accept, $param_accept)\n                    }\n                    // otherwise the document will be rejected\n                    else{\n                        $flag_decision = -1\n                        \n                        CallContract($con_reject, $param_reject)\n                    }\n                }\n                \n                DBUpdate(`voting_instances`, $votingID, `flag_decision`, $flag_decision)\n            }\n        }\n        // decision can not be made(not enough participants to make a decision)\n        else {\n            DBUpdate(`voting_instances`, $votingID, `flag_decision`, -2)\n        }\n    }\n}",
            "Conditions": "ContractConditions(`MainCondition`)"
        },
        {
            "Name": "voting_Invite",
            "Value": "contract voting_Invite {\n    data {\n        votingID int\n        var_id int      //0, member_id, role_id\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=$ and enddate \u003e now()\", $votingID).Row()\t\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting has expired. Can not add new participants\"\n\t\t}\n\t\n\t\t$type_participants = Int($voting_map[\"typeparticipants\"])\n\t\t$number_participants = Int($voting_map[\"number_participants\"])\n\t\n\t\tif (($number_participants \u003e 1) \u0026\u0026 (Int($voting_map[\"type_voting\"]) == 2)){\n\t\t\twarning \"This vote is a system. Add new participants are not possible\"\n\t\t}\n\n\t\tif ($type_participants == 2){       //list of candidates\n\t\t\t$participant_id = DBFind(\"voting_participants\").Where(\"voting_id=$ and member_id=$\", $votingID, $var_id).One(\"id\")\n\t\t\tif ($participant_id != nil){\t\t\n\t\t\t\twarning \"Member has already been added before\"\n\t\t\t}\n\t\t}\n\n\t\tif ($type_participants == 3){       //list of candidates\n\t\t\t$participant_id = DBFind(\"voting_participants\").Where(\"voting_id=$\", $votingID).One(\"id\")\n\t\t\tif ($participant_id != nil){\t\t\n\t\t\t\twarning \"Voting participants have already been added before\"\n\t\t\t}\n\t\t}\n    }\n\n    action {\n\t\tif ($type_participants == 1){\n\t\t\t$ret_member = DBFind(\"member\").Where(\"id != $\", 0).Order(\"id\")\n\t\t\t$i = 0\n\t\t\twhile($i \u003c Len($ret_member)){\n\t\t\t\t$vals_member = $ret_member[$i]\n\t\t\t\t\n\t\t\t\tDBInsert(`voting_participants`, `voting_id, member_id, member_name, member_avatar, decision`, $votingID, $vals_member[\"id\"], $vals_member[\"member_name\"], $vals_member[\"avatar\"], 0)  \n\t\t\t\t$number_participants = $number_participants + 1\n\t\t\t\t$i = $i + 1\n\t\t\t} \n\t\t}\n\n\t\tif ($type_participants == 2){\n\t\t\t$member_map = DBFind(\"member\").Where(\"id = $\", $var_id).Row()\n\t\t\tif ($member_map[\"id\"] != nil){\n\t\t\t\tDBInsert(`voting_participants`, `voting_id, member_id, member_name, member_avatar, decision`, $votingID, $var_id, $member_map[\"member_name\"], $member_map[\"avatar\"], 0)  \n\t\t\t\t$number_participants = $number_participants + 1\n\t\t\t}\n\t\t}\n\n\t\tif ($type_participants == 3){\n\t\t\t$ret_member = DBFind(\"roles_assign\").Columns(\"member_id,member_name,member_avatar\").Where(\"role_id=$ and delete=0\", $var_id).Order(\"id\")\n\t\t\t$i = 0\n\t\t\twhile($i \u003c Len($ret_member)){\n\t\t\t\t$vals_member = $ret_member[$i]\n\t\t\t\t\n\t\t\t\tDBInsert(`voting_participants`, `voting_id, member_id, member_name, member_avatar, decision`, $votingID, $vals_member[\"member_id\"], $vals_member[\"member_name\"], $vals_member[\"member_avatar\"], 0)  \n\t\t\t\t$number_participants = $number_participants + 1\n\t\t\t\t$i = $i + 1\n\t\t\t} \n\t\t}\n\n\t\tDBUpdate(`voting_instances`, $votingID, `number_participants`, $number_participants)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_Delete",
            "Value": "contract voting_Delete {\n    data {\n        votingID int\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=? and startdate \u003e now()\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting already started. Delete voting impossible\"\n\t\t}\t\n\t\t\n\t\tif (Int($voting_map[\"creator_id\"]) != $key_id){\n\t\t\twarning \"You are not the creator of the voting\"\n\t\t}\n    }\n\n    action {\n\t\tDBUpdate(`voting_instances`, $votingID, `delete`, 1)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_CreateNew",
            "Value": "contract voting_CreateNew {\n    data {\n        voting_name string\n        type_voting int\n        description string\n        type_participants int\n        type_decision int\n        now_date string \"date\"\n        start_time string \"date\"\n        start_date string \"date\"\n        end_date string \"date\"\n        end_time string \"date\"\n        volume int\n        quorum int\n    }\n\n    func conditions {\n        $start_date = $start_date + \" \"+ $start_time \n        $end_date = $end_date + \" \"+ $end_time \n\n        if ( $now_date \u003e= $start_date ){\n            warning \"Voting start date is less than the current date\"\n        }\n        \n        if ( $start_date \u003e= $end_date ){\n            warning \"Voting end date is less than the start date\"\n        }\n        \n        if ( ($volume \u003c 50) || ($volume \u003e 100) ){\n            warning \"Volume should be in the range from 50 to 100\"  \n        }\n        \n        if ( ($quorum \u003c 5) || ($quorum \u003e 100) ){\n            warning \"Quorum should be in the range from 5 to 100\"  \n        }\n\n\t\t$member_map = DBFind(\"member\").Where(\"id=$\", $key_id).Row()\n\t\tif ($member_map[\"id\"] == nil){\n\t\t\twarning \"You are not a member of the ecosystem\"\n\t\t}\n    }\n\n    func action {\n\t\t$voting_id = DBInsert(`voting_instances`, `name,type_voting,description,typeparticipants,typedecision,startdate,enddate,volume,quorum,creator_id,creator_name,creator_avatar,flag_success,percent_success,number_participants,number_voters,flag_decision,flag_notifics,delete`, \n\t\t\t\t\t$voting_name, $type_voting, $description, $type_participants, $type_decision, $start_date, $end_date, $volume, $quorum, $key_id, $member_map[\"member_name\"], $member_map[\"avatar\"], 0, 0, 0, 0, 0, 0, 0)\n\t\n\t\t// if all members are voting participants\n\t\tif ($type_participants==1){\n\t\t\tvoting_Invite(\"votingID,var_id\", $voting_id, 0)\n\t\t}\n\t}\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_AcceptDecision",
            "Value": "contract voting_AcceptDecision {\n    data {\n        votingID int\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=$\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting is not found\"\n\t\t}\n\t\t$subject_map = DBFind(\"voting_subject\").Where(\"voting_id=$\", $votingID).Row()\n\t\tif ($subject_map[\"id\"] == nil){\n\t\t\twarning \"Subject of voting is not found\"\n\t\t}\n\t\t\n\t\t// check the participant of the voting\n\t\t$participant_id = DBFind(`voting_participants`).Where(\"voting_id=$ and member_id=$\", $votingID, $key_id).One(\"id\")\n\t\tif ($participant_id == nil){\n\t\t\twarning \"You are not a participant in this voting\"\n\t\t}\n    }\n\n    action {\n\t\t// if notifications have been sent, then close it\n\t\tif ( Int($voting_map[\"flag_notifics\"]) == 1 ){\n\t\t\tvar params string\n\t\t\tparams = \"notific_param=\" + Str($votingID)\t\n\t\t\t$notific_id = DBFind(`notifications`).Where(\"recipient_id=$ and page_name=$ and page_params=$ and closed=$\", $key_id, \"voting_view\", params, 0).One(\"id\")\n\t\t\tif ($notific_id != nil){\n\t\t\t\tNotifications_Single_Close(\"notific_id\", Int($notific_id))\n\t\t\t}\n\t\t}\n\n\t\t// check the decision\n\t\tif ( Int($voting_map[\"flag_decision\"]) == 1 ){\n\t\t\twarning \"Decision was taken. Voting is now not possible\"\n\t\t} \n\t\t\n\t\t// check start-end of voting time\n\t\t$voting_start = DBFind(`voting_instances`).Where(\"id=$ and startdate \u003c now()\", $votingID).One(\"id\")\n\t\t$voting_end   = DBFind(`voting_instances`).Where(\"id=$ and enddate   \u003e now()\", $votingID).One(\"id\")\n\t\tif ($voting_start == nil){\n\t\t\twarning \"Voting has not yet begun. Try again later, please\"\n\t\t}\n\t\tif ($voting_end == nil){\n\t\t\twarning \"Voting has expired. Voting is now not possible\"\n\t\t}\n\t\t\n\t\t//-----------------------------------------------------------------------------------------------\n\n\t\t// write the result of the voting\n\t\tDBUpdate(`voting_participants`, Int($participant_id), `timestamp decision_date, decision`, $block_time, 1)\n\n\t\t// increment count of accept\n\t\t$subject_id     = Int($subject_map[\"id\"])\n\t\t$number_accept  = Int($subject_map[\"number_accept\"])\n\t\t$number_accept   = $number_accept + 1\n\t\tDBUpdate(`voting_subject`, $subject_id, `number_accept`, $number_accept)\n\n\t\tvoting_UpdateDataForGraphs(\"votingID\", $votingID)\n    }\n}",
            "Conditions": "ContractConditions(`MainCondition`)"
        },
        {
            "Name": "voting_SendNotifics",
            "Value": "contract voting_SendNotifics {\n    data {\n        votingID int\n    }\n\n    conditions {\n\t\t$voting_id = DBFind(`voting_instances`).Where(\"id=$ and enddate \u003e now()\", $votingID).One(\"id\")\n        if ($voting_id == nil){\n\t\t\twarning \"Voting has expired. Notifications can not be sent\"\n\t\t}\n\t\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=$ and startdate \u003c now()\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting has not yet begun. Try again later, please\"\n\t\t}\t\n\t\t\n\t\tif( Int($voting_map[\"creator_id\"]) != $key_id ){\n\t\t\twarning \"You are not the creator of the voting\"\n\t\t}\n\t\tif( Int($voting_map[\"flag_notifics\"]) == 1 ){\n\t\t\twarning \"Notifications have already been sent\"\n\t\t}\n\t\t\n\t\t$voting_name = string($voting_map[\"name\"])\n    }\n\n    action {\n\t\t$ret_participants = DBFind(\"voting_participants\").Where(\"voting_id=$ and decision=$\", $votingID, 0)\n\t\t$i = 0\n\t\twhile($i \u003c Len($ret_participants)){\n\t\t\t$vals_participants = $ret_participants[$i]\n\t\t\t$recipient = Int($vals_participants[\"member_id\"])\n\t\t\t\n\t\t\tvar params string\n\t\t\tparams = \"notific_param=\" + Str($votingID)\n\t\t\t\n\t\t\tNotifications_Single_Send(\"member_id,icon_name,text_header,text_body,page_name,params_val\", \n\t\t\t\t\t\t\t\t$recipient, \"fa-check\", \"Voting\", $voting_name, \"voting_view\", params)\n\t\t\t$i = $i + 1\n\t\t}\n\t\t\n\t\tDBUpdate(`voting_instances`, $votingID, `flag_notifics`, 1)\n    }\n}",
            "Conditions": "ContractConditions(`MainCondition`)"
        },
        {
            "Name": "voting_SubjectCheckFulldata",
            "Value": "contract voting_SubjectCheckFulldata {\n    data {\n        votingID int\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=?\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting is not found\"\n\t\t}\t\n\t\t\n\t\t$subject_map = DBFind(\"voting_subject\").Where(\"voting_id=?\", $votingID).Row()\n\t\tif ($subject_map[\"id\"] == nil){\n\t\t\twarning \"Subject of voting is not found\"\n\t\t}\n\t\t\n\t\t$typedecision = Int($voting_map[\"typedecision\"])\n    }\n\n    action {\n\t\tif ( ($typedecision == 1) || ($typedecision == 2) ){\n\t\t\tif ( (Int($voting_map[\"optional_number_cands\"]) \u003e 0) \u0026\u0026 (Int($voting_map[\"optional_role_vacancies\"]) \u003e 0) \u0026\u0026 (Int($voting_map[\"optional_role_id\"])  \u003e 0) ){\n\t\t\t\tDBUpdate(`voting_instances`, $votingID, `flag_fulldata`, 1)\n\t\t\t} \n\t\t}\n\n\t\tif ($typedecision == 3){\n\t\t\tif ( (string($subject_map[\"text_document\"]) != \"\") \u0026\u0026 (string($subject_map[\"text_doc_hash\"]) != \"\") ){\n\t\t\t\tDBUpdate(`voting_instances`, $votingID, `flag_fulldata`, 1)\n\t\t\t} \n\t\t}\n\n\t\tif ($typedecision == 4){\n\t\t\tif ( (string($subject_map[\"formal_decision_description\"]) != \"\") \u0026\u0026 (string($subject_map[\"formal_decision_table\"])  != \"\") \u0026\u0026 \n\t\t\t\t (string($subject_map[\"formal_decision_tableid\"])     != \"\") \u0026\u0026 (string($subject_map[\"formal_decision_column\"]) != \"\") \u0026\u0026 \n\t\t\t\t (string($subject_map[\"formal_decision_colvalue\"])    != \"\") ){\n\t\t\t\tDBUpdate(`voting_instances`, $votingID, `flag_fulldata`, 1)\n\t\t\t} \n\t\t}\n\n\t\tif ($typedecision == 5){\n\t\t\tif ( (string($subject_map[\"contract_accept\"]) != \"\") \u0026\u0026 (string($subject_map[\"contract_reject\"]) != \"\") ){\n\t\t\t\tDBUpdate(`voting_instances`, $votingID, `flag_fulldata`, 1)\n\t\t\t} \n\t\t}\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_SubjectCandidates",
            "Value": "contract voting_SubjectCandidates {\n    data {\n        votingID int\n        memberID int\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=$ and startdate \u003e now()\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting already started. New candidate can not be added\"\n\t\t}\t\t\n\n\t\tif ( (Int($voting_map[\"flag_fulldata\"]) == 1) \u0026\u0026 (Int($voting_map[\"type_voting\"]) == 2) ){\n\t\t\twarning \"This vote is a system. Change settings not allowed\"\n\t\t}\n\t\t\n        if($memberID == 0){\n            $memberID = $key_id\n        }\n\t\t\n\t\t$subject_id = DBFind(\"voting_subject\").Where(\"voting_id=$ and member_id=$\", $votingID, $memberID).One(\"id\")\n\t\tif ($subject_id != nil){\n\t\t\twarning \"This candidature for this role has already been added before\"\n\t\t}\n\t\n\t\t$member_map = DBFind(\"member\").Where(\"id = $\", $memberID).Row()\n\t\tif ($member_map[\"id\"] == nil){\n\t\t\twarning \"Member not found\"\n\t\t}\n\t\t\n\t\t$optional_number_cands = Int($voting_map[\"optional_number_cands\"])\n    }\n\n    action {\n\t\tDBInsert(`voting_subject`, `member_id,member_name,member_avatar,voting_id`, $memberID, $member_map[\"member_name\"], $member_map[\"avatar\"], $votingID)\n\t\n\t\t$optional_number_cands = $optional_number_cands + 1\n\t\tDBUpdate(`voting_instances`, $votingID, `optional_number_cands`, $optional_number_cands)\n\n\t\tvoting_SubjectCheckFulldata(\"votingID\", $votingID)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_SubjectContract",
            "Value": "contract voting_SubjectContract {\n    data {\n        votingID int\n        \n        contract_reject string\n        contract_accept string\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=? and startdate \u003e now()\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting already started. Can not edit document\"\n\t\t}\t\t\n\t\tif ( (Int($voting_map[\"flag_fulldata\"]) == 1) \u0026\u0026 (Int($voting_map[\"type_voting\"]) == 2) ){\n\t\t\twarning \"This vote is a system. Change settings not allowed\"\n\t\t}\n    }\n\n    action {\n\t\t$subject_id = DBFind(\"voting_subject\").Where(\"voting_id = $\", $votingID).One(\"id\")\n\t\tif ($subject_id != nil){\n\t\t\tDBUpdate(`voting_subject`, Int($subject_id), `contract_accept,contract_reject`, $contract_accept, $contract_reject)\n\t\t} else {\n\t\t\tDBInsert(`voting_subject`, `voting_id,contract_accept,contract_reject`, $votingID, $contract_accept, $contract_reject)\n\t\t}\n\t\t\n\t\tvoting_SubjectCheckFulldata(\"votingID\", $votingID)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_SubjectDocument",
            "Value": "contract voting_SubjectDocument {\n    data {\n        votingID int\n        \n        text_document string\n        \n        contract_reject string \"optional\"\n        contract_accept string \"optional\"\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=? and startdate \u003e now()\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting already started. Can not edit document\"\n\t\t}\t\t\n\t\tif ( (Int($voting_map[\"flag_fulldata\"]) == 1) \u0026\u0026 (Int($voting_map[\"type_voting\"]) == 2) ){\n\t\t\twarning \"This vote is a system. Change settings not allowed\"\n\t\t}\t\n\n\t\t$hash = Sha256($text_document)\n    }\n\n    action {\n\t\t$subject_id = DBFind(\"voting_subject\").Where(\"voting_id = $\", $votingID).One(\"id\")\n\t\tif ($subject_id != nil){\n\t\t\tDBUpdate(`voting_subject`, Int($subject_id), `text_document, text_doc_hash`, $text_document, $hash)\n\t\t} else {\n\t\t\tDBInsert(`voting_subject`, `text_document, text_doc_hash, voting_id`, $text_document, $hash, $votingID)\n\t\t}\n\t\n\t\tDBUpdate(`voting_instances`, $votingID, `optional_contract_accept,optional_contract_reject`, $contract_accept, $contract_reject)\n\t\tvoting_SubjectCheckFulldata(\"votingID\", $votingID)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_SubjectFormal",
            "Value": "contract voting_SubjectFormal {\n    data {\n        votingID int\n        \n        description string\n        table_to_written string\n        row_id string\n        column_name string\n        written_value string\n        \n        contract_reject string \"optional\"\n        contract_accept string \"optional\"\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=? and startdate \u003e now()\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting already started. Can not edit document\"\n\t\t}\t\t\n\t\tif ( (Int($voting_map[\"flag_fulldata\"]) == 1) \u0026\u0026 (Int($voting_map[\"type_voting\"]) == 2) ){\n\t\t\twarning \"This vote is a system. Change settings not allowed\"\n\t\t}\n    }\n\n    action {\n\t\t$subject_id = DBFind(\"voting_subject\").Where(\"voting_id = $\", $votingID).One(\"id\")\n\t\tif ($subject_id != nil){\n\t\t\tDBUpdate(`voting_subject`, Int($subject_id), `formal_decision_description,formal_decision_table,formal_decision_tableid,formal_decision_column,formal_decision_colvalue`, \n\t\t\t\t$description, $table_to_written, $row_id, $column_name, $written_value)\n\t\t} else {\n\t\t\tDBInsert(`voting_subject`, `voting_id,formal_decision_description,formal_decision_table,formal_decision_tableid,formal_decision_column,formal_decision_colvalue`, \n\t\t\t\t$votingID, $description, $table_to_written, $row_id, $column_name, $written_value)\n\t\t}\n\n\t\tDBUpdate(`voting_instances`, $votingID, `optional_contract_accept,optional_contract_reject`, $contract_accept, $contract_reject)\n\t\tvoting_SubjectCheckFulldata(\"votingID\", $votingID)\n    }\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_SubjectSettings",
            "Value": "contract voting_SubjectSettings {\n    data {\n        votingID int\n        \n        roleID int\n        vacancies int\n        \n        contract_reject string \"optional\"\n        contract_accept string \"optional\"\n        accept_params string \"optional\"\n        reject_params string \"optional\"\n    }\n    \n    conditions {\n        if($vacancies \u003c 1){\n            warning \"Number of vacancies can not be less than 1\"\n        }\n        \n        $voting_map = DBFind(\"voting_instances\").Where(\"id=? and startdate \u003e now()\", $votingID).Row()\n        if($voting_map[\"id\"] == nil){\n            warning \"Voting already started. Change settings not allowed\"\n        }\n        if((Int($voting_map[\"flag_fulldata\"]) == 1) \u0026\u0026(Int($voting_map[\"type_voting\"]) == 2) ){\n            warning \"This vote is a system. Change settings not allowed\"\n        }\n        \n        $role_map = DBFind(\"roles_list\").Where(\"id=? and delete=0\", $roleID).Row()\n        if($role_map[\"id\"] == nil){\n            warning \"Specified role not found\"\n        }\n        if(Int($role_map[\"role_type\"]) != 2){\n            warning \"The chosen role is not elective or has been removed\"\n        }\n    }\n    \n    action {\n        DBUpdate(`voting_instances`, $votingID, `optional_role_id,optional_role_vacancies,optional_contract_accept,optional_contract_reject,contract_accept_params,contract_reject_params`,\n            $roleID, $vacancies, $contract_accept, $contract_reject, $accept_params, $reject_params)\n            \n            voting_SubjectCheckFulldata(\"votingID\", $votingID)\n        }\n    }",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "voting_AcceptCandidates",
            "Value": "contract voting_AcceptCandidates {\n    data {\n        votingID int\n        candidateID int\n    }\n\n    conditions {\n\t\t$voting_map = DBFind(\"voting_instances\").Where(\"id=$\", $votingID).Row()\n\t\tif ($voting_map[\"id\"] == nil){\n\t\t\twarning \"Voting is not found\"\n\t\t}\n\t\t$subject_map = DBFind(\"voting_subject\").Where(\"voting_id=$ and member_id=$\", $votingID, $candidateID).Row()\n\t\tif ($subject_map[\"id\"] == nil){\n\t\t\twarning \"Subject of voting is not found\"\n\t\t}\n\t\t\n\t\t// check the participant of the voting\n\t\t$participant_id = DBFind(`voting_participants`).Where(\"voting_id=$ and member_id=$\", $votingID, $key_id).One(\"id\")\n\t\tif ($participant_id == nil){\n\t\t\twarning \"You are not a participant in this voting\"\n\t\t}\n    }\n\n    action {\n\t\t// if notifications have been sent, then close it\n\t\tif ( Int($voting_map[\"flag_notifics\"]) == 1 ){\n\t\t\tvar params string\n\t\t\tparams = \"notific_param=\" + Str($votingID)\t\t\n\t\t\t$notific_id = DBFind(`notifications`).Where(\"recipient_id=$ and page_name=$ and page_params=$ and closed=$\", $key_id, \"voting_view\", params, 0).One(\"id\")\n\t\t\tif ($notific_id != nil){\n\t\t\t\tNotifications_Single_Close(\"notific_id\", Int($notific_id))\n\t\t\t}\n\t\t}\n\n\t\t// check the decision\n\t\tif ( Int($voting_map[\"flag_decision\"]) == 1 ){\n\t\t\twarning \"Decision was taken. Voting is now not possible\"\n\t\t} \n\t\t\n\t\t// check start-end of voting time\n\t\t$voting_start = DBFind(`voting_instances`).Where(\"id=$ and startdate \u003c now()\", $votingID).One(\"id\")\n\t\t$voting_end   = DBFind(`voting_instances`).Where(\"id=$ and enddate   \u003e now()\", $votingID).One(\"id\")\n\t\tif ($voting_start == nil){\n\t\t\twarning \"Voting has not yet begun. Try again later, please\"\n\t\t}\n\t\tif ($voting_end == nil){\n\t\t\twarning \"Voting has expired. Voting is now not possible\"\n\t\t}\n\t\t\n\t\t//-----------------------------------------------------------------------------------------------\n\n\t\t// write the result of the voting\n\t\tDBUpdate(`voting_participants`, Int($participant_id), `timestamp decision_date, decision`, $block_time, $candidateID)\n\n\t\t// increment count of accept\n\t\t$subject_id     = Int($subject_map[\"id\"])\n\t\t$number_accept  = Int($subject_map[\"number_accept\"])\n\t\t$number_accept   = $number_accept + 1\n\t\tDBUpdate(`voting_subject`, $subject_id, `number_accept`, $number_accept)\n\n\t\tvoting_UpdateDataForGraphs(\"votingID\", $votingID)\n    }\n}",
            "Conditions": "ContractConditions(`MainCondition`)"
        }
    ],
    "data": [],
    "languages": [],
    "menus": [
        {
            "Name": "default_menu",
            "Value": "MenuItem(Title:$voting$, Page:voting_list, Icon:\"fa icon-pin\")",
            "Conditions": "ContractAccess(\"@1EditMenu\")"
        }
    ],
    "pages": [
        {
            "Name": "voting_create",
            "Value": "Div(Class: content-wrapper){\r\n\r\n\tSetTitle($new_voting$)\r\n\tDiv(Class: breadcrumb){\r\n\t\tLinkPage($voting$, voting_list)\r\n\t\tSpan(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: $new_voting$)\r\n\t}\r\n\r\n    Div(Class: row df f-valign){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n\t\t\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: LangRes(new_voting))\r\n                Form(){\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: voting_name){\r\n                                    Span(Body: LangRes(name))\r\n                                }\r\n                \t\t\t}\r\n                \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                \t\t\t    Input(Name: voting_name, Class: form-control, Type: text, Value: New voting)\r\n                \t\t\t}\r\n                        }                   \r\n                    }\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-lg text-right){\r\n                                Label(For: description){\r\n                                    Span(Body: LangRes(description))\r\n                                }\r\n                            }\r\n                \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                \t\t\t    Input(Name: description, Class: form-control, Type: textarea, Value: no)\r\n                \t\t\t}\r\n                        }                      \r\n                    }\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: type_participants){\r\n                                    Span(Body: LangRes(participants))\r\n                                }\r\n                \t\t\t}\r\n                \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                                EcosysParam(Name: type_voting_participants, Source: type_voting_participants)\r\n                \t\t\t    Select(Name: type_participants, Source: type_voting_participants, NameColumn: name, ValueColumn: id)\r\n                \t\t\t}\r\n                        }  \r\n                    }\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: type_decision){\r\n                                    Span(Body: LangRes(decision))\r\n                                }\r\n                \t\t\t}\r\n                \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                                EcosysParam(Name: type_voting_decisions, Source: type_voting_decisions)\r\n                \t\t\t    Select(Name: type_decision, Source: type_voting_decisions, NameColumn: name, ValueColumn: id)\r\n                \t\t\t}\r\n                        }                       \r\n                    }\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: start_date){\r\n                                    Span(Body: LangRes(date_start))\r\n                                }\r\n                            }\r\n                \t\t\tDiv(Class: col-md-5 mc-sm text-left){\r\n                                Input(Name: start_date, Class: form-control, Type: date, Value: Now(\"YYYY-MM-DD\", 3 days))\r\n                            }\r\n                \t\t\tDiv(Class: col-md-4 mc-sm text-left){\r\n                                Input(Name: start_time, Class: form-control, Type: time, Value: Now(\"HH:MI\"))\r\n                            }\r\n                        }                       \r\n                    }\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: end_date){\r\n                                    Span(Body: LangRes(date_end))\r\n                                }\r\n                            }\r\n                \t\t\tDiv(Class: col-md-5 mc-sm text-left){\r\n                                Input(Name: end_date, Class: form-control, Type: date, Value: Now(\"YYYY-MM-DD\", 21 days))\r\n                            }\r\n                \t\t\tDiv(Class: col-md-4 mc-sm text-left){\r\n                                Input(Name: end_time, Class: form-control, Type: time, Value: Now(\"HH:MI\"))\r\n                            }\r\n                        }                       \r\n                    }\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: volume){\r\n                                    Span(Body: LangRes(voting_volume))\r\n                                }\r\n                            }\r\n                \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                                Input(Name: volume, Class: form-control, Type: number, Value: 75)\r\n                                P(Class: m0 text-muted, Body: $voting_volume_desc$)\r\n                            }\r\n                        }                       \r\n                    }\r\n\r\n                    Div(Class: list-group-item){\r\n                        Div(Class: row df f-valign){\r\n                \t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n                                Label(For: quorum){\r\n                                    Span(Body: LangRes(voting_quorum))\r\n                                }\r\n                            }\r\n                \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                                Input(Name: quorum, Class: form-control, Type: number, Value: 50)\r\n                                P(Class: m0 text-muted, Body: $voting_quorum_desc$)\r\n                            }\r\n                        }                     \r\n                    }\r\n\r\n                    Div(Class: panel-footer clearfix){\r\n                        Div(Class: pull-left){\r\n                            Input(Name: now_date, Class: form-control hidden, Type: text, Value: Now(\"YYYY-MM-DD HH:MI\"))\r\n                            Input(Name: type_voting, Class: form-control hidden, Type: text, Value: 1)\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            Button(Body: LangRes(back), Class: btn btn-default, Page: voting_list)\r\n                            Button(Body: LangRes(create), Class: btn btn-primary, Page: voting_list, Contract: voting_CreateNew)\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n\t\t}\r\n\t\tDiv(Class: col-md-3)\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_decision_candidates",
            "Value": "Div(Class: content-wrapper){\r\n\t\r\n    If(#vID# \u003e 0){\r\n\r\n        DBFind(Name: voting_instances, Source: src_voting_instances).Where(\"id=#vID#\").Vars(instance)\r\n\r\n        SetTitle($subject_voting$)\r\n        Div(Class: breadcrumb){\r\n            LinkPage($voting$, voting_list)\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            LinkPage(#instance_name#, voting_view,, \"vID=#vID#\")\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            Span(Class: text-muted, Body: $subject_voting$)\r\n        }\r\n\r\n        Div(Class: row df f-valign){\r\n            Div(Class: col-md-2)\r\n            Div(Class: col-md-8){\r\n\r\n                Div(Class: panel panel-primary){\r\n                    Form(){  \r\n\t\t\t\t\t\r\n\t\t\t\t\t\tInput(Name: memberID, Class: form-control hidden, Type: text, Value: 0)\r\n\t\t\t\t\t\tInput(Name: votingID, Class: form-control hidden, Type: text, Value: #vID#)\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tLabel($candidates$)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-left){\r\n                                    Div(form-text text-muted, $can_apply_voting$)\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-3 mc-sm text-right){\r\n                                    Button(Body: LangRes(apply), Class: btn btn-primary, Page: voting_decision_candidates, PageParams: \"vID=Val(votingID)\", Contract: voting_SubjectCandidates)\r\n                                } \r\n\t\t\t\t\t\t\t}\r\n                            Div(Class: row df){\r\n                    \t\t\tDiv(Class: col-md-3 mt-sm)\r\n                    \t\t\tDiv(Class: col-md-8 mt-sm text-left){\r\n                                    DBFind(Name: voting_subject, Source: src_voting_subject).Where(\"voting_id=#vID#\").Custom(custom_address){\r\n                                        Span(Address(#member_id#))\r\n\t                                }.Custom(custom_member){\r\n\t\t\t\t\t\t\t\t\t\tButton(Class: btn btn-link, Page: profile_view, PageParams: \"v_member_id=#member_id#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tImage(Src: \"#member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5 text-bold, Body: #member_name#)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n                                    Table(src_voting_subject, \"$candidates$=custom_member,$member_id$=custom_address\")\r\n                                }\r\n                    \t\t\tDiv(Class: col-md-1 mt-sm)\r\n                            }\r\n                        }\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: roleID){\r\n                                        Span(Body: LangRes(role))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mb-sm text-left){\r\n                                    DBFind(Name: roles_list, Source: source_roles).Columns(role_name, id).Where(\"role_type=2 and delete=0\")\r\n                                    Select(Name: roleID, Source: source_roles, NameColumn: role_name, ValueColumn: id, Value: #instance_optional_role_id#)\r\n                                } \r\n                            }\r\n\r\n                            Div(row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: vacancies){\r\n                                        Span(Body: LangRes(vacancies))\r\n                                    }\r\n                                }\r\n                    \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                    \t\t\t    Input(Name: vacancies, Class: form-control, Type: Number, Value: #instance_optional_role_vacancies#)\r\n                                }\r\n                            }                    \r\n                        }\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_accept){\r\n                                        Span(Body: LangRes(contract_accept))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_accept, Class: form-control, Type: text, Value: #instance_optional_contract_accept#)\r\n                                    P(Class: text-muted, Body: $contract_accept_des$)\r\n                                }\r\n                            }                     \r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_reject){\r\n                                        Span(Body: LangRes(contract_reject))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_reject, Class: form-control, Type: text, Value: #instance_optional_contract_reject#)\r\n                                    P(Class: m0 text-muted, Body: $contract_reject_des$)\r\n                                }\r\n                            }                     \r\n                        }\r\n\r\n                        Div(Class: panel-footer clearfix){\r\n                            Div(Class: pull-right){\r\n                                Button(Body: LangRes(back), Class: btn btn-default, Page: voting_view, PageParams: \"vID=#vID#\")\r\n                                Button(Body: LangRes(save), Class: btn btn-primary, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_SubjectSettings)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-2)\r\n        }\r\n        \r\n    }.Else{\r\n\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(attention))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_decision_contract",
            "Value": "Div(Class: content-wrapper){\r\n\t\r\n    If(#vID# \u003e 0){\r\n\r\n        DBFind(Name: voting_instances, Source: src_voting_instances).Where(\"id=#vID#\").Vars(instance)\r\n\t\tDBFind(Name: voting_subject, Source: src_voting_subject).Where(\"voting_id=#vID#\").Vars(subject)\r\n\r\n\t\tIf(#subject_id#\u003e0){\r\n\t\t}.Else{\r\n\t\t\tSetVar(Name: subject_contract_accept, Value: \"\")\r\n\t\t\tSetVar(Name: subject_contract_reject, Value: \"\")\r\n\t\t}\r\n\t\t\r\n        SetTitle($subject_voting$)\r\n        Div(Class: breadcrumb){\r\n            LinkPage($voting$, voting_list)\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            LinkPage(#instance_name#, voting_view,, \"vID=#vID#\")\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            Span(Class: text-muted, Body: $subject_voting$)\r\n        }\r\n\r\n        Div(Class: row df f-valign){\r\n            Div(Class: col-md-2)\r\n            Div(Class: col-md-8){\r\n\r\n                Div(Class: panel panel-primary){\r\n                    Form(){  \r\n\r\n                        Input(Name: votingID, Class: form-control hidden, Type: text, Value: #vID#)\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_accept){\r\n                                        Span(Body: LangRes(contract_accept))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_accept, Class: form-control, Type: text, Value: #subject_contract_accept#)\r\n                                    P(Class: text-muted, Body: $contract_accept_des$)\r\n                                }\r\n                            }                     \r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_reject){\r\n                                        Span(Body: LangRes(contract_reject))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_reject, Class: form-control, Type: text, Value: #subject_contract_reject#)\r\n                                    P(Class: m0 text-muted, Body: $contract_reject_des$)\r\n                                }\r\n                            }                     \r\n                        }\r\n\r\n                        Div(Class: panel-footer clearfix){\r\n                            Div(Class: pull-right){\r\n                                Button(Body: LangRes(back), Class: btn btn-default, Page: voting_view, PageParams: \"vID=#vID#\")\r\n                                Button(Body: LangRes(save), Class: btn btn-primary, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_SubjectContract)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-2)\r\n        }\r\n        \r\n    }.Else{\r\n\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(attention))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_decision_document",
            "Value": "Div(Class: content-wrapper){\r\n\t\r\n    If(#vID# \u003e 0){\r\n\r\n        DBFind(Name: voting_instances, Source: src_voting_instances).Where(\"id=#vID#\").Vars(instance)\r\n        DBFind(Name: voting_subject, Source: src_voting_subject).Where(\"voting_id=#vID#\").Vars(subject)\r\n\t\t\r\n\t\tIf(#subject_id#\u003e0){\r\n\t\t}.Else{\r\n\t\t\tSetVar(Name: subject_text_document, Value: \"\")\r\n\t\t}\r\n\r\n        SetTitle($subject_voting$)\r\n        Div(Class: breadcrumb){\r\n            LinkPage($voting$, voting_list)\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            LinkPage(#instance_name#, voting_view,, \"vID=#vID#\")\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            Span(Class: text-muted, Body: $subject_voting$)\r\n        }\r\n\r\n        Div(Class: row df f-valign){\r\n            Div(Class: col-md-2)\r\n            Div(Class: col-md-8){\r\n\r\n                Div(Class: panel panel-primary){\r\n                    Form(){  \r\n\r\n                        Input(Name: votingID, Class: form-control hidden, Type: text, Value: #vID#)\r\n\r\n\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-12 mt-sm){\r\n                                    P(Class: m0 text-muted, Body: $text_document$)\r\n                                    Input(Name: text_document, Class: form-control, Type: textarea, Value: #subject_text_document#)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n                        }\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_accept){\r\n                                        Span(Body: LangRes(contract_accept))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_accept, Class: form-control, Type: text, Value: #instance_optional_contract_accept#)\r\n                                    P(Class: text-muted, Body: $contract_accept_des$)\r\n                                }\r\n                            }                     \r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_reject){\r\n                                        Span(Body: LangRes(contract_reject))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_reject, Class: form-control, Type: text, Value: #instance_optional_contract_reject#)\r\n                                    P(Class: m0 text-muted, Body: $contract_reject_des$)\r\n                                }\r\n                            }                     \r\n                        }\r\n\r\n                        Div(Class: panel-footer clearfix){\r\n                            Div(Class: pull-right){\r\n                                Button(Body: LangRes(back), Class: btn btn-default, Page: voting_view, PageParams: \"vID=#vID#\")\r\n                                Button(Body: LangRes(save), Class: btn btn-primary, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_SubjectDocument)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-2)\r\n        }\r\n        \r\n    }.Else{\r\n\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(attention))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_decision_election",
            "Value": "Div(Class: content-wrapper){\r\n\t\r\n    If(#vID# \u003e 0){\r\n\r\n        DBFind(Name: voting_instances, Source: src_voting_instances).Where(\"id=#vID#\").Vars(instance)\r\n\r\n        SetTitle($subject_voting$)\r\n        Div(Class: breadcrumb){\r\n            LinkPage($voting$, voting_list)\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            LinkPage(#instance_name#, voting_view,, \"vID=#vID#\")\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            Span(Class: text-muted, Body: $subject_voting$)\r\n        }\r\n\r\n        Div(Class: row df f-valign){\r\n            Div(Class: col-md-2)\r\n            Div(Class: col-md-8){\r\n\r\n                Div(Class: panel panel-primary){\r\n                    Form(){  \r\n\r\n\t\t\t\t\t\tInput(Name: votingID, Class: form-control hidden, Type: text, Value: #vID#)\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-3 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tLabel($candidates$)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                                    Div(Class: input-group){\r\n                                        DBFind(Name: member, Source: source_members).Columns(member_name, id).Custom(custom_username){\r\n                                            Span(Body: #member_name# ( Address(#id#) ) ) \r\n                                        }\r\n                                        Select(Name: memberID, Source: source_members, NameColumn: custom_username, ValueColumn: id)\r\n                                        Div(Class: input-group-btn){\r\n                                            Button(Body: LangRes(add), Class: btn btn-default, Page: voting_decision_election, PageParams: \"vID=Val(votingID)\", Contract: voting_SubjectCandidates)\r\n                                        }\r\n                                    }\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t}\r\n                            Div(Class: row df){\r\n                    \t\t\tDiv(Class: col-md-3 mt-sm)\r\n                    \t\t\tDiv(Class: col-md-8 mt-sm text-left){\r\n                                    DBFind(Name: voting_subject, Source: src_voting_subject).Where(\"voting_id=#vID#\").Custom(custom_address){\r\n                                        Span(Address(#member_id#))\r\n\t                                }.Custom(custom_member){\r\n\t\t\t\t\t\t\t\t\t\tButton(Class: btn btn-link, Page: profile_view, PageParams: \"v_member_id=#member_id#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tImage(Src: \"#member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n                                            Span(Class: h5 text-bold, Body: #member_name#)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n                                    Table(src_voting_subject, \"$candidates$=custom_member,$member_id$=custom_address\")\r\n                                }\r\n                    \t\t\tDiv(Class: col-md-1 mt-sm)\r\n                            }\r\n                        }\r\n\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: roleID){\r\n                                        Span(Body: LangRes(role))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mb-sm text-left){\r\n                                    DBFind(Name: roles_list, Source: source_roles).Columns(role_name, id).Where(\"role_type=2 and delete=0\")\r\n                                    Select(Name: roleID, Source: source_roles, NameColumn: role_name, ValueColumn: id, Value: #instance_optional_role_id#)\r\n                                } \r\n                            }\r\n\r\n                            Div(row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: vacancies){\r\n                                        Span(Body: LangRes(vacancies))\r\n                                    }\r\n                                }\r\n                    \t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n                    \t\t\t    Input(Name: vacancies, Class: form-control, Type: Number, Value: #instance_optional_role_vacancies#)\r\n                                }\r\n                            }                    \r\n                        }\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_accept){\r\n                                        Span(Body: LangRes(contract_accept))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_accept, Class: form-control, Type: text, Value: #instance_optional_contract_accept#)\r\n                                    P(Class: text-muted, Body: $contract_accept_des$)\r\n                                }\r\n                            }                     \r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_reject){\r\n                                        Span(Body: LangRes(contract_reject))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_reject, Class: form-control, Type: text, Value: #instance_optional_contract_reject#)\r\n                                    P(Class: m0 text-muted, Body: $contract_reject_des$)\r\n                                }\r\n                            }                     \r\n                        }\r\n\r\n                        Div(Class: panel-footer clearfix){\r\n                            Div(Class: pull-right){\r\n                                Button(Body: LangRes(back), Class: btn btn-default, Page: voting_view, PageParams: \"vID=#vID#\")\r\n                                Button(Body: LangRes(save), Class: btn btn-primary, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_SubjectSettings)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-2)\r\n        }\r\n        \r\n    }.Else{\r\n\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(attention))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_decision_formal",
            "Value": "Div(Class: content-wrapper){\r\n\t\r\n    If(#vID# \u003e 0){\r\n\r\n        DBFind(Name: voting_instances, Source: src_voting_instances).Where(\"id=#vID#\").Vars(instance)\r\n\t\tDBFind(Name: voting_subject, Source: src_voting_subject).Where(\"voting_id=#vID#\").Vars(subject)\r\n\r\n\t\tIf(#subject_id#\u003e0){\r\n\t\t}.Else{\r\n\t\t\tSetVar(Name: subject_formal_decision_description, Value: \"\")\r\n\t\t\tSetVar(Name: subject_formal_decision_table, Value: \"\")\r\n\t\t\tSetVar(Name: subject_formal_decision_tableid, Value: \"\")\r\n\t\t\tSetVar(Name: subject_formal_decision_column, Value: \"\")\r\n\t\t\tSetVar(Name: subject_formal_decision_colvalue, Value: \"\")\r\n\t\t}\r\n\t\t\r\n        SetTitle($subject_voting$)\r\n        Div(Class: breadcrumb){\r\n            LinkPage($voting$, voting_list)\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            LinkPage(#instance_name#, voting_view,, \"vID=#vID#\")\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            Span(Class: text-muted, Body: $subject_voting$)\r\n        }\r\n\r\n        Div(Class: row df f-valign){\r\n            Div(Class: col-md-2)\r\n            Div(Class: col-md-8){\r\n\r\n                Div(Class: panel panel-primary){\r\n                    Form(){  \r\n\r\n                        Input(Name: votingID, Class: form-control hidden, Type: text, Value: #vID#)\r\n                    \r\n\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-3 mt-lg text-right){\r\n\t\t\t\t\t\t\t\t\tLabel(For: description){\r\n\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(description))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-9 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\tInput(Name: description, Class: form-control, Type: textarea, Value: #subject_formal_decision_description#)\r\n                                    P(Class: m0 text-muted, Body: $description_desc$)\r\n                                }\r\n\t\t\t\t\t\t\t}                      \r\n\t\t\t\t\t\t}\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: table_to_written){\r\n                                        Span(Body: LangRes(table_to_written))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: table_to_written, Class: form-control, Type: text, Value: #subject_formal_decision_table#)\r\n                                    P(Class: text-muted, Body: $table_to_written_desc$)\r\n                                }\r\n                            }                     \r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: row_id){\r\n                                        Span(Body: LangRes(row_id))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: row_id, Class: form-control, Type: text, Value: #subject_formal_decision_tableid#)\r\n                                    P(Class: text-muted, Body: $row_id_desc$)\r\n                                }\r\n                            }  \r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: column_name){\r\n                                        Span(Body: LangRes(column_name))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: column_name, Class: form-control, Type: text, Value: #subject_formal_decision_column#)\r\n                                    P(Class: m0 text-muted, Body: $column_name_desc$)\r\n                                }\r\n                            }                   \r\n                        }\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: written_value){\r\n                                        Span(Body: LangRes(written_value))\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: written_value, Class: form-control, Type: text, Value: #subject_formal_decision_colvalue#)\r\n                                    P(Class: m0 text-muted, Body: $written_value_desc$)\r\n                                }\r\n                            }                                        \r\n                        }\r\n\r\n\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_accept){\r\n                                        Span(Body: LangRes(contract_accept))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_accept, Class: form-control, Type: text, Value: #instance_optional_contract_accept#)\r\n                                    P(Class: text-muted, Body: $contract_accept_des$)\r\n                                }\r\n                            }                     \r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: contract_reject){\r\n                                        Span(Body: LangRes(contract_reject))\r\n                                    }\r\n                                    P(Class: m0 text-muted, Body: $optional$)\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    Input(Name: contract_reject, Class: form-control, Type: text, Value: #instance_optional_contract_reject#)\r\n                                    P(Class: m0 text-muted, Body: $contract_reject_des$)\r\n                                }\r\n                            }                     \r\n                        }\r\n\r\n                        Div(Class: panel-footer clearfix){\r\n                            Div(Class: pull-right){\r\n                                Button(Body: LangRes(back), Class: btn btn-default, Page: voting_view, PageParams: \"vID=#vID#\")\r\n                                Button(Body: LangRes(save), Class: btn btn-primary, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_SubjectFormal)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-2)\r\n        }\r\n        \r\n    }.Else{\r\n\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(attention))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_invite",
            "Value": "Div(Class: content-wrapper){\r\n\t\r\n    If(#vID# \u003e 0){\r\n\r\n        DBFind(Name: voting_instances, Source: src_voting_instances).Where(\"id=#vID#\").Vars(instance)\r\n\t\t\r\n        SetTitle($participants$)\r\n        Div(Class: breadcrumb){\r\n            LinkPage($voting$, voting_list)\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            LinkPage(#instance_name#, voting_view,, \"vID=#vID#\")\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            Span(Class: text-muted, Body: $participants$)\r\n        }\r\n\r\n        Div(Class: row df f-valign){\r\n            Div(Class: col-md-2)\r\n            Div(Class: col-md-8){\r\n\t\t\t\r\n                Div(Class: panel panel-primary){\r\n\t\t\t\t\tDiv(Class: panel-heading, Body: LangRes(participants))\r\n                    Form(){\r\n\t\t\t\t\t\r\n                        Input(Name: votingID, Class: form-control hidden, Type: text, Value: #vID#)\r\n\r\n\t\t\t\t\t\tDiv(Class: list-group-item){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-12){\r\n                                    DBFind(Name: voting_participants, Source: src_voting_participants).Columns(id,member_id,member_name,member_avatar).Where(\"voting_id=#vID#\").Custom(custom_id){\r\n                                        Span(Body:  #id#)\r\n                                    }.Custom(custom_member){\r\n                                        Button(Class: btn btn-link, Page: profile_view, PageParams: \"v_member_id=#member_id#\"){\r\n                                            Image(Src: \"#member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n                                            Span(Class: h5 text-bold, Body: #member_name#)\r\n                                        }\r\n                                    }\r\n                                    Table(src_voting_participants, \"$id$=custom_id,$member_name$=custom_member\")\r\n                                }\r\n                            }\r\n\r\n                            If(#instance_typeparticipants# == 1){\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-12){\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            If(#instance_typeparticipants# == 2){\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-12){\r\n                                        Span(Class: text-muted, Body: LangRes(select_member))\r\n                                        DBFind(Name: member, Source: source_members).Columns(member_name, id).Custom(custom_username){\r\n                                            Span(Body: #member_name# ( Address(#id#) ) ) \r\n                                        }\r\n                                        Select(Name: var_id, Source: source_members, NameColumn: custom_username, ValueColumn: id)\r\n                                    }\r\n                                }\r\n                            }\r\n                        \r\n                            If(#instance_typeparticipants# == 3){\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-12){\r\n                                        Span(Class: text-muted, Body: LangRes(select_role))\r\n                                        DBFind(Name: roles_list, Source: source_roles).Columns(role_name, id).Where(\"delete=0\")\r\n                                        Select(Name: var_id, Source: source_roles, NameColumn: role_name, ValueColumn: id)\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n\r\n                        Div(Class: panel-footer clearfix){\r\n                            Div(Class: pull-right){\r\n                                Button(Body: LangRes(back), Class: btn btn-default, Page: voting_view, PageParams: \"vID=#vID#\")\r\n                                If(#instance_typeparticipants# == 2){\r\n                                    Button(Body: LangRes(add_member), Class: btn btn-primary, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_Invite)\r\n                                }\r\n                                If(#instance_typeparticipants# == 3){\r\n                                    Button(Body: LangRes(add_role), Class: btn btn-primary, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_Invite)\r\n                                }\r\n                            }\r\n                        }\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n            }\r\n            Div(Class: col-md-2)\r\n        }\r\n        \r\n    }.Else{\r\n\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(attention))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_list",
            "Value": "Div(Class: content-wrapper){\r\n    \r\n    SetTitle($voting$)\r\n    Div(breadcrumb){\r\n        Span(Class: text-muted, Body: $voting$)\r\n    }\r\n    \r\n    If(GetVar(isSearch) == 1){\r\n        SetVar(Name: v_Where, Value: \"name='#v_Search#' and delete = 0\")\r\n    }.Else{\r\n        SetVar(Name: v_Where, Value: \"delete=0\")\r\n        SetVar(Name: v_Search, Value: \"\")\r\n    }\r\n    \r\n    DBFind(Name: voting_instances, Source: src_voting_instances).Custom(custom_id){\r\n        Span(Class: h5, Body: #id#)\r\n        SetVar(Name: vDateNow, Value: Now(\"YYYY-MM-DD HH:MI\"))\r\n        SetVar(Name: vStartDate, Value: DateTime(DateTime: #startdate#, Format: \"YYYY-MM-DD HH:MI\"))\r\n        SetVar(Name: vEndDate, Value: DateTime(#enddate#, \"YYYY-MM-DD HH:MI\"))\r\n        SetVar(Name: vCmpStartDate, Value: CmpTime(#vStartDate#,#vDateNow#))\r\n        SetVar(Name: vCmpEndDate, Value: CmpTime(#vEndDate#,#vDateNow#))\r\n    }.Custom(custom_name){\r\n        LinkPage(Page: voting_view, PageParams: \"vID=#id#\"){\r\n            Span(Class: h5 text-bold, Body: #name#)\r\n        }\r\n    }.Custom(custom_subject){\r\n        If(Or(#vCmpStartDate#\u003c=0,#type_voting#==2)){\r\n            Span(Class: h6, Body: EcosysParam(Name: type_voting_decisions, Index: #typedecision#))\r\n        }.Else{\r\n            If(#typedecision# == 1){\r\n                LinkPage(Page: voting_decision_candidates, PageParams: \"vID=#id#\"){\r\n                    Span(Class: h6 text-bold, Body: EcosysParam(Name: type_voting_decisions, Index: #typedecision#))\r\n                }\r\n            }\r\n            If(#typedecision# == 2){\r\n                LinkPage(Page: voting_decision_election, PageParams: \"vID=#id#\"){\r\n                    Span(Class: h6 text-bold, Body: EcosysParam(Name: type_voting_decisions, Index: #typedecision#))\r\n                }\r\n            }\r\n            If(#typedecision# == 3){\r\n                LinkPage(Page: voting_decision_document, PageParams: \"vID=#id#\"){\r\n                    Span(Class: h6 text-bold, Body: EcosysParam(Name: type_voting_decisions, Index: #typedecision#))\r\n                }\r\n            }\r\n            If(#typedecision# == 4){\r\n                LinkPage(Page: voting_decision_formal, PageParams: \"vID=#id#\"){\r\n                    Span(Class: h6 text-bold, Body: EcosysParam(Name: type_voting_decisions, Index: #typedecision#))\r\n                }\r\n            }\r\n            If(#typedecision# == 5){\r\n                LinkPage(Page: voting_decision_contract, PageParams: \"vID=#id#\"){\r\n                    Span(Class: h6 text-bold, Body: EcosysParam(Name: type_voting_decisions, Index: #typedecision#))\r\n                }\r\n            }\r\n        }\r\n    }.Custom(custom_participants){\r\n        If(Or(#vCmpStartDate#\u003c=0,#type_voting#==2)){\r\n            Span(Class: h6, Body: EcosysParam(Name: type_voting_participants, Index: #typeparticipants#))\r\n        }.Else{\r\n            LinkPage(Page: voting_invite, PageParams: \"vID=#id#\"){\r\n                Span(Class: h6 text-bold, Body: EcosysParam(Name: type_voting_participants, Index: #typeparticipants#))\r\n            }\r\n        }\r\n    }.Custom(custom_notifics){\r\n        If(#flag_notifics# == 1){\r\n            Div(Class: text-center text-bold, Body: LangRes(yes))\r\n        }.Else{\r\n            If(And(#flag_success#!=1,#vCmpEndDate#\u003e0,#vCmpStartDate#\u003c0,#creator_id#==#key_id#)){\r\n                Div(Class: text-center, Body: Button(Body: LangRes(send), Class: btn btn-primary, Contract: voting_SendNotifics, Params: \"votingID=#id#\", Page: voting_list))\r\n            }.Else{\r\n                Div(Class: text-center text-bold, Body: LangRes(no))\r\n            }\r\n        }\r\n    }.Custom(custom_creator){\r\n        LinkPage(Page: profile_view, PageParams: \"v_member_id=#creator_id#\"){\r\n            Image(Src: \"#creator_avatar#\", Class: img-circle).Style(width: 30px; border: 1px solid #5A5D63; margin-right: 10px;)\r\n            Span(Class: h5 text-bold, Body: #creator_name#)\r\n        }\r\n    }.Custom(custom_date){\r\n        If(#vCmpStartDate# \u003c 0){\r\n            Div(Class: text-muted, Body: DateTime(DateTime: #startdate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n        }.Else{\r\n            Div(Class: text-bold, Body: DateTime(DateTime: #startdate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n        }\r\n        If(#vCmpEndDate# \u003c 0){\r\n            Div(Class: text-muted, Body: DateTime(DateTime: #enddate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n        }.Else{\r\n            Div(Class: text-bold, Body: DateTime(DateTime: #enddate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n        }\r\n    }.Custom(custom_type){\r\n        Span(Class: h6, Body: EcosysParam(Name: type_voting, Index: #type_voting#))\r\n    }.Custom(custom_progress){\r\n        Div(Class: text-center h5 text-bold, Body: #percent_success# %)\r\n    }.Custom(custom_decision){\r\n        If(#flag_decision# == 0){\r\n            If(And(#vCmpEndDate#\u003c0,#creator_id#==#key_id#)){\r\n                Div(Class: text-center, Body: Button(Body: LangRes(decision), Class: btn btn-primary, Contract: voting_CheckDecision, Params: \"votingID=#id#\", Page: voting_list))\r\n            }.Else{\r\n                Div(Class: text-muted text-center, Body: LangRes(no))\r\n            }\r\n        }\r\n        If(#flag_decision# == -2){\r\n            Div(Class: text-muted text-center, Body: LangRes(not_enough_votes))\r\n        }\r\n        If(#flag_decision# == 1){\r\n            Div(Class: text-success text-center, Body: LangRes(accepted))\r\n        }\r\n        If(#flag_decision# == -1){\r\n            Div(Class: text-danger text-center, Body: LangRes(rejected))\r\n        }\r\n    }.Custom(custom_status){\r\n        If(#flag_success# == 1){\r\n            Div(Class: text-success text-center, Body: LangRes(success))\r\n        }.Else{\r\n            If(#vCmpEndDate# \u003c 0){\r\n                Div(Class: text-muted text-center, Body: LangRes(finished))\r\n            }.Else{\r\n                If(#vCmpStartDate# \u003c 0){\r\n                    Div(Class: text-center){\r\n                        Button(Class: btn btn-link, Page: voting_view, PageParams: \"vID=#id#\"){\r\n                            Span(Class: h4, Body: Em(Class: fa icon-eye))\r\n                        }\r\n                    }\r\n                }.Else{\r\n                    Div(Class: text-warning text-center, Body: LangRes(waiting))\r\n                }\r\n            }\r\n        }\r\n    }.Custom(actions){\r\n        Div(Class: text-center, Body: Button(Body: Em(Class: fa fa-close), Class: btn btn-danger, Contract: voting_Delete, Params: \"votingID=#id#\", Page: voting_list))\r\n    }.Where(#v_Where#).Order(id desc)\r\n    \r\n    Div(Class: panel panel-primary){\r\n        Form(){\r\n            Div(Class: list-group-item){\r\n                Div(Class: row df f-valign){\r\n                    Div(Class: col-md-1 mt-sm text-right){\r\n                        Label(For: Search){\r\n                            Span(Body: LangRes(name))\r\n                        }\r\n                    }\r\n                    Div(Class: col-md-11 mc-sm){\r\n                        Div(Class: input-group){\r\n                            Input(Class: form-control, Type: text, Name: Search, Value: #v_Search#)\r\n                            Div(Class: input-group-btn){\r\n                                Button(Body: Em(Class: fa fa-search), Class: btn btn-default, Page: voting_list, PageParams: \"isSearch=1,v_Search=Val(Search)\")\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            Div(Class: list-group-item){\r\n                Table(src_voting_instances, \"$id$=custom_id,$name$=custom_name,$type$=custom_type,$subject_voting$=custom_subject,$participants$=custom_participants,$date_start$ / $date_end$=custom_date,$creator$=custom_creator,$notifications$=custom_notifics,$progress$=custom_progress,$decision$=custom_decision,$status$=custom_status,$actions$=actions\")\r\n                If(GetVar(isSearch) == 1){\r\n                    Div(Class: text-center){\r\n                        Button(Body: $view_all$, Class: btn btn-primary, Page: voting_list, PageParams: \"isSearch=0\")\r\n                    }\r\n                }\r\n            }\r\n            \r\n            Div(Class: panel-footer clearfix){\r\n                Div(Class: pull-right){\r\n                    Button(Body: LangRes(create), Class: btn btn-primary, Page: voting_create)\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        },
        {
            "Name": "voting_view",
            "Value": "Div(Class: content-wrapper){\r\n\tIf(#notific_type#==1){\r\n\t\tSetVar(Name: vID, Value: #notific_param#)\r\n\t}\r\n\r\n    If(#vID# \u003e 0){\r\n\r\n        DBFind(Name: voting_instances, Source: src_one).Where(\"id=#vID#\").Vars(instance)\r\n        \r\n        SetTitle(#instance_name#)\r\n        Div(Class: breadcrumb){\r\n            LinkPage($voting$, voting_list)\r\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n            Span(Class: text-muted, Body: #instance_name#)\r\n        }\r\n\r\n\t\tSetVar(Name: vDateNow, Value: Now(\"YYYY-MM-DD HH:MI\")) \r\n\t\tSetVar(Name: vStartDate, Value: DateTime(DateTime: #instance_startdate#, Format: \"YYYY-MM-DD HH:MI\"))\r\n\t\tSetVar(Name: vEndDate, Value: DateTime(#instance_enddate#, \"YYYY-MM-DD HH:MI\")) \r\n\t\tSetVar(Name: vCmpStartDate, Value: CmpTime(#vStartDate#,#vDateNow#)) \r\n\t\tSetVar(Name: vCmpEndDate, Value: CmpTime(#vEndDate#,#vDateNow#))\r\n\r\n\t\tDBFind(Name: voting_participants, Source: src_two).Columns(id).Where(\"voting_id=#vID# and member_id=#key_id# and decision=0\").Vars(participant)\r\n        If(And(#instance_flag_fulldata#==1,#participant_id#\u003e0,#instance_flag_decision#==0,#vCmpStartDate#\u003c0,#vCmpEndDate#\u003e0)){\r\n            SetVar(Name: vOpportunityVote, Value: 1)\r\n        }.Else{\r\n            SetVar(Name: vOpportunityVote, Value: 0)\r\n        }\r\n\r\n        Div(Class: row df f-valign){\r\n            Div(Class: col-md-2)\r\n            Div(Class: col-md-8){\r\n\r\n                Div(Class: panel panel-default){\r\n                    Form(){ \r\n\r\n                        Div(Class: list-group-item text-center){\r\n                            P(Class: h3 text-bold m0, Body: #instance_name#)\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-12 mt-sm){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-muted m0, Body: EcosysParam(Name: type_voting_decisions, Index: #instance_typedecision#))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-6 mc-sm text-right){\r\n                                    P(Class: h5 text-muted m0, Body: LangRes(description))\r\n                                }\r\n                                Div(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-muted m0, Body: #instance_description#)\r\n                                }\r\n                            }\r\n                        }\r\n\t\t\t\t\t\t\r\n                        Div(Class: list-group-item text-center){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-6 mt-sm text-right){\r\n                                    P(Class: h4 text-normal m0, Body: LangRes(type))\r\n                                }\r\n                                Div(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tP(Class: h4 text-normal m0, Body: EcosysParam(Name: type_voting, Index: #instance_type_voting#))\r\n                                }\r\n                            }\r\n\t\t\t\t\t\t\tIf(Or(#instance_typedecision#==1,#instance_typedecision#==2,#instance_typedecision#==3,#instance_typedecision#==4)){\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h4 text-normal m0, Body: LangRes(contract_accept))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#instance_optional_contract_accept# == \"\"){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h4 text-muted m0, Body: LangRes(optional))\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h4 text-normal m0, Body: #instance_optional_contract_accept#)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h4 text-normal m0, Body: LangRes(contract_reject))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#instance_optional_contract_reject# == \"\"){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h4 text-muted m0, Body: LangRes(optional))\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h4 text-normal m0, Body: #instance_optional_contract_reject#)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-6 mc-sm text-right){\r\n                                    P(Class: h4 text-normal m0, Body: LangRes(filled))\r\n                                }\r\n                                Div(Class: col-md-6 mc-sm text-left){\r\n                                    If(#instance_flag_fulldata# == 1){\r\n                                        P(Class: h4 text-success m0, Body: LangRes(yes))\r\n                                    }.Else{\r\n                                        P(Class: h4 text-danger m0, Body: LangRes(no))\r\n                                    } \r\n                                }\r\n                            }\r\n                            If(Or(#instance_typedecision#==1,#instance_typedecision#==2)){\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-6 mt-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(role))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#instance_optional_role_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tDBFind(Name: roles_list, Source: src_roles_list).Where(\"id=#instance_optional_role_id#\").Vars(roles)\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #roles_role_name# (LangRes(id): #instance_optional_role_id#))\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-6 mc-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(vacancies))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#instance_optional_role_vacancies# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #instance_optional_role_vacancies#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: #instance_optional_role_vacancies#)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-6 mc-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(candidates))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#instance_optional_number_cands# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #instance_optional_number_cands#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: #instance_optional_number_cands#)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df){\r\n                                    Div(Class: col-md-2 mt-sm)\r\n                                    Div(Class: col-md-8 mt-sm text-left){\r\n                                        DBFind(Name: voting_subject, Source: src_voting_subject).Where(\"voting_id=#vID#\").Custom(custom_address){\r\n                                            Span(Class: h6, Body: Address(#member_id#))\r\n                                        }.Custom(custom_member){\r\n                                            Button(Class: btn btn-link, Page: profile_view, PageParams: \"v_member_id=#member_id#\"){\r\n                                                Image(Src: \"#member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n                                                Span(Class: h5 text-bold, Body: #member_name#)\r\n                                            }\r\n                                        }.Custom(custom_voting){\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#vOpportunityVote#==1){\r\n\t\t\t\t\t\t\t\t\t\t\t\tInput(Class: form-control hidden, Type: text, Name: votingID, Value: #vID#)\r\n\t\t\t\t\t\t\t\t\t\t\t\tInput(Class: form-control hidden, Type: text, Name: candidateID, Value: #member_id#)\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: LangRes(vote), Class: btn btn-success, Page: voting_view, PageParams: \"vID=#vID#\", Contract: voting_AcceptCandidates)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                        Table(src_voting_subject, \"=custom_member,=custom_address,=custom_voting\")\r\n                                    }\r\n                                    Div(Class: col-md-2 mt-sm)\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-12 mc-sm){\r\n                                        If(And(#vCmpStartDate#\u003e0,#instance_type_voting#==1)){\r\n                                            If(#instance_typedecision#==1){\r\n                                                Button(Class: btn btn-link, Page: voting_decision_candidates, PageParams: \"vID=#vID#\"){\r\n                                                    Span(Class: h5 text-bold, Body: LangRes(subject_voting_edit))\r\n                                                }\r\n                                            }\r\n                                            If(#instance_typedecision#==2){\r\n                                                Button(Class: btn btn-link, Page: voting_decision_election, PageParams: \"vID=#vID#\"){\r\n                                                    Span(Class: h5 text-bold, Body: LangRes(subject_voting_edit))\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } \r\n\t\t\t\t\t\t\tIf(#instance_typedecision#==3){\r\n\t\t\t\t\t\t\t\tDBFind(Name: voting_subject, Source: src_voting_subject).Columns(id,text_doc_hash,text_document).Where(\"voting_id=#vID#\").Vars(subject)\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                    Div(Class: col-md-10 mt-lg){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_text_document#)\r\n\t\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tDiv(Class: list-group-item){\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h6 text-muted m0, Body: Hash: #subject_text_doc_hash#)\r\n\t\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h6 text-muted m0, Body: Hash: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-12 mc-sm){\r\n\t\t\t\t\t\t\t\t\t\tIf(And(#vCmpStartDate#\u003e0,#instance_type_voting#==1)){\r\n\t\t\t\t\t\t\t\t\t\t\tButton(Class: btn btn-link, Page: voting_decision_document, PageParams: \"vID=#vID#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5 text-bold, Body: LangRes(subject_voting_edit))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                    Div(Class: col-md-10 mt-lg){\r\n\t\t\t\t\t\t\t\t\t\tIf(#vOpportunityVote#==1){\r\n\t\t\t\t\t\t\t\t\t\t\tInput(Class: form-control hidden, Type: text, Name: votingID, Value: #vID#)\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: pull-left){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: LangRes(reject), Class: btn btn-danger, Contract: voting_RejectDecision, PageParams: \"vID=#vID#\", Page: voting_view)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: LangRes(accept), Class: btn btn-success, Contract: voting_AcceptDecision, PageParams: \"vID=#vID#\", Page: voting_view)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tIf(#instance_typedecision#==4){\r\n\t\t\t\t\t\t\t\tDBFind(Name: voting_subject, Source: src_voting_subject).Columns(id,formal_decision_description,formal_decision_table,formal_decision_tableid,formal_decision_column,formal_decision_colvalue).Where(\"voting_id=#vID#\").Vars(subject)\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n                                    Div(Class: col-md-6 mt-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(description))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_formal_decision_description#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-6 mc-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(table_to_written))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_formal_decision_table#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n\t\t\t\t\t\t\t\tIf(#instance_type_voting#==1){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-right){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(row_id))\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_formal_decision_tableid#)\r\n\t\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-6 mc-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#instance_type_voting#==1){\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(column_name))\r\n\t\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(parameter_name))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_formal_decision_column#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-6 mc-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(written_value))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_formal_decision_colvalue#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-12 mc-sm){\r\n\t\t\t\t\t\t\t\t\t\tIf(And(#vCmpStartDate#\u003e0,#instance_type_voting#==1)){\r\n\t\t\t\t\t\t\t\t\t\t\tButton(Class: btn btn-link, Page: voting_decision_formal, PageParams: \"vID=#vID#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5 text-bold, Body: LangRes(subject_voting_edit))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                    Div(Class: col-md-10 mt-lg){\r\n\t\t\t\t\t\t\t\t\t\tIf(#vOpportunityVote#==1){\r\n\t\t\t\t\t\t\t\t\t\t\tInput(Class: form-control hidden, Type: text, Name: votingID, Value: #vID#)\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: pull-left){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: LangRes(reject), Class: btn btn-danger, Contract: voting_RejectDecision, PageParams: \"vID=#vID#\", Page: voting_view)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: LangRes(accept), Class: btn btn-success, Contract: voting_AcceptDecision, PageParams: \"vID=#vID#\", Page: voting_view)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tIf(#instance_typedecision#==5){\r\n\t\t\t\t\t\t\t\tDBFind(Name: voting_subject, Source: src_voting_subject).Columns(id,contract_accept,contract_reject).Where(\"voting_id=#vID#\").Vars(subject)\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(contract_accept))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_contract_accept#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-right){\r\n                                        P(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(contract_reject))\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\t\tIf(#subject_id# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #subject_contract_reject#)\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(empty))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-12 mc-sm){\r\n\t\t\t\t\t\t\t\t\t\tIf(And(#vCmpStartDate#\u003e0,#instance_type_voting#==1)){\r\n\t\t\t\t\t\t\t\t\t\t\tButton(Class: btn btn-link, Page: voting_decision_contract, PageParams: \"vID=#vID#\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5 text-bold, Body: LangRes(subject_voting_edit))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                }\r\n                                Div(Class: row df f-valign){\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                    Div(Class: col-md-10 mt-lg){\r\n\t\t\t\t\t\t\t\t\t\tIf(#vOpportunityVote#==1){\r\n\t\t\t\t\t\t\t\t\t\t\tInput(Class: form-control hidden, Type: text, Name: votingID, Value: #vID#)\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: pull-left){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: LangRes(reject), Class: btn btn-danger, Contract: voting_RejectDecision, PageParams: \"vID=#vID#\", Page: voting_view)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tDiv(Class: pull-right){\r\n\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: LangRes(accept), Class: btn btn-success, Contract: voting_AcceptDecision, PageParams: \"vID=#vID#\", Page: voting_view)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                    }\r\n                                    Div(Class: col-md-1 mt-lg)\r\n                                }\r\n\t\t\t\t\t\t\t}\r\n                        }\r\n\t\t\t\t\t\t\r\n                        Div(Class: list-group-item text-center){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-6 mt-sm text-right){\r\n                                    P(Class: h5 text-normal m0, Body: LangRes(status))\r\n                                }\r\n                                Div(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tIf(#instance_flag_success#==1){ \r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-success m0, Body: LangRes(success))\r\n\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\tIf(#vCmpEndDate#\u003c0){\r\n\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-muted m0, Body: LangRes(finished))\r\n\t\t\t\t\t\t\t\t\t\t}.Else{\t\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#vCmpStartDate#\u003c0){ \r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-success m0, Body: LangRes(started))\r\n\t\t\t\t\t\t\t\t\t\t\t}.Else{\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-warning m0, Body: LangRes(waiting))\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n                                }\r\n                            }\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-right){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(notifications))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\tIf(#instance_flag_notifics#==1){\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(yes))\r\n\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(no))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-6 mc-sm text-right){\r\n                                    P(Class: h5 text-normal m0, Body: LangRes(decision))\r\n                                }\r\n                                Div(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\tIf(#instance_flag_decision#==-2){\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(not_enough_votes))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tIf(#instance_flag_decision#==-1){ \r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: LangRes(rejected))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tIf(#instance_flag_decision#==0){\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(no))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tIf(#instance_flag_decision#==1){\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-success m0, Body: LangRes(accepted))\r\n\t\t\t\t\t\t\t\t\t}\r\n                                }\r\n                            }\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(date_start))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tIf(#vCmpStartDate#\u003c0){\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-muted m0, Body: DateTime(DateTime: #instance_startdate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: DateTime(DateTime: #instance_startdate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-right){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(date_end))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\tIf(#vCmpEndDate#\u003c0){\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-muted m0, Body: DateTime(DateTime: #instance_enddate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: DateTime(DateTime: #instance_enddate#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(voting_volume))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #instance_volume#)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-right){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: LangRes(voting_quorum))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mc-sm text-left){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #instance_quorum#)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-right){\r\n\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0){\r\n\t\t\t\t\t\t\t\t\t\tSpan(Body: LangRes(participants))\r\n\t\t\t\t\t\t\t\t\t\tSpan(Class: text-danger, Body:*)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-6 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\tIf(#instance_number_participants# \u003e 0){\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-normal m0, Body: #instance_number_participants#)\r\n\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\tP(Class: h5 text-danger m0, Body: #instance_number_participants#)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-2 mt-sm)\r\n                                Div(Class: col-md-8 mt-sm text-left){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tDBFind(Name: voting_participants, Source: src_voting_participants).Columns(id,decision,member_name,member_id,member_avatar,decision_date).Where(\"voting_id=#vID#\").Custom(custom_address){\r\n                                            P(Class: h6 m0, Body: Address(#member_id#))\r\n                                        }.Custom(custom_member){\r\n                                            Button(Class: btn btn-link, Page: profile_view, PageParams: \"v_member_id=#member_id#\"){\r\n                                                Image(Src: \"#member_avatar#\", Class: img-circle).Style(width: 30px;  border: 1px solid #5A5D63; margin-right: 10px;)\r\n                                                Span(Class: h5 text-bold, Body: #member_name#)\r\n                                            }\r\n                                        }.Custom(custom_decision){\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tIf(Or(#instance_typedecision#==1,#instance_typedecision#==2)){ \r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==0){ \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h6 m0, Body: LangRes(did_not_vote))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}.Else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tDBFind(Name: member, Source: src_member).Where(\"id=#decision#\").Vars(list)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-success text-center h6 m0, Body: $vote_for_candidate$:)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-success text-center h6 m0, Body: #list_member_name# Address(#decision#) )\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-success text-center h6 m0, Body: $at$ DateTime(DateTime: #decision_date#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#instance_typedecision#==3){ \r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==0){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h6 m0, Body: LangRes(did_not_vote))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==1){ \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-success h6 m0, Body: $document_accept$ $at$ DateTime(DateTime: #decision_date#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==-1){ \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-danger h6 m0, Body: $document_reject$ $at$ DateTime(DateTime: #decision_date#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#instance_typedecision#==4){\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==0){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h6 m0, Body: LangRes(did_not_vote))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==1){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-success h6 m0, Body: $decision_accept$ $at$ DateTime(DateTime: #decision_date#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==-1){ \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-danger h6 m0, Body: $decision_reject$ $at$ DateTime(DateTime: #decision_date#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tIf(#instance_typedecision#==5){ \r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==0){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: h6 m0, Body: LangRes(did_not_vote))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==1){ \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-success h6 m0, Body: $contract_accepted$ $at$ DateTime(DateTime: #decision_date#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tIf(#decision#==-1){ \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP(Class: text-danger h6 m0, Body: $contract_rejected$ $at$ DateTime(DateTime: #decision_date#, Format: \"DD.MM.YYYY HH:MI\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n                                        Table(src_voting_participants, \"=custom_member,=custom_decision\")\r\n\t\t\t\t\t\t\t\t\r\n                                }\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-2 mt-sm)\r\n                            }\r\n\t\t\t\t\t\t\tDiv(Class: row df f-valign){\r\n\t\t\t\t\t\t\t\tDiv(Class: col-md-12 mc-sm){\r\n\t\t\t\t\t\t\t\t\tIf(And(#vCmpStartDate#\u003e0,#instance_type_voting#==1)){\r\n\t\t\t\t\t\t\t\t\t\tButton(Class: btn btn-link, Page: voting_invite, PageParams: \"vID=#vID#\"){\r\n\t\t\t\t\t\t\t\t\t\t\tSpan(Class: h5 text-bold, Body: LangRes(participants_add))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n                        Div(Class: list-group-item text-center){\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-1 mt-sm )\r\n                                Div(Class: col-md-5 mt-sm text-center){\r\n\t\t\t\t\t\t\t\t\tP(Class: h4 text-normal m0, Body: LangRes(voted))\r\n                                }\r\n                                Div(Class: col-md-5 mt-sm text-center){\r\n\t\t\t\t\t\t\t\t\tP(Class: h4 text-normal m0, Body: LangRes(progress))\r\n                                }\r\n                                Div(Class: col-md-1 mt-sm)\r\n                            }\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-1 mt-sm )\r\n                                Div(Class: col-md-5 mt-sm text-center){\r\n\t\t\t\t\t\t\t\t\tP(Class: h6 text-muted m0, Body: LangRes(voting_graph_voted))\r\n                                }\r\n                                Div(Class: col-md-5 mt-sm text-center){\r\n\t\t\t\t\t\t\t\t\tP(Class: h6 text-muted m0, Body: LangRes(voting_graph_progress))\r\n                                }\r\n                                Div(Class: col-md-1 mt-sm)\r\n                            }\r\n                            Div(Class: row df f-valign){\r\n                                Div(Class: col-md-1 mt-sm )\r\n                                Div(Class: col-md-5 mt-sm text-center){\r\n                                    P(Class: h3 text-normal m0, Body: #instance_number_voters# / #instance_percent_voters#)\r\n                                }\r\n                                Div(Class: col-md-5 mt-sm text-center){\r\n                                    P(Class: h3 text-normal m0, Body: #instance_percent_success# / 100)\r\n                                }\r\n                                Div(Class: col-md-1 mt-sm)\r\n                            }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n                    }\r\n                }\r\n\r\n            }\r\n            Div(Class: col-md-2)\r\n        }   \r\n    }.Else{\r\n        Div(Class: md-12 alert alert-danger text-center){\r\n            Span(Body: LangRes(attention))\r\n        }\r\n    }\r\n}",
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Menu": "default_menu"
        }
    ],
    "parameters": [
        {
            "Name": "type_voting",
            "Value": "type_voting_custom,type_voting_system",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "type_voting_decisions",
            "Value": "voting_decisions_candidate_requests,voting_decisions_candidate_manual,voting_decisions_document,voting_decisions_db,voting_decisions_contract",
            "Conditions": "ContractConditions(\"MainCondition\")"
        },
        {
            "Name": "type_voting_participants",
            "Value": "voting_participants_everybody,voting_participants_manual,voting_participants_role",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "tables": [
        {
            "Name": "voting_instances",
            "Columns": "[{\n        \"name\": \"typedecision\",\n        \"type\": \"number\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"optional_role_id\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectSettings\\\")\"\n    }, {\n        \"name\": \"optional_role_vacancies\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectSettings\\\")\"\n    }, {\n        \"name\": \"creator_id\",\n        \"type\": \"number\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"type_voting\",\n        \"type\": \"number\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"flag_decision\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_CheckDecision\\\")\"\n    }, {\n        \"name\": \"optional_number_cands\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectCandidates\\\")\"\n    }, {\n        \"name\": \"enddate\",\n        \"type\": \"datetime\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"flag_success\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_UpdateDataForGraphs\\\")\"\n    }, {\n        \"name\": \"flag_fulldata\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectCheckFulldata\\\")\"\n    }, {\n        \"name\": \"flag_notifics\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_SendNotifics\\\")\"\n    }, {\n        \"name\": \"number_voters\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_UpdateDataForGraphs\\\")\"\n    },\n    {\n        \"name\": \"optional_contract_accept\",\n        \"type\": \"varchar\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectSettings\\\", \\\"voting_SubjectDocument\\\", \\\"voting_SubjectFormal\\\")\"\n    },\n    {\n        \"name\": \"optional_contract_reject\",\n        \"type\": \"varchar\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectSettings\\\", \\\"voting_SubjectDocument\\\", \\\"voting_SubjectFormal\\\")\"\n    },\n    {\n        \"name\": \"contract_accept_params\",\n        \"type\": \"varchar\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectSettings\\\", \\\"voting_SubjectDocument\\\", \\\"voting_SubjectFormal\\\")\"\n    },\n    {\n        \"name\": \"contract_reject_params\",\n        \"type\": \"varchar\",\n        \"conditions\": \"ContractAccess(\\\"voting_SubjectSettings\\\", \\\"voting_SubjectDocument\\\", \\\"voting_SubjectFormal\\\")\"\n    },\n    {\n        \"name\": \"quorum\",\n        \"type\": \"number\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"description\",\n        \"type\": \"text\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"volume\",\n        \"type\": \"number\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"startdate\",\n        \"type\": \"datetime\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"creator_name\",\n        \"type\": \"varchar\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"creator_avatar\",\n        \"type\": \"bytea\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"percent_voters\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_UpdateDataForGraphs\\\")\"\n    }, {\n        \"name\": \"percent_success\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_UpdateDataForGraphs\\\")\"\n    }, {\n        \"name\": \"name\",\n        \"type\": \"varchar\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"delete\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_Delete\\\")\"\n    }, {\n        \"name\": \"typeparticipants\",\n        \"type\": \"number\",\n        \"conditions\": \"false\"\n    }, {\n        \"name\": \"number_participants\",\n        \"type\": \"number\",\n        \"conditions\": \"ContractAccess(\\\"voting_Invite\\\")\"\n    }\n]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "voting_participants",
            "Columns": "[{\n    \"name\": \"decision_date\",\n    \"type\": \"datetime\",\n    \"conditions\": \"ContractAccess(\\\"voting_AcceptCandidates\\\",\\\"voting_AcceptDecision\\\",\\\"voting_RejectDecision\\\")\"\n}, {\n    \"name\": \"member_avatar\",\n    \"type\": \"bytea\",\n    \"conditions\": \"true\"\n}, {\n    \"name\": \"decision\",\n    \"type\": \"number\",\n    \"conditions\": \"true\"\n}, {\n    \"name\": \"member_id\",\n    \"type\": \"number\",\n    \"conditions\": \"false\"\n}, {\n    \"name\": \"voting_id\",\n    \"type\": \"number\",\n    \"conditions\": \"false\"\n}, {\n    \"name\": \"member_name\",\n    \"type\": \"varchar\",\n    \"conditions\": \"false\"\n}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "voting_subject",
            "Columns": "[{\n    \"name\": \"member_avatar\",\n    \"type\": \"bytea\",\n    \"conditions\": \"true\"\n}, {\n    \"name\": \"contract_accept\",\n    \"type\": \"varchar\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectContract\\\")\"\n}, {\n    \"name\": \"formal_decision_column\",\n    \"type\": \"varchar\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectFormal\\\")\"\n}, {\n    \"name\": \"formal_decision_tableid\",\n    \"type\": \"number\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectFormal\\\")\"\n}, {\n    \"name\": \"formal_decision_colvalue\",\n    \"type\": \"varchar\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectFormal\\\")\"\n}, {\n    \"name\": \"formal_decision_description\",\n    \"type\": \"text\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectFormal\\\")\"\n}, {\n    \"name\": \"member_id\",\n    \"type\": \"number\",\n    \"conditions\": \"false\"\n}, {\n    \"name\": \"text_doc_hash\",\n    \"type\": \"text\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectDocument\\\")\"\n}, {\n    \"name\": \"formal_decision_table\",\n    \"type\": \"varchar\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectFormal\\\")\"\n}, {\n    \"name\": \"number_accept\",\n    \"type\": \"number\",\n    \"conditions\": \"ContractAccess(\\\"voting_AcceptCandidates\\\",\\\"voting_AcceptDecision\\\")\"\n}, {\n    \"name\": \"member_name\",\n    \"type\": \"varchar\",\n    \"conditions\": \"true\"\n}, {\n    \"name\": \"voting_id\",\n    \"type\": \"number\",\n    \"conditions\": \"false\"\n}, {\n    \"name\": \"contract_reject\",\n    \"type\": \"varchar\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectContract\\\")\"\n}, {\n    \"name\": \"text_document\",\n    \"type\": \"text\",\n    \"conditions\": \"ContractAccess(\\\"voting_SubjectDocument\\\")\"\n}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ]
}